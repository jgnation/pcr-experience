// Â© 2014 Lexmark International, Inc. and Perceptive Software, LLC.  All rights reserved.
define("packages_shell_src_content_hosted_mainView_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="window" class="hosted"></div>\n<div class="clear"></div>'}}),define("packages_shell_src_content_hosted_titlebar_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="titlebar">\r\n    <span class="caption">&nbsp;</span>\r\n    <div class="window-controls">\r\n        <a class="minimize-button">_</a>\r\n        <a class="close-button">X</a>\r\n    </div>\r\n</div>\r\n'}}),define("packages/shell/src/js/views/hosted/titlebarView",["underscore","jquery","core","template!../../../content/hosted/titlebar"],function(e,t,n,r){return n.View.extend({initialize:function(e){e=e||{},this.host=e.host||n.Host,this.host.titlebarView=this},setText:function(e){this.$("#titlebar .caption").text(e)},render:function(){return this.$element.html(r.render()),this.host.title&&(this.setText(this.host.title),delete this.host.title),this.$element},domEvents:{"click .close-button":function(){this.host.CloseWindow()},"click .minimize-button":function(){this.host.MinimizeWindow()}}})}),define("packages/shell/src/js/views/hosted/mainView",["core","underscore","jquery","template!../../../content/hosted/mainView","./titlebarView"],function(e,t,n,r,i){var s=e.Host;return e.View.extend({id:"mainView",className:"home",domEvents:{},session:null,pressTimer:null,initialize:function(){t.bindAll(this),this.session=this.options.session,this.session.isActive()||this.session.getConnections().online.logIn(s.get_UserName(),s.get_Password()),e.App.moduleCatalog.once("loaded",function(){s.OnModuleInitialized()})},defaultBehavior:function(){s.module=e.App.moduleCatalog.getModule(s.get_ModuleName()),s.module.on("change:title",this.setWindowTitle),this.render(),e.Location.navigate(s.module.icon.path,{trigger:!0,replace:!0,allowExternal:!0}),n(function(){s.module.$element.trigger("moduleVisibilityChanged",!0)})},triggerModuleInDomEvent:function(){},setWindowTitle:function(t){this.$("#app-header-title").text(t||e.Strings.translate("brand.productName")+" - "+s.get_ModuleName())},render:function(){if(!this.rendered&&s.module&&this.session.isActive()){this.rendered=!0,this.$element.html(r.render());var e=s.titlebarView||new i;return e.render(),this.$element.prepend(e.$element),this.$element.removeClass("home"),this.setWindowTitle(s.module.windowTitle),this.$("#window").html(s.module.$element),this.$element}}})}),define("packages/shell/src/js/header",["core"],function(e){function t(e){e=e||{},this.location=e.location||window.location}return t.prototype=e.Events.enableFor({get hidden(){return this.location&&/\?.*\bnoheader\b/.test(this.location.href.split("#")[0])||!1},get selectedModule(){return this._selectedModule},set selectedModule(e){this._selectedModule=e,this.trigger("change:selectedModule",e)}}),t}),define("packages_shell_src_content_phone_appHeader_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="header-bar">\n	<div class="up-btn-wrap">\n		<button id="up-btn" type="button" class="up-btn containerless menu-button " title="'+f((o=n.i18n||t&&t.i18n,u={hash:{},data:i},o?o.call(t,"shell.mainView.upButtonAltText",u):a.call(t,"i18n","shell.mainView.upButtonAltText",u)))+'">\n	        <span class="icon icon-24 icon-disclosure_left_triangle" aria-hidden="true"></span>\n	    </button>\n	</div>\n	<div class="title-wrap">\n		<label id="app-header-title"></label>\n	</div>\n	<div class="user-nav-wrap">\n		<ul class="user-nav"></ul>\n	</div>    \n</div>\n',s}}),define("packages_shell_src_content_appHeader_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<div class="header-bar">\n	<div class="branding-img">\n		<img src="',(u=n.headerLogo)?o=u.call(t,{hash:{},data:i}):(u=t&&t.headerLogo,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" aria-hidden="true"/>\n	</div>\n	<div class="branding-text">\n		<h1>'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"brand.productName",a):c.call(t,"i18n","brand.productName",a)))+'</h1> \n	</div>\n	<div class="app-launcher">\n		<button class="menu-button launcher-btn containerless" type="button">\n	        <span class="module-name"></span><span class="launcher-icon icon icon-disclosure_down_triangle_thin" aria-hidden="true"></span>\n	    </button>\n	</div>\n    <div class="header-right">\n		<span class="search-module-area"></span>\n	    <ul class="user-nav"></ul>\n    </div>    \n</div>\n',s}}),define("packages/shell/src/js/quickAccess",["core"],function(e){function t(e){e=e||{},this.items=e.items||[]}return t.prototype={addItem:function(t){if(!t)throw"No item supplied to QuickAccess.addItem";if(!t.buttonClass)throw"No buttonClass supplied to QuickAccess.addItem";if(!t.content&&!t.onClick)throw"No content or clickHandler supplied to QuickAccess.addItem";return t=e.Events.enableFor({state:t.state||"no-content",label:t.label,buttonClass:t.buttonClass,content:t.content,onClick:t.onClick,priority:t.priority||Number.MAX_VALUE}),this.items.push(t),this.items.sort(function(e,t){return e.priority-t.priority}),this.trigger("change:items"),{get state(){return t.state},set state(e){var n={oldState:t.state,newState:e};t.state=e,t.trigger("change:state",n)},set label(e){var n={oldLabel:t.label,newLabel:e};t.label=e,t.trigger("change:label",n)}}}},e.Events.enableFor(t.prototype),t}),define("packages/shell/src/js/views/quickAccessView",["jquery","underscore","core","controls","../quickAccess"],function(e,t,n,r,i){var s=n.View.extend({tagName:"ul",className:"user-nav",domEvents:{"click button":"onButtonClick"},initialize:function(e){Object.defineProperty(this,"iconSize",{get:function(){return this._iconSize},set:function(e){this._iconSize=e,this.render()}}),e=e||{},this.platform=e.platform||n.PlatformDetector,this.quickAccess=e.quickAccess||i.instance,this.listenTo(this.quickAccess,"change:items",this.render.bind(this)),this._iconSize=e.iconSize||"",this.popoverStyle={isPositioned:this.platform.type()==="phone"}},closePopover:function(){var e=!1;return this.popoverMenu&&(this.popoverMenu.close(),e=!0),e},doPopover:function(){this.closePopover();var n=this.activeItem;if(!n)return;var i=t.result(n.quickAccessItem,"content");this.popoverMenu=r.PopoverMenu.show(n,{content:e(i),className:"quick-access-popover",delay:0,direction:"bottom",isPositioned:this.popoverStyle.isPositioned,isInteractive:!0,items:i.menuItems,detachContent:!0}),this.popoverMenu&&(this.popoverMenu.$element.find("[tabindex]:first").focus(),this.popoverMenu.on("close",function(){this.popoverMenu=null}.bind(this)))},onButtonClick:function(e){var t=e.currentTarget;if(this.closePopover()&&this.activeItem===t)return;this.activeItem=t;if(t.quickAccessItem.onClick)return t.quickAccessItem.onClick(e);this.doPopover()},render:function(){var t=n.Strings.format('<button class="menu-button icon {iconSize} containerless" type="button" aria-haspopup="true" />',{iconSize:this.iconSize}),r=this,i=r.$element;i.html(""),r.quickAccess.items.forEach(function(n){var r=e(t,n);r.attr("aria-label",n.label),r.addClass(n.buttonClass),r.addClass(n.state),r[0].quickAccessItem=n,n.on("change:state",function(e){r.removeClass(e.oldState).addClass(e.newState)}),n.on("change:label",function(e){r.attr("aria-label",e.newLabel)}),i.prepend(e("<li/>").append(r))})}});return s}),define("packages_shell_src_content_userNavPopover_html",[],function(){return function(e,t,n,r,i){function c(e,t){var r="",i,s,o;return r+='\n        <div class="user-panel">\n            <span id="user-icon" class="icon-32 icon-user" aria-hidden="true"></span>\n            <span id="user-name">\n                <span class="assistive-text">'+a((s=n.i18n||e&&e.i18n,o={hash:{},data:t},s?s.call(e,"shell.loginView.userNameField",o):u.call(e,"i18n","shell.loginView.userNameField",o)))+" ",(s=n.userName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.userName,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</span>\n                ",(s=n.userName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.userName,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'\n            </span>\n            <span id="server-name">',(s=n.serverName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.serverName,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</span>\n        </div>\n        ",r}function h(e,t){var r="",i,s,o;r+='\n        <div class="toolbar-control primary-toolbar">\n            <div class="button-group">\n                <button id="user-nav-settings" type="button" title="'+a((s=n.i18n||e&&e.i18n,o={hash:{},data:t},s?s.call(e,"shell.mainView.userMenu.settings",o):u.call(e,"i18n","shell.mainView.userMenu.settings",o)))+'">\n                    <span class="icon-gear" aria-hidden="true"></span>\n                </button>\n                <button id="user-nav-help" type="button" title="'+a((s=n.i18n||e&&e.i18n,o={hash:{},data:t},s?s.call(e,"shell.mainView.help",o):u.call(e,"i18n","shell.mainView.help",o)))+'">\n                    <span class="icon-help" aria-hidden="true"></span>\n                </button>\n                ',i=n["if"].call(e,e&&e.isSessionActive,{hash:{},inverse:l.noop,fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n            </div>\n        </div>\n        ",r}function p(e,t){var r="",i,s;return r+='\n                <button id="user-nav-disconnect" type="button" title="'+a((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"shell.mainView.userMenu.disconnect",s):u.call(e,"i18n","shell.mainView.userMenu.disconnect",s)))+'">\n                    <span class="icon-log_off" aria-hidden="true"></span>\n                </button>\n                ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<div>\n    <div tabindex="1">\n        ',o=n["if"].call(t,t&&t.isSessionActive,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n        ",o=n["if"].call(t,t&&t.showButtons,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;return s+="\n    </div>\n</div>\n",s}}),define("packages/shell/src/js/views/userNavView",["underscore","jquery","core","controls","../header","../quickAccess","template!../../content/userNavPopover.html"],function(e,t,n,r,i,s,o){var u=0,a=n.View.extend({className:"user-nav-content",domEvents:{"click #user-nav-disconnect":"onDisconnect","click #user-nav-help":"onHelp","click #user-nav-settings":"onSettings"},initialize:function(t){e.bindAll(this),t=t||{},this.session=t.session,this.window=t.window||window,this.header=t.header||i.instance,this.quickAccess=t.quickAccess||s.instance,this.platform=t.platform||n.PlatformDetector,this.moduleCatalog=t.moduleCatalog||n.App.moduleCatalog,this.isSessionActive=this.session.isActive(),this.session.on("begin",function(){this.isSessionActive=!0}.bind(this)),this.session.on("end",function(){this.isSessionActive=!1}.bind(this)),this.addListeners(),this.refreshMenuItems()},render:function(){this.refreshMenuItems();var e=o.render({isSessionActive:this.isSessionActive,showButtons:n.Location.getFragment()!=="login",userName:this.session.getUsername()});return this.$element.html(e),this},getElement:function(){return this.render(),this.$element.menuItems=this.menuItems,this.$element},refreshMenuItems:function(){this.menuItems=[],e.each(this.moduleCatalog.getModules(),function(e){e.isSystemModule&&e.icon&&e.icon.text&&e.name.indexOf("shell:")!==0&&this.menuItems.push({name:e.icon.text,module:e,onClick:function(e,t){n.Location.navigate(t.module.path,{trigger:!0,allowExternal:!0})},iconClass:e.icon.iconClass})},this),!this.addedQuickAccess&&(this.menuItems.length||n.Location.getFragment()!=="login")&&(this.addedQuickAccess=!0,this.quickAccess.addItem({buttonClass:"icon-user",label:n.Strings.translate("shell.mainView.userMenu.altText"),content:this.getElement,priority:1}))},onDisconnect:function(){var e=this.gatherMessages("disconnect"),t=!0;if(e.length){var r=n.Strings.format("{0} \n\n {1}",[n.Strings.translate("shell.mainView.disconnectVerificationDialog.prompt"),e.join("\n")]);t=this.window.confirm(r)}t&&(this.window.removeEventListener("beforeunload",this.promptCancelMessage),this.session.end()),this.trigger("close")},onHelp:function(){var e=n.App.config.helpUrl;this.header.selectedModule&&this.header.selectedModule.helpPage?e+=this.header.selectedModule.helpPage:e+=n.App.config.helpPage,this.window.open(e),this.trigger("close")},onSettings:function(){n.Location.navigate("settings",{trigger:!0,allowExternal:!0}),this.trigger("close")},addListeners:function(){t("body").on("click","button[type=submit]",function(){u=Date.now()}),this.window.addEventListener("beforeunload",this.promptCancelMessage)},promptCancelMessage:function(e){if(!this.isSessionActive||this.window.location.reload.force)return;if(Date.now()-u>100){var t=this.gatherMessages("unload");if(t.length){var r=n.Strings.format("{0}\n\n{1}",[n.Strings.translate("shell.mainView.navigateVerificationPromptMessage"),t.join("\n")]);return e.returnValue=r,r}}u=0},gatherMessages:function(e){var t=[],r={push:t.push.bind(t),type:e};return n.EventAggregator.trigger("shell","prompt:cancelmessage",r),t}});return a}),define("packages/shell/src/js/moduleMenu",["core","logger"],function(e,t){function n(e){e=e||{},this.logger=e.logger||t}return e.Events.enableFor(n.prototype),n.prototype.disable=function(e){if(typeof e!="boolean"){var n="ModuleMenu.disable() requires boolean parameter isDisabled";throw this.logger.log(n,t.CRITICAL),n}this.trigger("change:disabled",e)},n}),define("packages/shell/src/js/views/appHeaderView",["jquery","underscore","core","controls","../header","platform!template!../../content/{phone}/appHeader","./quickAccessView","./userNavView","../moduleMenu"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({className:"app-header",tagName:"header",domEvents:{"click #up-btn":"onUp"},initialize:function(e){t.bindAll(this),this.session=e.session,this.header=e.header||i.instance,this.moduleCatalog=e.moduleCatalog,this.location=e.location||window.location,this.locationApi=e.locationApi||n.Location,this.platform=e.platform||n.PlatformDetector,this.config=e.config||n.App.config,this.packageLoad=e.packageLoad||n.Package.load,this.moduleMenu=e.moduleMenu||a.instance,this.template=e.template||s,this.quickAccessView=new o(e),this.userNavView=new u(e),this.moduleMenuDisabled=e.moduleMenuDisabled,this.moduleMenu.on("change:disabled",function(e){this.moduleMenuDisabled!==e&&(this.moduleMenuDisabled=e,this.render())}.bind(this)),this.session.on("begin",this.updateHeaderIconSize,this),this.session.on("end",this.updateHeaderIconSize,this)},updateHeaderIconSize:function(){var e=n.Location.getFragment().indexOf("login")===0;this.quickAccessView.iconSize=this.session.isActive()||!e?"icon-32":""},loadSearchBox:function(){var e=this.config.shell&&this.config.shell.globalSearch;if(!e||this.searchBox)return;this.packageLoad(e).then(function(e,t){if(!this.session.isActive())return;var n=this.searchBox=new t;n.render(),this.shade?this.shade.setContent(n.getElement()):this.$(".search-module-area").html(n.getElement())}.bind(this))},render:function(e){var t=e&&e.headerLogo||n.Strings.translate("brand.headerLogo");this.element.firstElementChild||this.$element.append(this.template.render({headerLogo:t})),n.PlatformDetector.type()==="phone"&&!this.shade&&(this.shade=new r.Shade(this.element,null,{headerElement:this.$element.find(".header-bar")})),this.loadSearchBox();var i=this.$(".launcher-btn");return i.length&&(i.attr("disabled",this.moduleMenuDisabled),this.moduleLauncherButton||(i.on("click",this.setModuleLauncherItems.bind(this)),this.moduleLauncherButton=new r.MenuButton(i,[],{showPointer:!1}))),this.shade&&(this.session.isActive()&&!this.moduleMenuDisabled?this.shade.enable():this.shade.disable(),this.shade.setItems(this.getModuleItems()),this.updateShadeSelectedModule()),this.headerTitle&&this.setWindowTitle(this.headerTitle),this.checkUpAction(),this.updateModuleName(),this.quickAccessView.render(),this.$(".user-nav").replaceWith(this.quickAccessView.$element),this},getModuleItems:function(){var e=[];return t.each(this.moduleCatalog.getModules(),function(t){t.icon&&!t.isSystemModule&&this.session.isActive()&&e.push({module:t,name:t.icon.text,onClick:this.onModuleItemClick.bind(this),isDisabled:!t.offlineCompatible&&this.session.getConnections().offline.isLoggedIn(),iconClass:t.icon.className})},this),e},onModuleItemClick:function(e,t){var i=t.module.currentFragment?!0:!1;if(!t.isDisabled)this.setSelectedModule(t.module,i);else if(this.session.getConnections().offline.isLoggedIn()){var s=n.Strings.format(n.Strings.translate("shell.mainView.moduleNotOfflineCompatible"),{name:t.name});r.AlertDialog.show({message:s})}},onUp:function(){if(this.header.selectedModule){var e=this.header.selectedModule.upButtonAction;if(!e){var t=this.session.isActive()?"":"login";this.locationApi.navigate(t,{trigger:!0,allowExternal:!0})}else typeof e=="string"?this.locationApi.navigate(e,{trigger:!0,allowExternal:!0}):e.call(this.header.selectedModule)}},setModuleLauncherItems:function(){var e=this.getModuleItems(),n=t.where(e,{module:this.header.selectedModule});n&&n.length&&(n[0].isSelected=!0),this.moduleLauncherButton.setItems(e)},setSelectedModule:function(e,t){this.updateHeaderIconSize();if(!e){this.header.selectedModule&&this.stopListening(this.header.selectedModule,"change:upButtonAction"),this.header.selectedModule=null;return}if(!this.session.isActive()&&!e.isSystemModule)return;if(this.header.selectedModule!==e){this.lastModule=this.header.selectedModule,this.header.selectedModule=e,this.updateModuleName(),this.lastModule&&this.stopListening(this.lastModule,"change:upButtonAction"),this.listenTo(this.header.selectedModule,"change:upButtonAction",this.checkUpAction);var n=e.currentFragment||e.path||e.icon&&e.icon.path;n&&(this.setWindowTitle(e.windowTitle),this.lastModule&&this.lastModule.trigger("deactivated"),e.trigger("activated",n,!t)),this.updateShadeSelectedModule()}else this.location.hash===""&&(this.location.hash=e.currentFragment||e.icon&&e.icon.path||"");this.checkUpAction()},updateShadeSelectedModule:function(){if(this.header.selectedModule&&this.shade){var e=t.where(this.shade.getItems(),{module:this.header.selectedModule});e&&e.length&&this.shade.select(e[0])}},setWindowTitle:function(e){this.headerTitle=e||n.Strings.translate("brand.productName"),this.$("#app-header-title").text(this.headerTitle)},updateModuleName:function(){var e="";this.header.selectedModule&&this.header.selectedModule.icon&&(e=this.header.selectedModule.icon.text),this.$(".module-name").text(e)},checkUpAction:function(){this.header.selectedModule&&this.header.selectedModule.upButtonAction!=null?this.$("#up-btn").removeClass("no-up-action"):this.$("#up-btn").addClass("no-up-action")}});return f}),define("packages_shell_src_content_mainView_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<header class="app-header"></header>\n<div id="screen-reader-alert" aria-hidden="true" aria-live="assertive" role="alert" class="assistive-text"></div>\n<div id="window" role="main"></div>\n<div class="clear"></div>'}}),define("packages_shell_src_content_loginView_html",[],function(){return function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\r\n                        src="',(s=n.loginLogoMobile)?i=s.call(e,{hash:{},data:t}):(s=e&&e.loginLogoMobile,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"\r\n                    ',r}function d(e,t){var r="",i,s;return r+='\r\n                        src="',(s=n.loginLogo)?i=s.call(e,{hash:{},data:t}):(s=e&&e.loginLogo,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"\r\n                    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<form id="login-form" action="javascript:void(0);">\r\n    <div id="sslWarning" role="status"></div>\r\n    <div class="login">\r\n        <ul id="button-menu-panel" class="button-panel"></ul>\r\n        <div class="login-outer-wrap" id="loginDialog">\r\n                <img class="product-logo" aria-hidden="true"\r\n                    ',o=n["if"].call(t,t&&t.isMobile,{hash:{},inverse:c.program(3,d,i),fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\r\n                />\r\n                <div class="login-product-name">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"brand.productName",a):h.call(t,"i18n","brand.productName",a)))+'</div>\r\n                <div class="error" id="errorMessage" role="alert" aria-live="assertive"><p style="margin:0px;"><!--using p tag to keep nvda from reading this twice--></p></div>\r\n                <label for="txtLogin">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.loginView.userNameField",a):h.call(t,"i18n","shell.loginView.userNameField",a)))+':</label>\r\n                <input placeholder="'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.loginView.userNameField",a):h.call(t,"i18n","shell.loginView.userNameField",a)))+'" id="txtLogin" type="text" value="',(u=n.lastLoggedInUserName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.lastLoggedInUserName,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" required aria-required="true" autocapitalize="off" autocorrect="off"/>\r\n                <label for="txtPassword">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.loginView.passwordField",a):h.call(t,"i18n","shell.loginView.passwordField",a)))+':</label>\r\n                <input placeholder="'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.loginView.passwordField",a):h.call(t,"i18n","shell.loginView.passwordField",a)))+'" id="txtPassword" type="password" required aria-required="true"/>\r\n                <button type="submit" class="sign-in primary" id="btnLogin">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.loginView.signInButton",a):h.call(t,"i18n","shell.loginView.signInButton",a)))+'</button>\r\n                <div class="company-logo"></div>\r\n        </div>\r\n    </div>\r\n</form>\r\n',s}}),define("packages/shell/src/js/views/mainView",["jquery","underscore","core","controls","../header","./appHeaderView","template!../../content/mainView","template!../../content/loginView"],function(e,t,n,r,i,s,o,u){return n.View.extend({id:"mainView",session:null,locationApi:null,location:null,platform:null,initialize:function(e){t.bindAll(this),this.session=e.session,this.header=e.header||(e.header=i.instance),this.locationApi=e.locationApi||n.Location,this.location=e.location||window.location,this.platform=e.platform||n.PlatformDetector,this.moduleCatalog=e.moduleCatalog||(e.moduleCatalog=n.App.moduleCatalog),this.offlineConnection=e.offlineConnection||n.App.session.getConnections().offline,e.moduleMenuDisabled=this.platform.device()==="desktop-app",this.appHeaderView=new s(e),this.header.on("change:selectedModule",this.updateSelectedModuleArea.bind(this)),this.session.on("end",t.bind(function(e){e=e||{};var r=e.url||"";e.reason&&t.every(n.Strings.translate("core.session"),function(t,n){return t===e.reason?(r+="?reason="+n,!1):!0}),t.defer(t.bind(function(){var t=e.reload!==!1;this.locationApi.navigate(r,{trigger:!t,allowExternal:!0}),t&&this.location.reload()},this))},this)),window.addEventListener("hashchange",this.onHashChanged),this.moduleCatalog.once("loaded",t.bind(this.onModuleCatalogLoaded))},render:function(){return!this.session.isActive()&&this.session.handlesLoginPrompt()?(this.$element.empty(),this):(this.appHeaderView.$element&&this.appHeaderView.$element.detach(),this.$element.html(o.render({isSessionActive:this.session.isActive()})),this.appHeaderView.render(),this.$(".app-header").replaceWith(this.appHeaderView.$element),this.offlineConnection.isLoggedIn()&&e("body").addClass("offline"),t.defer(t.bind(function(){this.updateSelectedModuleArea(this.header.selectedModule)},this)),this)},defaultBehavior:function(){this.platform.type()==="phone"&&this.appHeaderView.setWindowTitle();var e;n.PlatformDetector.device()==="desktop-app"?e=this.moduleCatalog.getModule("psw-framework-notifications:NotificationsModule")||this.moduleCatalog.getModule("shell:BlankModule"):e=t.find(this.moduleCatalog.getModules(),function(e){return!e.isSystemModule&&e.icon}),this.appHeaderView.setSelectedModule(e),this.showAssistiveAlert(n.Strings.translate("shell.mainView.successfulLoginAccessibleMessage"))},getUrlInfo:function(e){var n={fragment:"",module:null},r=e&&e.match(/#(.*)$/);if(r){n.fragment=r[1];var i=n.fragment.split("?")[0].split("/")[0];i&&(n.module=t.find(this.moduleCatalog.getModules(),function(e){return e.path&&e.path===i}))}return n},onHashChanged:function(){var e=this.location.href;if(this.oldUrl&&this.oldUrl===e)return;var t=this.getUrlInfo(this.oldUrl),n=this.getUrlInfo(e);n.module&&(n.module.currentFragment=n.fragment,this.appHeaderView.setSelectedModule(n.module)),t.module&&n.module!==t.module&&(t.module.currentFragment=t.fragment),this.oldUrl=e;if(!this.header.selectedModule)return},onModuleCatalogLoaded:function(e){t.each(e,function(e){e.on("change:title",this.appHeaderView.setWindowTitle,this.appHeaderView),e.on("onIconUpdated",this.updateIcons)},this),this.onHashChanged()},renderMessage:function(e,t){this.$element.html(u.render()),this.$("label, input, button").hide(),this.$("#errorMessage").show().find("p").html(e),t&&this.$("#errorMessage").removeClass("error").addClass("alert alert-success")},showAssistiveAlert:function(t){this.$("#screen-reader-alert").attr("aria-hidden","false").html(e("<p/>").text(t)),setTimeout(function(){this.$("#screen-reader-alert").attr("aria-hidden","true").empty()}.bind(this),1e4)},triggerModuleInDomEvent:function(e){if(this.isInDom()){e&&e.trigger("moduleVisibilityChanged",!1);var n=this.header.selectedModule;n&&n.$element&&t.defer(function(){n.$element.trigger("moduleVisibilityChanged",!0)}.bind(this))}},isInDom:function(){return document.documentElement.contains(this.$("#window")[0])},updateSelectedModuleArea:function(){var t=this.header.selectedModule;if(!t){e("body").addClass("no-modules");var i=new r.Alert({message:n.Strings.translate("shell.mainView.noModulesListed"),type:"warning",showCloseButton:!1});this.$("#window").html(i.getElement()),i.show()}this.$element.toggleClass("has-header",t&&t.showAppHeader!==!1&&!this.header.hidden);var s=this.$("#window");if(s.length&&t){var o=this.moduleCatalog.getModules().filter(function(e){return e.keepInDOM}).map(function(e){return e.$element[0]}),u=s.children();u.each(function(n,r){if(r===t.$element[0])return;var i=o.indexOf(r)>-1;i?e(r).hide():e(r).detach()});var a=t.$element&&t.$element.parent()[0];a===s[0]?t.$element.show():s.append(t.$element),this.triggerModuleInDomEvent(u)}},updateIcons:function(){e("body").removeClass("no-modules"),this.$element.find(".alert").hide()}})}),define("packages/shell/src/shellModule",["jquery","core","platform!./js/views/{hosted}/mainView","logger","controls"],function(e,t,n,r,i){(function(){var e=t.App.config.modules;if(!e)return;e.indexOf("web-platform:PlatformModule")===-1&&e.push("web-platform:PlatformModule")})();var s=t.Module.extend({isSystemModule:!0,path:"",loadPriority:-500,initialFragment:"",location:window.location,routes:{"":"home","logout/*path":"showLogoutConfirmation","?(:queryParams)":"home","*path":"defaultRoute"},initialize:function(i){s.instance=this,i=i||{},this.session=i.session||(i.session=t.App.session),this.moduleCatalog=i.moduleCatalog||t.App.moduleCatalog,this.logger=i.logger||r;var o=this.mainView=new n(i);this.moduleCatalog.once("loaded",function(){o.render(),this.session.isActive()||this.session.once("begin",function(){e(window).scrollLeft(0),o.render(),t.Location.navigate(this.initialFragment,{trigger:!0,allowExternal:!0,replace:!0})},this);var n=this.moduleCatalog.getModule("shell:SettingsModule");n&&n.on("close",this.onSettingsClosed.bind(this))},this),e(function(){e("body").addClass(t.PlatformDetector.type()).addClass(t.PlatformDetector.device()),e("#container").html(o.$element),o.triggerModuleInDomEvent(null)})},home:function(){if(this.session.isActive())this.mainView.defaultBehavior();else{if(this.session.handlesLoginPrompt())return;var e="login",n=this.location.href.split("?")[1];n&&(e+="?"+n),t.Location.navigate(e,{trigger:!0,allowExternal:!0})}},showLogoutConfirmation:function(){this.session.isActive()&&t.Location.navigate(this.initialFragment,{trigger:!0,allowExternal:!0,replace:!0}),arguments&&arguments[0]==="error"?this.mainView.renderMessage(t.Strings.translate("shell.mainView.logoutErrorMessage"),!1):this.mainView.renderMessage(t.Strings.translate("shell.mainView.logoutConfirmationMessage"),!0)},defaultRoute:function(){if(this.session.isActive())i.AlertDialog.show({message:t.Strings.translate("shell.mainView.missingResource")}),this.logger.log("Failed to find a resource at "+this.location.href,r.ERROR);else{if(this.session.handlesLoginPrompt())return;this.initialFragment=this.location.hash,t.Location.navigate("login",{trigger:!0,allowExternal:!0})}},onSettingsClosed:function(){this.mainView.appHeaderView.lastModule?this.mainView.appHeaderView.setSelectedModule(this.mainView.appHeaderView.lastModule,!0):this.home()}});return s}),define("packages/shell/src/login/models/loginModel",["underscore","core","logger"],function(e,t,n){return t.Model.extend({connection:null,initialize:function(){e.bindAll(this),this.session=this.attributes.session||t.App.session,this.connection=this.attributes.connection||this.session.getConnections().online,this.logger=this.attributes.logger||n,this.connection.on("loginFailure",e.bind(function(e){this.setErrorMessage(e)},this))},defaults:{username:null,password:null,errorMessage:null},setErrorMessage:function(e){this.logger.log("Login error: "+e,n.INFO),"INVALID_SESSION"!==e&&(this.attributes.errorMessage=e,this.trigger("change:errorMessage"))},validate:function(e){if(e.username==null||e.username.length===0||e.password==null||e.password.length===0)return e.username==null||e.username.length===0?this.setErrorMessage(t.Strings.translate("shell.loginView.enterUsername")):(e.password==null||e.password.length===0)&&this.setErrorMessage(t.Strings.translate("shell.loginView.enterPassword")),(!1).toString()},logIn:function(){this.connection.logIn(this.get("username"),this.get("password"))},getUsername:function(){return this.connection.getUsername()}})}),define("packages/shell/src/login/views/loginView",["underscore","jquery","core","controls","template!../../content/loginView","../models/loginModel","../../js/views/quickAccessView","../../js/views/userNavView","../../js/quickAccess"],function(e,t,n,r,i,s,o,u,a){return n.View.extend({id:"loginView",domEvents:{"click #btnLogin":"performLogin",click:"onClick","click #user-nav-help":"onHelp"},initialize:function(t){this.options=t||{},this.config=this.options.config||n.App.config,this.model=this.options.model||new s(this.options),this.model.on("change:errorMessage",this.errorMessageChanged,this),this.location=this.options.location||window.location,this.locationApi=this.options.locationApi||n.Location,this.cookies=this.options.cookies||n.Cookies,this.platformDetector=this.options.platformDetector||n.PlatformDetector,n.App.session.once("begin",e.bind(function(){this.setLastUsername(),this.remove()},this)),this.quickAccessView=new o({quickAccess:new a}),this.userNavView=new u({session:n.App.session,header:t.header,quickAccess:this.quickAccessView.quickAccess}),this.quickAccessView.quickAccess.addItem({buttonClass:"icon-help",label:n.Strings.translate("shell.mainView.help"),onClick:this.onHelp.bind(this)}),this.quickAccessView.quickAccess.addItem({buttonClass:"icon-gear",label:n.Strings.translate("shell.mainView.userMenu.settings"),onClick:this.onSettings.bind(this)})},render:function(t){if(!this.$element.is(":empty"))return this.$element;t=t||{};var s=this.platformDetector.type()==="phone";this.$element.html(i.render({lastLoggedInUserName:this.cookies.get("lastUsername"),isMobile:s,loginLogo:t.loginLogo||n.Strings.translate("brand.loginLogo"),loginLogoMobile:t.loginLogoMobile||n.Strings.translate("brand.loginLogoMobile")})),this.userNavView.render(),this.quickAccessView.render(),this.quickAccessView.$element.find("button").addClass("subtle-disabled"),this.quickAccessView.$element.addClass("button-panel"),this.$("#button-menu-panel").replaceWith(this.quickAccessView.$element),e.defer(function(){if(this.location.protocol!=="https:"&&!this.config.disableSslWarning){var e=new r.Alert({message:n.Strings.translate("shell.loginView.sslWarning"),type:"warning",showCloseButton:!1,showDialogOnMobile:!0});this.$("#sslWarning").html(e.getElement()),e.show()}else/phone|tablet/.test(this.platformDetector.type())||this.$("#txtLogin").focus();this.model.get("errorMessage")&&this.errorMessageChanged()}.bind(this));var o;if(this.options&&this.options.reason)this.model.setErrorMessage(this.options.reason);else if(o=this.locationApi.getRouteQueryParams().reason){this.model.setErrorMessage(n.Strings.translate("core.session."+o));var u=this.location.hash.replace("reason="+o,"").replace("#","");u==="login?"&&(u="login"),this.locationApi.navigate(u,{allowExternal:!0})}return this},onClick:function(e){e.shiftKey&&e.ctrlKey&&e.altKey&&(e.preventDefault(),n.LogSystem.launchViewer())},closeProgressIndicator:function(){this.loginProgressIndicator&&this.loginProgressIndicator.close()},errorMessageChanged:function(e){this.resetWaitingState(),this.$("#errorMessage").show().find("p").html(e||this.model.get("errorMessage"))},onHelp:function(){window.open(n.App.config.helpUrl+n.App.config.helpPage)},onSettings:function(){n.Location.navigate("settings",{trigger:!0,allowExternal:!0})},performLogin:function(){var e=this.$("#txtLogin").val(),t=this.$("#txtPassword").val();if(!this.model.set({username:e,password:t},{validate:!0}))return;this.setupWaitingState(),this.model.logIn()},setupWaitingState:function(){this.closeProgressIndicator(),this.loginProgressIndicator=r.ProgressIndicator.show({parent:this.$("#btnLogin")}),this.$(".button-panel button").prop("disabled",!0)},resetWaitingState:function(){this.closeProgressIndicator(),this.$(".button-panel button").prop("disabled",!1)},setLastUsername:function(){var e=n.App.session.getUsername();e?this.cookies.add("lastUsername",n.App.session.getUsername()):this.cookies.remove("lastUsername")}})}),define("packages/shell/src/login/loginModule",["core","underscore","./views/loginView"],function(e,t,n){return e.Module.extend({isSystemModule:!0,showAppHeader:!1,path:"login",initialize:function(n){n=n||{},this.session=n.session||e.App.session,!this.session.isActive()&&e.PlatformDetector.type()!=="hosted"&&(this.icon={text:e.Strings.translate("shell.loginView.titlebarText")},this.session.on("begin",t.bind(function(){this.icon=null,this.updateIcon()},this)))},routes:{"":"home","?(:queryParams)":"home"},home:function(){this.session.isActive()?e.Location.navigate("",{trigger:!0,allowExternal:!0}):(this.setWindowTitle(e.Strings.translate("shell.loginView.titlebarText")),this.loginView||(this.loginView=new n({session:this.session}),this.$element.on("moduleVisibilityChanged",function(e,t){t&&this.$element.html(this.loginView.render().$element)}.bind(this))))}})}),define("packages_shell_src_content_loggingLevelSettingsView_html",[],function(){return function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\r\n<div class="radio checkmark-radio">\r\n    <input type="radio" name="logging-levels" id="logging-level-',(s=n.value)?i=s.call(e,{hash:{},data:t}):(s=e&&e.value,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" value="',(s=n.value)?i=s.call(e,{hash:{},data:t}):(s=e&&e.value,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"/>\r\n    <span class="icon icon-checkmark icon-16"></span>\r\n    <label for="logging-level-',(s=n.value)?i=s.call(e,{hash:{},data:t}):(s=e&&e.value,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">',(s=n.text)?i=s.call(e,{hash:{},data:t}):(s=e&&e.text,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</label>\r\n</div>\r\n",r}function d(e,t){var r="",i,s;return r+='\r\n    <a data-showLogWindow href="#">'+l((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"shell.mainView.settings.logging.showLogWindow",s):c.call(e,"i18n","shell.mainView.settings.logging.showLogWindow",s)))+"</a>\r\n    ",r}function v(e,t){var r="",i;r+="\r\n\r\n    ",i=n["if"].call(e,e&&e.logHref,{hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;return r+="\r\n\r\n    ",r}function m(e,t){var r="",i,s,o;return r+='\r\n    <a href="',(s=n.logHref)?i=s.call(e,{hash:{},data:t}):(s=e&&e.logHref,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" target="blank">'+l((s=n.i18n||e&&e.i18n,o={hash:{},data:t},s?s.call(e,"shell.mainView.settings.logging.showLogWindow",o):c.call(e,"i18n","shell.mainView.settings.logging.showLogWindow",o)))+"</a>\r\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<h3 class="settings-group-header">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.logging.loggingLevels.header",a):c.call(t,"i18n","shell.mainView.settings.logging.loggingLevels.header",a)))+"</h3>\r\n\r\n",o=n.each.call(t,t&&t.options,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\r\n<p>\r\n    ",o=n["if"].call(t,t&&t.logToWindow,{hash:{},inverse:h.program(5,v,i),fn:h.program(3,d,i),data:i});if(o||o===0)s+=o;return s+="\r\n\r\n</p>\r\n",s}}),define("packages/shell/src/settings/views/loggingLevelSettingsView",["core","template!../../content/loggingLevelSettingsView"],function(e,t){return e.View.extend({className:"settings-group",title:e.Strings.translate("shell.mainView.settings.logging.header"),route:"logging",initialize:function(t){this.options=t||{},this.LogSystem=this.options.LogSystem||e.LogSystem},domEvents:{'change input[name="logging-levels"]':"onSelectLoggingLevel","click [data-showLogWindow]":"showLogWindow"},render:function(){if(!this.element.children.length){var n=this.options.config||e.App.config,r=n.loggingMethod.toLowerCase(),i=e.Strings.translate("shell.mainView.settings.logging.loggingLevels");this.$element.html(t.render({header:i.header,options:[{text:i.allMessages,value:1},{text:i.warningsAndErrors,value:3},{text:i.errorsOnly,value:4}],logToWindow:r==="externalwindow",logHref:r==="indexeddb"?"logViewer.html":null})),this.$("input[value="+this.LogSystem.getLoggingLevel()+"]").attr("checked","checked")}return this},showLogWindow:function(){return this.LogSystem.launchViewer(),!1},onSelectLoggingLevel:function(){this.LogSystem.setLoggingLevel(this.$('input[name="logging-levels"]:checked').val())}})}),define("packages_shell_src_content_phone_languageSettingsView_html",[],function(){return function(e,t,n,r,i){function p(e,t,r){var i="",s,o,u;return i+='\r\n<div class="radio checkmark-radio">\r\n    <input type="radio" name="languages" id="language-',(o=n.locale)?s=o.call(e,{hash:{},data:t}):(o=e&&e.locale,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=l(s)+'" value="',(o=n.locale)?s=o.call(e,{hash:{},data:t}):(o=e&&e.locale,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=l(s)+'" '+l((o=n.call||r&&r.call,u={hash:{},data:t},o?o.call(e,r&&r.checked,e,u):c.call(e,"call",r&&r.checked,e,u)))+'/>\r\n    <span class="icon icon-checkmark icon-16"></span>\r\n    <label for="language-',(o=n.locale)?s=o.call(e,{hash:{},data:t}):(o=e&&e.locale,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=l(s)+'">',(o=n.displayName)?s=o.call(e,{hash:{},data:t}):(o=e&&e.displayName,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=l(s)+"</label>\r\n</div>\r\n",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<h3 class="settings-group-header">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.language.header",a):c.call(t,"i18n","shell.mainView.settings.language.header",a)))+'</h3>\r\n\r\n<div class="radio checkmark-radio">\r\n    <input type="radio" name="languages" id="language-use-default" value="" '+l((u=n.call||t&&t.call,a={hash:{},data:i},u?u.call(t,t&&t.checked,t,a):c.call(t,"call",t&&t.checked,t,a)))+'/>\r\n    <span class="icon icon-checkmark icon-16"></span>\r\n    <label for="language-use-default">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.language.browserDefault",a):c.call(t,"i18n","shell.mainView.settings.language.browserDefault",a)))+"</label>\r\n</div>\r\n",o=n.each.call(t,t&&t.locales,{hash:{},inverse:h.noop,fn:h.programWithDepth(1,p,i,t),data:i});if(o||o===0)s+=o;return s+="\r\n\r\n",s}}),define("packages_shell_src_content_languageSettingsView_html",[],function(){return function(e,t,n,r,i){function p(e,t,r){var i="",s,o,u;return i+="\r\n    <option "+l((o=n.call||r&&r.call,u={hash:{},data:t},o?o.call(e,r&&r.selected,e,u):f.call(e,"call",r&&r.selected,e,u)))+' value="',(o=n.locale)?s=o.call(e,{hash:{},data:t}):(o=e&&e.locale,s=typeof o===c?o.call(e,{hash:{},data:t}):o),i+=l(s)+'">',(o=n.displayName)?s=o.call(e,{hash:{},data:t}):(o=e&&e.displayName,s=typeof o===c?o.call(e,{hash:{},data:t}):o),i+=l(s)+"</option>\r\n",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<h3 class="settings-group-header">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.language.header",a):f.call(t,"i18n","shell.mainView.settings.language.header",a)))+"</h3>\r\n\r\n<select data-language-select>\r\n    <option "+l((u=n.call||t&&t.call,a={hash:{},data:i},u?u.call(t,t&&t.selected,t,a):f.call(t,"call",t&&t.selected,t,a)))+' value="">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.language.browserDefault",a):f.call(t,"i18n","shell.mainView.settings.language.browserDefault",a)))+"</option>\r\n",o=n.each.call(t,t&&t.locales,{hash:{},inverse:h.noop,fn:h.programWithDepth(1,p,i,t),data:i});if(o||o===0)s+=o;return s+="\r\n</select>\r\n",s}}),define("packages/shell/src/settings/views/languageSettingsView",["core","logger","platform!template!../../content/{phone}/languageSettingsView"],function(e,t,n){return e.View.extend({className:"settings-group",title:e.Strings.translate("shell.mainView.settings.language.header"),route:"language",initialize:function(n){this.options=n||{},this.locale=n.locale||e.Locale,this.logger=n.logger||t},domEvents:{"change select[data-language-select]":"onSelectLanguage",'change input[name="languages"]':"onSelectLanguage"},render:function(){if(!this.element.children.length){var e=this.locale.isDeterminedByBrowser()?null:this.locale.get();this.$element.html(n.render({locales:this.locale.getAvailableLocales(),selected:function(t){return t.locale==e?"selected":""},checked:function(t){return t.locale==e?"checked":""}}))}return this},onSelectLanguage:function(e){var n=e.target.value;n?(this.logger.log("Locale changed: "+n,t.INFO),this.locale.set(n)):(this.logger.log("Locale changed to browser default",t.INFO),this.locale.set(null))}})}),define("packages/shell/src/settings/views/globalSettingsView",["core","./loggingLevelSettingsView","./languageSettingsView"],function(e,t,n){return e.View.extend({className:"global-settings",title:e.Strings.translate("shell.mainView.settings.globalPageTitle"),route:"global",initialize:function(){this.pages=[new t,new n]},render:function(){if(this.element.children.length)return this;this.$element.empty();for(var e=0;e<this.pages.length;e++)this.$element.append(this.pages[e].render().$element);return this}})}),define("packages_shell_src_content_aboutDetailsView_html",[],function(){return function(e,t,n,r,i){function p(e,t){var r="",i,s,o;return r+='\r\n    <div class="row">\r\n        <label class="label">'+l((s=n.i18n||e&&e.i18n,o={hash:{},data:t},s?s.call(e,"shell.mainView.settings.about.label.browser",o):f.call(e,"i18n","shell.mainView.settings.about.label.browser",o)))+'</label>\r\n        <label class="value">',(s=n.browser)?i=s.call(e,{hash:{},data:t}):(s=e&&e.browser,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+" ",(s=n.version)?i=s.call(e,{hash:{},data:t}):(s=e&&e.version,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</label>\r\n    </div>\r\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="tech-specs">\r\n    <div class="row">\r\n        <label class="label">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.about.label.productName",a):f.call(t,"i18n","shell.mainView.settings.about.label.productName",a)))+'</label>\r\n        <label class="value">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"brand.productName",a):f.call(t,"i18n","brand.productName",a)))+"</label>\r\n    </div>\r\n    ",o=n["if"].call(t,t&&t.showBrowserInfo,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\r\n    <div class="row">\r\n        <label class="label">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.about.label.screenSize",a):f.call(t,"i18n","shell.mainView.settings.about.label.screenSize",a)))+'</label>\r\n        <label class="value">',(u=n.screenSize)?o=u.call(t,{hash:{},data:i}):(u=t&&t.screenSize,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="label">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.about.label.operatingSystem",a):f.call(t,"i18n","shell.mainView.settings.about.label.operatingSystem",a)))+'</label>\r\n        <label class="value">',(u=n.os)?o=u.call(t,{hash:{},data:i}):(u=t&&t.os,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</label>\r\n    </div>\r\n</div>\r\n<a class="legal-information" href="javascript:void(0)">'+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.about.label.legalInformation",a):f.call(t,"i18n","shell.mainView.settings.about.label.legalInformation",a)))+"</a>\r\n<h3>"+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.about.packagesAndDependencies",a):f.call(t,"i18n","shell.mainView.settings.about.packagesAndDependencies",a)))+"</h3>\r\n",s}}),define("packages/shell/src/settings/aboutInfoDetails",[],function(){function o(e){e=e||{},this.userAgent=e.userAgent||navigator.userAgent,this.platform=e.platform||navigator.platform}var e=function(e,t){for(var n=0;n<e.length;++n)if(t.indexOf(e[n].subStringToSearchFor)!==-1)return e[n].identity},t,n,r=function(e,r){for(var i=0;i<e.length;++i)if((t=r.indexOf(e[i].subStringToSearchFor))!==-1)return n=r.substring(t+e[i].subStringToSearchFor.length+1),e[i].versionSearch&&(t=r.indexOf(e[i].versionSearch))!==-1&&(n=r.substring(t+e[i].versionSearch.length+1)),n},i=[{subStringToSearchFor:"Opera",versionSearch:"Version",identity:"Opera"},{subStringToSearchFor:"MSIE",identity:"Microsoft Internet Explorer"},{subStringToSearchFor:"Chrome",identity:"Google Chrome"},{subStringToSearchFor:"Safari",versionSearch:"Version",identity:"Safari"},{subStringToSearchFor:"Firefox",identity:"Mozilla Firefox"},{subStringToSearchFor:"Netscape",identity:"Netscape"},{subStringToSearchFor:"AppleWebKit",identity:"WebKit"}],s=[{subStringToSearchFor:"Win",identity:"Windows"},{subStringToSearchFor:"Mac",identity:"MacOS"},{subStringToSearchFor:"X11",identity:"Unix"},{subStringToSearchFor:"Linux",identity:"Linux"},{subStringToSearchFor:"iPhone",identity:"iOS"},{subStringToSearchFor:"iPad",identity:"iOS"}];return o.prototype.getDetails=function(){var t=e(i,this.userAgent)||"An unknown browser",n=r(i,this.userAgent)||"an unknown version",o;(o=n.indexOf(";"))!==-1&&(n=n.substring(0,o)),(o=n.indexOf(" "))!==-1&&(n=n.substring(0,o));var u=e(s,this.platform)||"An unknown OS";u==="Windows"&&(this.userAgent.indexOf("WOW64")!==-1||this.userAgent.indexOf("Win64")!==-1?u+=" 64 bit":u+=" 32 bit");var a={browser:t,version:n,screenSize:screen.width+" x "+screen.height,showBrowserInfo:t!=="WebKit",os:u,getBrowser:function(){return a.browser}};return a},o}),define("packages_shell_src_content_phone_aboutPackageCollapsed_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+="<h3>",(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</h3>\n",s}}),define("packages_shell_src_content_phone_aboutPackageExpanded_html",[],function(){return function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+="\n    <li>",(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</li>\n    ",r}function p(e,t){var r="",i,s,o;return r+='\n<a href="',(s=n.legalInfoUrl)?i=s.call(e,{hash:{},data:t}):(s=e&&e.legalInfoUrl,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'" target="_blank">'+f((s=n.i18n||e&&e.i18n,o={hash:{},data:t},s?s.call(e,"shell.mainView.settings.about.label.legalInformation",o):l.call(e,"i18n","shell.mainView.settings.about.label.legalInformation",o)))+"</a>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+="<h3>",(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</h3>\n<ul>\n    ",o=n.each.call(t,t&&t.dependencies,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;s+="\n</ul>\n",o=n["if"].call(t,t&&t.legalInfoUrl,{hash:{},inverse:c.noop,fn:c.program(3,p,i),data:i});if(o||o===0)s+=o;return s}}),define("packages/shell/src/settings/views/phone/aboutPackagesView",["underscore","core","controls","template!../../../content/phone/aboutPackageCollapsed","template!../../../content/phone/aboutPackageExpanded"],function(e,t,n,r,i){return t.View.extend({className:"about-packages",initialize:function(e){this.packageCatalog=e&&e.packageCatalog||t.App.packageCatalog},getPackages:function(){var t=new n.SortHandler({property:"name"}),r=this.packageCatalog.getPackages(),i=e.map(r,function(n){var r;n.manifest.config&&n.manifest.config.legalInfoUrl&&(r="packages/"+n.manifest.name+"/"+n.manifest.config.legalInfoUrl);var i={name:n.manifest.name+" ("+n.manifest.version+")",legalInfoUrl:r};return n.manifest.dependencies?(i.dependencies=e.map(n.manifest.dependencies,function(e,t){return{name:t+" "+e}}),t.apply(i.dependencies)):i.showExpanderButton=!1,i});return t.apply(i),i},render:function(){return this.accordionPanel||(this.accordionPanel=new n.AccordionPanel(this.element,null,{virtualization:"none",createCollapsedElement:this.renderCollapsedItem,createExpandedElement:this.renderExpandedItem}),this.accordionPanel.getCollectionView().getSortHandler().addDescription({property:"name"})),this.accordionPanel.getCollectionView().setItems(this.getPackages()),this},renderCollapsedItem:function(e){return r.render(e.sourceItem)},renderExpandedItem:function(e){return i.render(e.sourceItem)}})}),define("packages/shell/src/settings/views/aboutPackagesView",["jquery","underscore","core","controls"],function(e,t,n,r){return n.View.extend({className:"packages-tree no-container no-highlights",initialize:function(e){this.packageCatalog=e&&e.packageCatalog||n.App.packageCatalog},createLegalInformationLink:function(t){if(t.sourceItem.legalInfoUrl)return e("<a/>",{href:t.sourceItem.legalInfoUrl,target:"_blank",text:n.Strings.translate("shell.mainView.settings.about.label.legalInformation")})},getPackages:function(){var e=this.packageCatalog.getPackages();return t.map(e,function(e){var n;e.manifest.dependencies&&(n=t.map(e.manifest.dependencies,function(e,t){return{name:t+" "+e}}));var r;return e.manifest.config&&e.manifest.config.legalInfoUrl&&(r="packages/"+e.manifest.name+"/"+e.manifest.config.legalInfoUrl),{name:e.manifest.name+" ("+e.manifest.version+")",children:n,legalInfoUrl:r}})},render:function(){return this.tree||(this.tree=new r.Tree(this.element,null,{createItemIndicator:this.createLegalInformationLink.bind(this),virtualization:"none"}),this.tree.getCollectionView().getSortHandler().addDescription({property:"name"})),this.tree.getCollectionView().setItems(this.getPackages()),this}})}),define("packages/shell/src/settings/views/aboutView",["core","controls","template!../../content/aboutDetailsView","../aboutInfoDetails","platform!./{phone}/aboutPackagesView"],function(e,t,n,r,i){return e.View.extend({className:"about",route:"about",title:e.Strings.translate("shell.mainView.settings.aboutPageTitle"),initialize:function(t){this.platformDetector=t&&t.platformDetector||e.PlatformDetector},render:function(){return this.$element.on("click",".legal-information",this.onLegalClicked.bind(this)),this.header=e.Strings.translate("shell.mainView.settings.about.header",{productName:e.Strings.translate("brand.productName")}),this.$element.empty().append(n.render((new r).getDetails())).append((new i).render().$element),this},onLegalClicked:function(){this.platformDetector.type()==="phone"?t.ModalDialog.show({title:e.Strings.translate("shell.mainView.settings.about.label.legalInformation"),content:'<iframe src="legal.txt" width="100%" height="95%" />',showFullScreen:!0}):window.open("legal.txt")}})}),define("packages_shell_src_content_phone_settingsView_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="settings-nav"></div>\n<div class="page-content"></div>'}}),define("packages/shell/src/settings/views/phone/settingsView",["core","controls","underscore","../globalSettingsView","../aboutView","template!../../../content/phone/settingsView"],function(e,t,n,r,i,s){return e.View.extend({className:"settings",initialize:function(t){t=t||{},this.location=t.location||e.Location;var n=[new i,new r];Array.isArray(t.pages)&&n.push.apply(n,t.pages),this.pages=this.buildTree(n)},buildTree:function(e,t){if(e&&e.length){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=i.route;s&&t&&(s=t+"/"+s),n.push({name:i.title,children:this.buildTree(i.pages,s),path:s,parentPath:t||"settings",view:i})}return n}},onPageOpened:function(e,t){Array.isArray(t)&&(t=t[0]),t&&this.setSelectedPage(t.sourceItem)},render:function(n){this.element.children.length||(this.$element.html(s.render()),this.tree=new t.Tree(this.$(".settings-nav"),this.pages,{navigationIcons:"always",showBackButton:!1}),this.tree.getCollectionView().getRoot().title=e.Strings.translate("shell.mainView.userMenu.settings"),this.tree.on({"expand:item":this.onPageOpened,"open:item":this.onPageOpened},this));var r,i=this.tree.getCollectionView();return n&&(r=i.findByProperty("path",n)),this.setSelectedPage(r&&r.sourceItem),this.tree.expand(r||i.getRoot()),this},setSelectedPage:function(e){var t;e&&(e.children?e.children.length===1&&(t=e.children[0]):t=e);var n=this.$(".page-content");n.children().detach(),this.$element.toggleClass("show-page-content",t!=null),t&&n.append(t.view.render().$element),e!==this.selectedPage&&(this.selectedPage=e,this.trigger("change:page",this.selectedPage))}})}),define("packages_shell_src_content_settingsView_html",[],function(){return function(e,t,n,r,i){function p(e,t){var r="",i,s;r+='\r\n        <li class="list-item" ',i=n["if"].call(e,e&&e.isSelected,{hash:{},inverse:f.noop,fn:f.program(2,d,t),data:t});if(i||i===0)r+=i;return r+='>\r\n            <a href="#settings/',(s=n.route)?i=s.call(e,{hash:{},data:t}):(s=e&&e.route,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=c(i)+'">',(s=n.title)?i=s.call(e,{hash:{},data:t}):(s=e&&e.title,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=c(i)+"</a>\r\n        </li>\r\n    ",r}function d(e,t){return'aria-selected="true"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l="function",c=this.escapeExpression,h=n.helperMissing;s+='<nav class="settings-left-nav">\r\n    <h2 class="settings-left-nav-title">Settings</h2>\r\n    <ul class="list settings-nav-list">\r\n    ',o=n.each.call(t,t&&t.pages,{hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\r\n    </ul>\r\n</nav>\r\n<div class="settings-content">\r\n    <h2 class="settings-header"></h2>\r\n    <button class="settings-close-btn containerless icon icon-16 icon-close" type="button" title="'+c((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"shell.mainView.settings.closeSettingsLabel",a):h.call(t,"i18n","shell.mainView.settings.closeSettingsLabel",a)))+'"></button>\r\n</div>\r\n',s}}),define("packages/shell/src/settings/views/settingsView",["core","controls","underscore","template!../../content/settingsView","./globalSettingsView","./aboutView"],function(e,t,n,r,i,s){return e.View.extend({className:"settings",domEvents:{"click .settings-close-btn":"onCloseClicked"},initialize:function(t){t=t||{},this.location=t.location||e.Location,this.pages=[new s,new i],Array.isArray(t.pages)&&this.pages.push.apply(this.pages,t.pages)},render:function(e){this.selectedPage&&this.selectedPage.$element.detach(),this.selectedPage=null,n.each(this.pages,function(e){e.isSelected=!1});if(e)for(var t=0;t<this.pages.length;t++){var i=this.pages[t];if(i.route&&i.route===e){this.selectedPage=i;break}}return this.selectedPage||(this.selectedPage=this.pages[0]),this.selectedPage.isSelected=!0,this.$element.html(r.render({pages:this.pages})),this.selectedPage.render(),this.$(".settings-header").text(this.selectedPage.header||this.selectedPage.title),this.$(".settings-content").append(this.selectedPage.$element),this},onCloseClicked:function(){this.trigger("close")}})}),define("packages/shell/src/settings/settingsModule",["core","platform!./views/{phone}/settingsView"],function(e,t){return e.Module.extend({isSystemModule:!0,path:"settings",icon:{text:e.Strings.translate("shell.mainView.settings.titlebarText")},routes:{"":"gotoPath","*path":"gotoPath"},initialize:function(n){n=n||{},this.location=n.location||e.Location,this.history=n.history||window.history,this.platformDetector=n.platformDetector||e.PlatformDetector,this.view=new t,this.view.on({close:function(){this.trigger("close")},"change:page":function(e){var t=this.path;e&&e.path&&(t+="/"+e.path),this.windowTitle=e&&e.view&&e.view.title,this.setWindowTitle(this.windowTitle),this.location.navigate(t,{trigger:!1})}},this),Object.defineProperty(this,"showAppHeader",{get:this.showAppHeader})},showAppHeader:function(){return this.session.isActive()||this.platformDetector.type()==="phone"},gotoPath:function(t){this.view.render(t),this.element.children.length||this.$element.html(this.view.$element),this.view.selectedPage&&this.view.selectedPage.view?this.windowTitle=this.view.selectedPage.view.title:this.windowTitle=e.Strings.translate("shell.mainView.userMenu.settings"),this.setWindowTitle(this.windowTitle)},upButtonAction:function(){!this.view.selectedPage||!this.view.selectedPage.parentPath?this.trigger("close"):this.gotoPath(this.view.selectedPage.parentPath)}})}),define("packages/shell/src/blank/blankModule",["core"],function(e){return e.Module.extend({isSystemModule:!0,path:"blank",routes:{"":"home"},windowTitle:" ",home:function(){this.$element.html("")}})}),define("packages/shell/src/js/services",["core"],function(e){function t(t){t=t||{},this.printer=t.printer||new e.Printer}return t.prototype.printElement=function(e){this.printer.print(e)},t}),define("packages/shell/src/exports",["core","./shellModule","./login/loginModule","./settings/settingsModule","./blank/blankModule","./js/services","./js/header","./js/quickAccess","./js/moduleMenu"],function(e,t,n,r,i,s,o,u,a){var f=e.TypeWrapper.wrap,l=o.instance=new o,c=u.instance=new u,h=a.instance=new a;return{ShellModule:t,LoginModule:n,SettingsModule:r,BlankModule:i,Header:f(l,{typeMembers:["hidden"]}),QuickAccess:f(c,{typeMembers:["addItem"]}),ModuleMenu:f(h,{typeMethods:["disable"]}),Services:f(new s,{typeMethods:["printElement"]})}}),define("packages/shell/src/js/viewActions",[],function(){})