// Â© 2014 Lexmark International, Inc. and Perceptive Software, LLC.  All rights reserved.
define("packages/controls/src/js/core/utility",[],function(){function e(e,t,n,r){e.on(n,function(e,n){t.trigger(r,e,n)})}function t(e){Array.isArray(e)||(e=[e]);var t=[];for(var n=0;n<e.length;n++){var r=e[n];typeof r=="string"?t.push({to:r,from:r}):t.push(r)}return t}return{clamp:function(e,t,n){return n<=e?e:n>=t?t:n},findByProperty:function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i[t]===n)return i}},mergeProperties:function(){var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e},noop:function(){},proxy:function(n,r,i,s){var o,u;if(i){var a=t(i);for(o=0;o<a.length;o++){u=a[o];var f=n[u.from];f&&typeof f=="function"?r[u.to]=f.bind(n):r[u.to]=this.noop}}if(s){var l=t(s);for(o=0;o<l.length;o++)u=l[o],e(n,r,u.from,u.to)}},removeFromArray:function(e,t){var n=e.indexOf(t);if(n>=0)return e.splice(n,1),!0},removeFromArrayByProperty:function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i[t]===n)return e.splice(r,1),i}},resolveArrayItems:function(e,t){if(t!=null){if(Array.isArray(t)){var n=[];for(var r=0;r<t.length;r++){var i=t[r],s=typeof i=="number"?e[i]:i;s!=null&&n.push(s)}return n}return typeof t=="number"?e[t]:t}},resolveFunction:function(e){return e&&typeof e=="function"?e.apply(e,Array.prototype.slice.call(arguments,1)):e},resolveParameters:function(){if(arguments.length>1)return Array.prototype.slice.call(arguments);var e=arguments[0];if(e!=null)return Array.isArray(e)?e:[e]}}}),define("packages/controls/src/js/animation/animationFrame",["core","../core/utility"],function(e,t){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame,window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame);if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=Date.now(),r=25-(t-n);r<0&&(r=0);var i=window.setTimeout(function(){e(t+r)},r);return n=t+r,i}}return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),e.Events.enableFor({isRunning:!1,lastUpdateTime:0,throttledCallbacks:{},onUpdate:function(e){try{if(this.lastUpdateTime){var t=e-this.lastUpdateTime;this.trigger("update",t);var n=this.throttledCallbacks.next;while(n)n.isRequestingExecution?n.canExecute&&!n.canExecute.apply(n.context,n.parameters)?(n.time+=t,n.time>n.timeout&&(n.isRequestingExecution=!1)):(n.isRequestingExecution=!1,n.method.apply(n.context,n.parameters)):(n.previous.next=n.next,n.next&&(n.next.previous=n.previous)),n=n.next}}finally{this.isRunning&&(this.lastUpdateTime=e,this.frameId=window.requestAnimationFrame(this.onUpdate.bind(this)))}},start:function(){this.isRunning||(this.isRunning=!0,this.frameId=window.requestAnimationFrame(this.onUpdate.bind(this)))},stop:function(){this.isRunning&&(this.isRunning=!1,this.lastUpdateTime=0,this.throttledCallbacks={},window.cancelAnimationFrame(this.frameId))},throttleByFrame:function(e){var n=this.throttledCallbacks,r=this.throttledCallbacks.next;while(r){if(r.method===e.method&&r.context===e.context){r.time=0,r.isRequestingExecution=!0,r.parameters=e.parameters;return}n=r,r=r.next}r=t.mergeProperties({time:0,timeout:5e3,isRequestingExecution:!0},e),n.next=r,n.next.previous=n}})}),define("packages/controls/src/js/animation/colorTransitions",["../core/utility"],function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=1,t.height=1,{parseColor:function(e){n.fillStyle=e,n.fillRect(0,0,1,1);var t=n.getImageData(0,0,1,1).data,r=t[3]/255;return n.clearRect(0,0,1,1),[t[0]*r,t[1]*r,t[2]*r,r]},transformColor:function(t,n,r){var i=[];for(var s=0;s<4;s++)i[s]=t[s]+r*(n[s]-t[s]);if(i[3])for(s=0;s<3;s++)i[s]=Math.round(e.clamp(0,255,i[s]/i[3]));return i[3]=e.clamp(0,1,i[3]).toFixed(3).replace(".000",""),"rgba("+i.join(",")+")"}}}),define("packages/controls/src/js/animation/easingFunctions",[],function(){function e(e,t,n){var r=1-n;return 3*e*r*r*n+3*t*r*n*n+n*n*n}function t(t,n,r,i){return function(s){var o=0,u=1;for(;;){var a=(o+u)/2,f=e(t,r,a);if(Math.abs(s-f)<.001)return e(n,i,a);f<s?o=a:u=a}}}return{ease:t(.25,.1,.25,1),"ease-in":t(.42,0,1,1),"ease-out":t(0,0,.58,1),"ease-in-out":t(.42,0,.58,1)}}),define("packages/controls/src/js/animation/animationPlayer",["core","./colorTransitions","./easingFunctions"],function(e,t,n){function i(e){return t.transformColor(this.from,this.to,e)}function s(e){return this.from+e*this.range}function o(e){return this.from+e*this.range+this.unitType}function u(e){this.state="idle",this.options=e,this.direction=this.options.direction,this.properties=this.options.properties,this.easingMethod=n[this.options.easing],this.source=e.source.nodeType===1?e.source.style:e.source;for(var r=0;r<this.properties.length;r++){var u=this.properties[r];u.unitType==="color"?(u.to=t.parseColor(u.to),u.from=t.parseColor(u.from),u.interpolate=i.bind(u)):(u.range=u.to-u.from,u.interpolate=(u.unitType?o:s).bind(u)),u.target=this.source;var a=u.name.split(".");if(a.length>1){u.name=a.pop();for(var f=0;f<a.length;f++)u.target=u.target[a[f]]}}this.play()}var r={normal:"reverse",reverse:"normal",alternate:"alternate-reverse","alternate-reverse":"alternate"};return u.prototype.cancel=function(){this.state!=="idle"&&(this.state="idle",this.updateProperties(1,0),this.trigger("finish",{},this))},u.prototype.finish=function(){this.state!=="finished"&&(this.state="finished",this.updateProperties(this.options.iterations,1),this.trigger("finish",{},this))},u.prototype.isReversed=function(e){return this.direction==="alternate"?e%2===0:this.direction==="alternate-reverse"?e%2===1:this.direction==="reverse"},u.prototype.pause=function(){this.state="paused"},u.prototype.play=function(){if(this.state==="finished"||this.state==="idle")this.previousPosition=null,this.playTime=0;this.state="running"},u.prototype.reverse=function(){this.play(),this.options.iterationStart=Math.floor((this.playTime-this.options.delay)/this.options.duration),this.playTime=this.options.iterations*this.options.duration-this.playTime,this.direction=r[this.direction]},u.prototype.update=function(e){if(this.state==="running"){this.playTime+=e;if(this.playTime<=this.options.delay)return;var t=this.playTime-this.options.delay,n=Math.ceil(t/this.options.duration);if(n>this.options.iterations)this.finish();else{var r=t%this.options.duration/this.options.duration;this.easingMethod&&(r=this.easingMethod(r)),this.updateProperties(this.options.iterationStart+n,r)}}},u.prototype.updateProperties=function(e,t){this.isReversed(e)&&(t=1-t);if(t!==this.previousPosition){for(var n=0;n<this.properties.length;n++){var r=this.properties[n];r.target[r.name]=r.interpolate(t)}this.previousPosition=t,this.trigger("update",{},t)}},e.Events.enableFor(u.prototype),u}),define("packages/controls/src/js/animation/nativeAnimationPlayer",["core"],function(e){function t(e,t){return e&&e!=="color"?t+e:t}function n(e){this.options=e;var n=[{},{}];for(var r=0;r<this.options.properties.length;r++){var i=this.options.properties[r];n[0][i.name]=t(i.unitType,i.from),n[1][i.name]=t(i.unitType,i.to)}this.nativePlayer=this.options.source.animate(n,this.options),this.nativePlayer.addEventListener("finish",function(){this.trigger("finish",{},this)}.bind(this),!1)}return n.prototype.cancel=function(){this.nativePlayer.cancel&&this.nativePlayer.cancel()},n.prototype.finish=function(){this.nativePlayer.finish&&this.nativePlayer.finish()},n.prototype.pause=function(){this.nativePlayer.pause&&this.nativePlayer.pause()},n.prototype.play=function(){this.nativePlayer.play&&this.nativePlayer.play()},n.prototype.reverse=function(){this.nativePlayer.reverse&&this.nativePlayer.reverse()},n.isSupported=function(e){return e.source&&e.source.nodeType===1&&e.source.animate},e.Events.enableFor(n.prototype),n}),define("packages/controls/src/js/animation/animator",["jquery","./animationFrame","./animationPlayer","./nativeAnimationPlayer","../core/utility"],function(e,t,n,r,i){return{animations:[],defaultDuration:200,isAnimationEnabled:!0,useNativeAnimations:!1,animate:function(s){if(!s||!s.source)return;var o=e.extend({delay:0,direction:"normal",duration:this.defaultDuration,easing:"ease",iterations:1,iterationStart:0},s);Array.isArray(o.properties)||(o.properties=[o.properties]);var u;return this.useNativeAnimations&&r.isSupported(o)?u=new r(o):u=new n(o),this.isAnimationEnabled&&!this.animations.length&&t.on("update",this.onAnimationUpdate,this),this.animations.push(u),u.on("finish",function(){i.removeFromArray(this.animations,u),o.onFinished&&o.onFinished()},this),this.isAnimationEnabled||setTimeout(u.finish.bind(u),0),u},disableAnimations:function(){if(this.isAnimationEnabled){this.isAnimationEnabled=!1;for(var e=this.animations.length-1;e>=0;e--)this.animations[e].finish()}},enableAnimations:function(){this.isAnimationEnabled=!0},fadeIn:function(e,t){this.animate({source:e,properties:{name:"opacity",from:0,to:t||1}})},fadeOutAndRemove:function(t,n,r){this.animate({source:t,properties:{name:"opacity",from:n||1,to:0},onFinished:function(){r&&r(),e(t).remove()}})},onAnimationUpdate:function(e){if(!this.animations.length){t.off("update",this.onAnimationUpdate,this);return}for(var n=this.animations.length-1;n>=0;n--){var r=this.animations[n];r&&r.update&&r.update(e)}},onCSSTransitionEnd:function(t,n){var r=e(t),i=document.documentElement.style;i.transition!=null||i.webkitTransition!=null?r.on("transitionend webkitTransitionEnd",n):n.call(r[0],e.Event("transitionend"))}}}),define("packages/controls/src/js/core/domUtility",["jquery","../animation/animationFrame","./utility"],function(e,t,n){function u(){var t=this&&this!==window?this:document.body,n=t.querySelectorAll("[data-resizable]");for(var r=0;r<n.length;r++){var i=n[r],s=i.parentNode;while(s&&(!s.getAttribute||!s.getAttribute("data-resizer")))s=s.parentNode;(!s||s===t)&&i.offsetHeight>0&&i.offsetWidth>0&&e(i).triggerHandler("resize")}}var r={error:"icon-error",info:"icon-properties",success:"icon-valid",warning:"icon-warning"},i,s=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"];for(var o=0;o<s.length;o++)if(document.documentElement[s[o]]){i=s[o];break}return{buttonSelector:'button,input[type="button"],input[type="image"],input[type="reset"],input[type="submit"]',focusableSelector:"a,button,input,select,textarea",isTouchEnabled:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,addClass:function(e,t){var n=t.split(" ");for(var r=0;r<n.length;r++)n[r]&&e.classList.add(n[r])},createTreeWalker:function(t){var n=function(){return NodeFilter.FILTER_ACCEPT};return n.acceptNode=n,document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,n,!1)},detachElement:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},disableBrowserSelection:function(e){e&&e.jquery&&e.attr("unselectable","on").css("user-select","none").on("selectstart.ui",function(){return!1})},findParent:function(e,t){while(e){if(this.matches(e,t))return e;e=e.parentNode}},focusElement:function(e,t,n){var r=n>0?"nextNode":"previousNode",i=this.createTreeWalker(e);if(t)i.currentNode=t;else if(e.contains(document.activeElement))i.currentNode=document.activeElement,t=i[r]();else if(n<0){t=i.lastChild();while(t.children.length)t=t.children[t.children.length-1];i.currentNode=t}else t=i[r]();this.isFocusable(t)&&t.focus();while(t&&t!==document.activeElement)t=i[r](),this.isFocusable(t)&&t.focus();return t},focusNextElement:function(e,t){var n=this.focusElement(e,null,1);return t&&n!==document.activeElement?this.focusElement(e,e.firstElementChild,1):n},focusPreviousElement:function(e,t){var n=this.focusElement(e,null,-1);return t&&n!==document.activeElement?this.focusElement(e,e.lastElementChild,-1):n},getContentElement:function(e,t,n){var r;for(var i=0;i<t.length;i++){var s=t[i];if(s){var o=s.apply(null,n);if(o!==undefined){o&&typeof o=="object"?r=this.getHTMLElement(o):e=o;break}}}return!r&&e!=null&&(r=document.createElement("span"),r.textContent=e),r},getElement:function(t,n,r){if(typeof t=="string")throw new Error("An HTML element is required. Strings and selectors are not supported.");var i=e(t);if(i.length===0)throw new Error("An HTML element is required.");if(!n&&i.length>1)throw new Error("An HTML element is required. Multiple elements are not supported.");if(r&&!this.matches(i[0],r))throw new Error('Invalid HTML element. "'+r+'" is required.');return i},getHTMLElement:function(t){if(t){if(t.nodeType===1)return t;if(t instanceof e)return t[0];if(typeof t=="object")return e(t)[0]}},getIconClassFromAlertType:function(e){if(e)return r[e.toLowerCase()]},getScrollbarSize:function(){if(!this.scrollbarSize){var e=document.createElement("div");e.style.position="absolute",e.style.top="-10000px",e.style.left="-10000px",e.style.width="100px",e.style.height="100px",e.style.border="none",e.style.overflow="scroll",document.body.appendChild(e),this.scrollbarSize={width:e.offsetWidth-e.clientWidth,height:e.offsetHeight-e.clientHeight},document.body.removeChild(e)}return this.scrollbarSize},getTouchById:function(e,t,r){var i=e.originalEvent&&e.originalEvent[t];if(r&&i)return n.findByProperty(i,"identifier",r.identifier)},getTouchFromEvent:function(e,t){var n=e.originalEvent&&e.originalEvent[t];if(n&&n.length===1)return n[0]},hasTouchMoved:function(e,t){return Math.abs(e.pageX-t.pageX)+Math.abs(e.pageY-t.pageY)>10},invokeResize:function(e){t.throttleByFrame({method:u,context:e})},isFocusable:function(e){if(e)if(this.matches(e,this.focusableSelector)||e.getAttribute("tabindex"))return!e.disabled&&!e.hasAttribute("aria-disabled")},matches:function(e,t){if(e&&e[i])return e[i](t)},removeWhitespaceElements:function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];n.nodeType===3&&!/\S/.test(n.nodeValue)&&e.removeChild(n),n.childNodes&&n.childNodes.length&&this.removeWhitespaceElements(n)}},renderTemplate:function(e,t){var n=document.createElement("div");return n.innerHTML=e.render(t),n.firstElementChild},toggleAttribute:function(e,t,n){n?e.setAttribute(t,!0):e.removeAttribute(t)},toggleClass:function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}}}),define("packages/controls/src/js/dataOrganizers/dataOrganizer",["core","../core/utility"],function(e,t){function n(){this.descriptions=[],arguments.length&&this.addDescription.apply(this,arguments)}return n.prototype.addDescription=function(){var e=t.resolveParameters.apply(null,arguments);if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];r&&this.descriptions.push(r)}},n.prototype.apply=function(e,t){e&&e.length&&this.hasDescriptions()?(this.isWaiting=!0,this.organizeData(e,function(){this.isWaiting=!1,t&&t.apply(t,arguments);var e=["update"];e.push.apply(e,arguments),this.trigger.apply(this,e)}.bind(this))):t&&t()},n.prototype.getDescriptions=function(){return this.descriptions},n.prototype.hasDescriptions=function(){return this.descriptions.length},n.prototype.isWaiting=function(){return this.isWaiting},n.prototype.setDescriptions=function(){this.descriptions.length=0,arguments.length&&this.addDescription.apply(this,arguments)},e.Events.enableFor(n.prototype),n}),define("packages/controls/src/js/dataOrganizers/filterHandler",["./dataOrganizer"],function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.organizeData=function(e,t){for(var n=0;n<this.descriptions.length;n++){var r=this.descriptions[n],i=r.property&&r.property.split(".");for(var s=e.length-1;s>=0;s--){var o=e[s];if(i)for(var u=0;o&&u<i.length;u++)o=o[i[u]];(!o&&o!==0||r.method&&!r.method(o))&&e.splice(s,1)}}t(e)},t}),define("packages/controls/src/js/dataOrganizers/sortHandler",["./dataOrganizer"],function(e){function t(){e.apply(this,arguments)}function n(e,n){for(var r=0;r<e.length;r++){var i=e[r];if(n)for(var s=0;s<n.length;s++)i=i[n[s]];if(i!=null){if(typeof i=="string")return t.stringSort;break}}return t.defaultSort}function r(e,t){for(var n=0;n<this.descriptions.length;n++){var r=this.descriptions[n].sortMethod(e,t);if(r)return r}return 0}function i(e,t){for(var n=0;n<this.propertyChain.length;n++){var r=this.propertyChain[n];e&&(e=e[r]),t&&(t=t[r])}return this.sortMethod(e,t)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.defaultSort=function(e,t){var n=e||e===0||e===!1,r=t||t===0||t===!1;if(!n||!r)return n?-1:r?1:0;var i=e<t?-1:e>t?1:0;return this.isAscending?i:-i},t.stringSort=function(e,t){if(!e||!t)return e?-1:t?1:0;var n=e.localeCompare(t);return this.isAscending?n:-n},t.prototype.addDescription=function(){var t=this.descriptions.length;e.prototype.addDescription.apply(this,arguments);for(var n=t;n<this.descriptions.length;n++){var r=this.descriptions[n];r.isAscending==null&&(r.isAscending=!0)}},t.prototype.organizeData=function(e,t){var s;for(var o=0;o<this.descriptions.length;o++){s=this.descriptions[o];var u=s.property&&s.property.split("."),a=(s.method||n(e,u)).bind(s);u?s.sortMethod=i.bind({sortMethod:a,propertyChain:u}):s.sortMethod=a}this.descriptions.length===1?e.sort(this.descriptions[0].sortMethod):e.sort(r.bind(this));for(o=0;o<this.descriptions.length;o++)this.descriptions[o].sortMethod=undefined;t(e)},t}),define("packages/controls/src/js/core/collectionView",["underscore","core","../dataOrganizers/filterHandler","../dataOrganizers/sortHandler","./utility"],function(e,t,n,r,i){function s(t,n){this.items=[],this.sourceItems=[],this.dataOrganizers=[],this.ViewItemType=function(){},this.debouncedInvalidate=e.debounce(this.invalidate.bind(this),1),this.setBoundProperties(n),this.setFilterHandler(),this.setSortHandler(),t&&t.length&&this.setSourceItems(t)}return s.prototype.applyOrganizers=function(e,t){var n=this.dataOrganizers[e];if(!n){t.call(this);return}var r=this.getOrganizableArray();n.apply(r,function(n,i){n&&(r!==n?this.setSourceItems(n):e+1<this.dataOrganizers.length&&this.reIndexItems(),i!==undefined&&(this.groups=i,i&&i.length&&this.reIndexByGroup())),this.applyOrganizers(e+1,t)}.bind(this))},s.prototype.createProperty=function(e){var t=this;Object.defineProperty(this.ViewItemType.prototype,e,{get:function(){return this.sourceItem[e]},set:function(n){this.sourceItem[e]!==n&&(this.sourceItem[e]=n,t.trigger("change:item",{property:e},this))}})},s.prototype.createViewItem=function(e,t,n){var r=new this.ViewItemType;return r.index=t,r.sourceItem=e,r.sourceIndex=n,r},s.prototype.getAllByProperty=function(e,t){var n=[];for(var r=0;r<this.items.length;r++){var i=this.items[r];(i[e]===t||i.sourceItem[e]===t)&&n.push(i)}return n},s.prototype.getOrganizableArray=function(){return this.items},s.prototype.hasProperty=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n[e]!=null||n.sourceItem[e]!=null)return!0}return!1},s.prototype.pendInvalidation=function(){for(var e=0;e<this.dataOrganizers.length;e++)if(this.dataOrganizers[e].hasDescriptions()){this.debouncedInvalidate();break}},s.prototype.reIndexItems=function(){for(var e=0;e<this.items.length;e++)this.items[e].index=e},s.prototype.reIndexByGroup=function(){var e=0;for(var t=0;t<this.groups.length;t++){var n=this.groups[t];for(var r=0;r<n.items.length;r++)n.items[r].index=e++}this.items.sort(function(e,t){return e.index-t.index})},s.prototype.setProperty=function(e,t){for(var n=0;n<this.items.length;n++)this.items[n][e]=t},s.prototype.setSourceItems=function(e){this.items.length=0,this.sourceItems=e!=null?e.slice():[];for(var t=0;t<this.sourceItems.length;t++)this.items.push(this.createViewItem(this.sourceItems[t],t,t))},s.prototype.setSourceProperty=function(e,t){for(var n=0;n<this.items.length;n++)this.items[n].sourceItem[e]=t},s.prototype.updateSourceIndices=function(e,t){for(var n=0;n<this.items.length;n++){var r=this.items[n];r!==e&&r.sourceIndex>=e.sourceIndex&&(r.sourceIndex+=t)}},s.prototype.add=function(e){if(e!=null){var t=this.createViewItem(e,this.items.length,this.sourceItems.length);return this.items.push(t),this.sourceItems.push(e),this.trigger("add:item",{},t),this.pendInvalidation(),t}},s.prototype.findByProperty=function(e,t){if(t!==undefined)for(var n=0;n<this.items.length;n++){var r=this.items[n];if(r[e]===t||r.sourceItem[e]===t)return r}},s.prototype.getDataOrganizers=function(){return this.dataOrganizers},s.prototype.getFilterHandler=function(){return this.filterHandler},s.prototype.getGroups=function(){return this.groups},s.prototype.getItems=function(){return this.items},s.prototype.getSortHandler=function(){return this.sortHandler},s.prototype.getSourceItems=function(){return this.sourceItems},s.prototype.insert=function(e,t){var n=this.items[t];if(n){var r=this.createViewItem(e,t,n.sourceIndex);return this.sourceItems.splice(r.sourceIndex,0,e),this.items.splice(t,0,r),this.updateSourceIndices(r,1),this.reIndexItems(),this.trigger("insert:item",{},r),this.pendInvalidation(),r}return this.add(e)},s.prototype.invalidate=function(){this.isBuildingCollection=!0,this.applyOrganizers(0,function(){this.reIndexItems(),this.isBuildingCollection=!1,this.trigger("ready",{},this)})},s.prototype.invalidateItem=function(e){e&&this.trigger("change:item",{},e)},s.prototype.isWaiting=function(){return this.isBuildingCollection},s.prototype.move=function(e,t){if(e){var n={oldIndex:e.index,newIndex:i.clamp(0,this.items.length,t)};return this.items.splice(n.newIndex,0,this.items.splice(n.oldIndex,1)[0]),this.reIndexItems(),this.trigger("move:item",n,e),this.pendInvalidation(),e}},s.prototype.remove=function(e){if(e)return this.items.splice(e.index,1),this.sourceItems.splice(e.sourceIndex,1),this.updateSourceIndices(e,-1),this.reIndexItems(),this.trigger("remove:item",{},e),this.pendInvalidation(),e},s.prototype.removeByProperty=function(e,t){for(var n=0;n<this.items.length;n++){var r=this.items[n];if(r[e]===t||r.sourceItem[e]===t)return this.remove(r)}},s.prototype.reset=function(){this.dataOrganizers.length=0,this.setSourceItems(this.sourceItems),this.invalidate()},s.prototype.setDataOrganizers=function(e){this.dataOrganizers=e||[];for(var t=0;t<this.dataOrganizers.length;t++){var i=this.dataOrganizers[t];i instanceof r?this.sortHandler=i:i instanceof n&&(this.filterHandler=i)}},s.prototype.setFilterHandler=function(e){this.filterHandler&&i.removeFromArray(this.dataOrganizers,this.filterHandler),this.filterHandler=e||new n,this.dataOrganizers.push(this.filterHandler)},s.prototype.setItems=function(){this.setSourceItems(i.resolveParameters.apply(null,arguments)),this.trigger("set",{},this),this.invalidate()},s.prototype.setSortHandler=function(e){this.sortHandler&&i.removeFromArray(this.dataOrganizers,this.sortHandler),this.sortHandler=e||new r,this.dataOrganizers.push(this.sortHandler)},s.prototype.addBoundProperty=function(){arguments.length&&(this.boundProperties.push.apply(this.boundProperties,arguments),this.setBoundProperties(this.boundProperties))},s.prototype.getBoundProperties=function(){return this.boundProperties},s.prototype.setBoundProperties=function(t){var n;this.ViewItemType.prototype={},this.boundProperties=t||[];if(t)for(n=0;n<t.length;n++)this.createProperty(t[n]);for(n=0;n<this.items.length;n++)this.items[n]=e.extend(new this.ViewItemType,this.items[n]);this.invalidate()},t.Events.enableFor(s.prototype),s}),define("packages/controls/src/js/selectionModels/multiSelectionModel",[],function(){function e(e){this.selectedItems=[],this.setItems(e)}return e.prototype.getItemsFrom=function(e,t){var n=e,r=e<t?1:-1,i=[];while(n!==t+r){var s=this.items[n];s&&s.isVisible!==!1&&i.push(s),n+=r}return i},e.prototype.deselect=function(e){e&&!Array.isArray(e)&&(e=[e]);if(e&&e.length>0){var t;for(var n=0;n<e.length;n++)t=e[n],t.isSelected&&(t.isSelected=!1);var r=[];for(n=this.selectedItems.length-1;n>=0;n--)t=this.selectedItems[n],t.isSelected||(r.push(t),this.selectedItems.splice(n,1));return r}},e.prototype.deselectAll=function(){var e=[];for(var t=0;t<this.selectedItems.length;t++){var n=this.selectedItems[t];n.isSelected&&(n.isSelected=!1,e.push(n))}return this.selectedItems.length=0,e},e.prototype.focus=function(e){this.focusedItem=e},e.prototype.getFocused=function(){return this.focusedItem},e.prototype.getSelected=function(){return this.selectedItems},e.prototype.isSelectionEmpty=function(){return!this.selectedItems.length},e.prototype.isSelectionFull=function(){return this.items.length&&this.items.length===this.selectedItems.length},e.prototype.select=function(e,t){e&&!Array.isArray(e)&&(e=[e]);if(e&&e.length>0){var n=[],r={};for(var i=0;i<e.length;i++)r[e[i].index]=!0;var s;for(i=this.selectedItems.length-1;i>=0;i--)s=this.selectedItems[i],r[s.index]?r[s.index]=!1:t||(s.isSelected=!1,n.push(s),this.selectedItems.splice(i,1));for(i=0;i<e.length;i++)s=e[i],r[s.index]&&(s.isSelected=!0,n.push(s),this.selectedItems.push(s));return this.focusedItem=e.pop(),n}return this.deselectAll()},e.prototype.selectRange=function(e,t,n){if(e&&t)return this.select(this.getItemsFrom(e.index,t.index),n)},e.prototype.selectRangeTo=function(e){var t=this.selectedItems[0]||this.focusedItem;return t&&e?this.select(this.getItemsFrom(t.index,e.index)):this.select(e)},e.prototype.selectAll=function(){var e=[];for(var t=0;t<this.items.length;t++){var n=this.items[t];n&&!n.isSelected&&(n.isSelected=!0,e.push(n))}return this.selectedItems=this.items.slice(),this.focusedItem||(this.focusedItem=this.items[0]),e},e.prototype.selectAllVisible=function(){var e=[];this.selectedItems.length=0;for(var t=0;t<this.items.length;t++){var n=this.items[t];n&&n.isVisible!==!1&&(n.isSelected||e.push(n),n.isSelected=!0,this.selectedItems.push(n))}return this.focusedItem||(this.focusedItem=this.selectedItems[0]),e},e.prototype.setItems=function(e){this.items=e||[],this.focusedItem=null,this.selectedItems.length=0;for(var t=0;t<this.items.length;t++)this.items[t].isSelected&&this.selectedItems.push(this.items[t]);this.selectedItems.length&&(this.focusedItem=this.selectedItems[0])},e.prototype.toggleSelection=function(e){e&&!Array.isArray(e)&&(e=[e]);if(e&&e.length>0){var t,n=[];for(var r=0;r<e.length;r++)t=e[r],n.push(t),t.isSelected=!t.isSelected,t.isSelected&&this.selectedItems.push(t);for(r=this.selectedItems.length-1;r>=0;r--)t=this.selectedItems[r],t.isSelected||this.selectedItems.splice(r,1);return n}},e}),define("packages/controls/src/js/selectionModels/hierarchicalMultiSelectionModel",["underscore","./multiSelectionModel"],function(e,t){function n(e){t.call(this,e)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.addChildren=function(t){if(this.useLeafSelection){var n=t.length;for(var r=0;r<n;r++){var i=t[r],s=i.isSelected===!0;s||(i.isPartiallySelected=!1),this.selectChildren(t,i,s),this.updateParents(t,i,s)}for(r=this.selectedItems.length-1;r>=0;r--)this.selectedItems[r].isSelected||this.selectedItems.splice(r,1);e.uniq(t)}},n.prototype.deselect=function(e){var n=t.prototype.deselect.call(this,e);return this.addChildren(n),n},n.prototype.select=function(e,n){var r=t.prototype.select.call(this,e,n);return this.addChildren(r),r},n.prototype.selectAll=function(){return this.useLeafSelection?t.prototype.selectAll.call(this):t.prototype.selectAllVisible.call(this)},n.prototype.selectChildren=function(e,t,n){if(t.children)for(var r=0;r<t.children.length;r++){var i=t.children[r];i.isPartiallySelected=!1;var s=i.isSelected===!0;s!==n&&(e.push(i),i.isSelected=n,n&&this.selectedItems.push(i)),this.selectChildren(e,i,n)}},n.prototype.toggleSelection=function(e){var n=t.prototype.toggleSelection.call(this,e);return this.addChildren(n),n},n.prototype.updateParents=function(e,t){var n=t.parent;while(n){var r=0,i=!1,s=n.children;for(var o=0;o<s.length;o++){var u=s[o];u.isSelected&&r++,u.isPartiallySelected&&(i=!0)}var a;r===s.length?(n.isPartiallySelected=!1,a=!0):r||i?(n.isPartiallySelected=!0,a=!1):(n.isPartiallySelected=!1,a=!1),a!==(n.isSelected===!0)&&(e.push(n),n.isSelected=a,n.isSelected&&this.selectedItems.push(n)),n=n.parent}},n}),define("packages/controls/src/js/selectionModels/singleSelectionModel",[],function(){function e(e){this.setItems(e)}return e.prototype.deselect=function(e){e&&Array.isArray(e)&&(e=e[0]);if(e===this.selectedItem)return e.isSelected=!1,this.selectedItem=null,[e]},e.prototype.focus=function(e){this.focusedItem=e},e.prototype.getFocused=function(){return this.focusedItem},e.prototype.getSelected=function(){return this.selectedItem?[this.selectedItem]:[]},e.prototype.isSelectionEmpty=function(){return this.selectedItem==null},e.prototype.isSelectionFull=function(){return this.items.length===1&&this.items[0]===this.selectedItem},e.prototype.select=function(e){e&&Array.isArray(e)&&(e=e[0]);if(e!==this.selectedItem){var t=[];return this.selectedItem&&(this.selectedItem.isSelected=!1,t.push(this.selectedItem)),e.isSelected=!0,this.selectedItem=e,this.focusedItem=e,t.push(e),t}},e.prototype.selectRange=function(e,t){if(e&&t)return this.select(t)},e.prototype.selectRangeTo=e.prototype.select,e.prototype.setItems=function(e){this.items=e||[],this.selectedItem=null;for(var t=0;t<this.items.length;t++){var n=this.items[t];n.isSelected&&(this.selectedItem?n.isSelected=!1:(this.focusedItem=n,this.selectedItem=n))}},e.prototype.toggleSelection=function(e){return e.isSelected?this.deselect(e):this.select(e)},e}),define("packages/controls/src/js/core/inputHandler",["jquery","core","../selectionModels/hierarchicalMultiSelectionModel","../selectionModels/multiSelectionModel","../selectionModels/singleSelectionModel","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o){function u(t,n){this.items=[],this.options={elementProperty:"element",getFirstItem:this.getFirstItem.bind(this),getLastItem:this.getLastItem.bind(this),getNextItem:this.getNextItem.bind(this),getPreviousItem:this.getPreviousItem.bind(this),handleClick:!0,handleContextMenu:!0,handleDoubleClick:!0,handleHover:!0,handleKeyboard:!0,selectionDirection:"vertical",selectionMode:"multi"},this.setOptions(n);var r={click:this.onClick.bind(this),contextmenu:this.onContextMenu.bind(this),dblclick:this.onDoubleClick.bind(this),focus:this.onFocus.bind(this)};this.options.handleHover&&(r.mouseenter=this.onMouseEnter.bind(this),r.mouseleave=this.onMouseLeave.bind(this)),e(t).on(r,this.options.itemSelector).on("keydown",this.onKeyDown.bind(this))}return u.prototype.getFirstItem=function(){return this.getNextVisible(this.items,0,1,1)},u.prototype.getLastItem=function(){return this.getNextVisible(this.items,this.items.length-1,-1,1)},u.prototype.getNextItem=function(e,t,n){if(e){var r=this.items.length-1;return n&&e.index+t>r?this.getNextVisible(this.items,r,-1,1):this.getNextVisible(this.items,e.index+1,1,t)}return this.getNextVisible(this.items,0,1,1)},u.prototype.getNextVisible=function(e,t,n,r){if(!e[t])return;var i,s,o=0;do i=e[t],t+=n,i&&i.isVisible!==!1&&(o++,s=i);while(i&&o<r);return i||s},u.prototype.getPreviousItem=function(e,t,n){if(e)return n&&e.index-t<0?this.getNextVisible(this.items,0,1,1):this.getNextVisible(this.items,e.index-1,-1,t)},u.prototype.handleArrowsForHorizontalNavigation=function(e){switch(e.which){case 37:this.selectItems(e,this.options.getPreviousItem(this.getFocused(),1)),e.preventDefault();break;case 38:this.trigger("up:item",{sourceEvent:e},this.selectionModel.getFocused()),e.preventDefault();break;case 39:this.selectItems(e,this.options.getNextItem(this.getFocused(),1)),e.preventDefault();break;case 40:this.trigger("down:item",{sourceEvent:e},this.selectionModel.getFocused()),e.preventDefault()}},u.prototype.handleArrowsForVerticalNavigation=function(e){switch(e.which){case 33:this.options.getPageAmount&&this.selectItems(e,this.options.getPreviousItem(this.getFocused(),this.options.getPageAmount(),!0)),e.preventDefault();break;case 34:this.options.getPageAmount&&this.selectItems(e,this.options.getNextItem(this.getFocused(),this.options.getPageAmount(),!0)),e.preventDefault();break;case 37:this.trigger("left:item",{sourceEvent:e},this.selectionModel.getFocused()),e.preventDefault();break;case 38:this.selectItems(e,this.options.getPreviousItem(this.getFocused(),1)),e.preventDefault();break;case 39:this.trigger("right:item",{sourceEvent:e},this.selectionModel.getFocused()),e.preventDefault();break;case 40:this.selectItems(e,this.options.getNextItem(this.getFocused(),1)),e.preventDefault()}},u.prototype.handleArrowsForBidirectionalNavigation=function(e){switch(e.which){case 33:this.options.getPageAmount&&this.selectItems(e,this.options.getPreviousItem(this.getFocused(),this.options.getPageAmount(),!0)),e.preventDefault();break;case 34:this.options.getPageAmount&&this.selectItems(e,this.options.getNextItem(this.getFocused(),this.options.getPageAmount(),!0)),e.preventDefault();break;case 37:this.selectItems(e,this.options.getPreviousItem(this.getFocused(),1)),e.preventDefault();break;case 38:this.options.getRowAmount&&this.selectItems(e,this.options.getPreviousItem(this.getFocused(),this.options.getRowAmount())),e.preventDefault();break;case 39:this.selectItems(e,this.options.getNextItem(this.getFocused(),1)),e.preventDefault();break;case 40:this.options.getRowAmount&&this.selectItems(e,this.options.getNextItem(this.getFocused(),this.options.getRowAmount())),e.preventDefault()}},u.prototype.handleFocusAndSelectionChange=function(e,t){if(!this.items.length||!this.selectionModel||!this.selectionModel[t])return;var n=Array.prototype.slice.call(arguments,2),r=this.selectionModel.getFocused(),i=this.selectionModel[t].apply(this.selectionModel,n);this.handleFocusChange(e,r,this.selectionModel.getFocused());if(i&&i.length){for(var s=0;s<i.length;s++){var o=i[s],u=o[this.options.elementProperty];u&&u.setAttribute("aria-selected",o.isSelected===!0)}this.trigger("change:selection",{sourceEvent:e},i)}},u.prototype.handleFocusChange=function(e,t,n){t!==n&&(n&&(t?this.setTabIndex(t,-1):this.lastFocusedItem&&this.setTabIndex(this.lastFocusedItem,-1),this.setTabIndex(n,0),this.lastFocusedItem=n),this.trigger("change:focus",{sourceEvent:e},n))},u.prototype.onClick=function(e){if(this.options.handleClick){var t=s.findByProperty(this.items,this.options.elementProperty,e.currentTarget);if(t!=null&&!t.isDisabled){var n;e.shiftKey?n="selectRangeTo":e.ctrlKey||e.metaKey||this.options.toggleOnClick?n="toggleSelection":n="select",this.handleFocusAndSelectionChange(e,n,t),this.trigger("click:item",{sourceEvent:e},t)}}},u.prototype.onContextMenu=function(e){if(this.options.handleContextMenu){var t=s.findByProperty(this.items,this.options.elementProperty,e.currentTarget);if(t!=null){t.isSelected||this.selectItems(e,t);var n=this.selectionModel.getSelected();n&&n.length&&this.triggerContextMenuEvent(e,this,"contextmenu:item",{},n)}}},u.prototype.onDoubleClick=function(e){if(this.options.handleDoubleClick){var t=s.findByProperty(this.items,this.options.elementProperty,e.currentTarget);t&&!t.isDisabled&&this.trigger("dblclick:item",{sourceEvent:e},t)}},u.prototype.onFocus=function(e){var t=s.findByProperty(this.items,this.options.elementProperty,e.currentTarget),n=this.selectionModel.getFocused();this.selectionModel.focus(t),this.handleFocusChange(e,n,this.selectionModel.getFocused())},u.prototype.onKeyDown=function(e){if(!this.options.handleKeyboard||!this.selectionModel||o.findParent(e.target,"button, input, select, textarea"))return;var t=this.selectionModel.getFocused();switch(e.which){case 13:var n=this.selectionModel.getSelected();n&&n.length&&this.trigger("enter:item",{sourceEvent:e},n);break;case 32:t&&(e.ctrlKey||e.metaKey?this.toggleSelection(t):this.trigger("spacebar:item",{sourceEvent:e},t)),e.preventDefault();break;case 35:this.selectItems(e,this.options.getLastItem());break;case 36:this.selectItems(e,this.options.getFirstItem());break;case 65:if(e.ctrlKey||e.metaKey)this.handleFocusAndSelectionChange(e,"selectAll"),e.preventDefault()}this.handleArrowNavigation&&this.handleArrowNavigation(e),t&&this.trigger("keydown:item",{sourceEvent:e},t)},u.prototype.onMouseEnter=function(e){var t=s.findByProperty(this.items,this.options.elementProperty,e.currentTarget);this.updateClassAndHandleEvent(e,t,"hoverClass","mouseenter:item",!0)},u.prototype.onMouseLeave=function(e){var t=s.findByProperty(this.items,this.options.elementProperty,e.currentTarget);this.updateClassAndHandleEvent(e,t,"hoverClass","mouseleave:item",!1)},u.prototype.selectItems=function(e,t){if(!t||Array.isArray(t)&&!t.length)return;if(e){if(e.shiftKey&&this.selectionModel.selectRangeTo){this.handleFocusAndSelectionChange(e,"selectRangeTo",t);return}if(e.ctrlKey||e.metaKey){var n=this.selectionModel.getFocused();this.selectionModel.focus(t),this.handleFocusChange(e,n,t);return}}this.handleFocusAndSelectionChange(e,"select",t)},u.prototype.setTabIndex=function(e,t){if(e){var n=e[this.options.elementProperty];n&&(n.tabIndex=t)}},u.prototype.updateClassAndHandleEvent=function(e,t,n,r,i){var s=this.options[n];s&&o.toggleClass(e.currentTarget,s,i),t&&this.trigger(r,{sourceEvent:e},t)},u.prototype.addToSelection=function(){var e=s.resolveArrayItems(this.items,s.resolveParameters.apply(null,arguments));e&&this.handleFocusAndSelectionChange(null,"select",e,!0)},u.prototype.deselect=function(){var e=s.resolveArrayItems(this.items,s.resolveParameters.apply(null,arguments));e&&this.handleFocusAndSelectionChange(null,"deselect",e)},u.prototype.deselectAll=function(){this.handleFocusAndSelectionChange(null,"deselectAll")},u.prototype.focus=function(e){e=s.resolveArrayItems(this.items,e),this.handleFocusAndSelectionChange(null,"focus",e)},u.prototype.getFocused=function(){return this.selectionModel.getFocused()},u.prototype.getLastFocused=function(){return this.lastFocusedItem},u.prototype.getItems=function(){return this.items},u.prototype.getSelected=function(){return this.selectionModel.getSelected()},u.prototype.select=function(){var e=s.resolveArrayItems(this.items,s.resolveParameters.apply(null,arguments));e?this.selectItems(null,e):this.deselect(this.getSelected())},u.prototype.selectAll=function(){this.handleFocusAndSelectionChange(null,"selectAll")},u.prototype.selectTo=function(e,t){e=s.resolveArrayItems(this.items,e);if(!e)return;var n=this.selectionModel.getFocused();if(e===n&&!this.selectionModel.isSelectionEmpty()){var r=this.selectionModel.getSelected();r&&r.length&&(n=r[r.length-1])}n&&(t?this.handleFocusAndSelectionChange(null,"selectRange",n,e,!0):this.handleFocusAndSelectionChange(null,"selectRange",n,e))},u.prototype.setItems=function(){this.items=s.resolveParameters.apply(null,arguments)||[],this.selectionModel&&this.selectionModel.setItems(this.items)},u.prototype.setOptions=function(t){e.extend(this.options,t);if(this.options.selectionMode==="multi"){if(this.options.isHierarchical){if(!this.selectionModel||!(this.selectionModel instanceof n))this.selectionModel=new n}else if(!this.selectionModel||!(this.selectionModel instanceof r))this.selectionModel=new r}else if(!this.selectionModel||!(this.selectionModel instanceof i))this.selectionModel=new i;this.selectionModel.setItems(this.items),this.options.selectionDirection==="horizontal"?this.handleArrowNavigation=this.handleArrowsForHorizontalNavigation.bind(this):this.options.selectionDirection==="both"?this.handleArrowNavigation=this.handleArrowsForBidirectionalNavigation.bind(this):this.handleArrowNavigation=this.handleArrowsForVerticalNavigation.bind(this)},u.prototype.toggleSelection=function(){var e=s.resolveArrayItems(this.items,s.resolveParameters.apply(null,arguments));e&&this.handleFocusAndSelectionChange(null,"toggleSelection",e)},t.Events.enableFor(u.prototype),u}),define("packages/controls/src/js/dialogs/modalHelper",["../animation/animator","../core/utility"],function(e,t){return{modalDialogQueue:[],add:function(t,n){if(!this.modalOverlay){this.iframeFix=this.createIFrameFixElement(),this.modalOverlay=this.createModalOverlay(),this.iframeFix.style.zIndex=0,document.body.appendChild(this.iframeFix),document.body.appendChild(this.modalOverlay);var r=window.getComputedStyle(this.modalOverlay,null);this.overlayZIndex=parseInt(r.zIndex)}this.modalDialogQueue.unshift(t),document.body.appendChild(t.element),this.reorderElements(),n!==!1&&e.fadeIn(t.element),this.modalOverlay.classList.contains("shown")||e.fadeIn(this.modalOverlay)},createIFrameFixElement:function(){var e=document.createElement("iframe");return e.className="iframe-fix-element",e.setAttribute("aria-hidden",!0),e},createModalOverlay:function(){var e=document.createElement("div");return e.className="modal-overlay",e},remove:function(n,r){if(!t.removeFromArray(this.modalDialogQueue,n))return;r!==!1&&e.fadeOutAndRemove(n.element),this.modalDialogQueue.length?this.reorderElements():this.modalOverlay&&(e.fadeOutAndRemove(this.modalOverlay),document.body.removeChild(this.iframeFix),this.iframeFix=null,this.modalOverlay=null)},reorderElements:function(){var e=this.modalDialogQueue.length;if(e){this.modalDialogQueue[0].element.style.zIndex=this.overlayZIndex+1;for(var t=1;t<e;t++)this.modalDialogQueue[t].element.style.zIndex=this.overlayZIndex-t}}}}),define("packages/controls/src/js/popups/progressIndicator",["core","../animation/animationFrame","../animation/animator","../dialogs/modalHelper","../core/utility","../core/domUtility"],function(e,t,n,r,i,s){function o(e,t){this.$element=s.getElement(e),this.element=this.$element[0],this.element.classList.add("progress-indicator"),this.element.setAttribute("role","progressbar"),this.options={isIndeterminate:!1,minValue:0,maxValue:100,orientation:"auto",size:64,showProgress:!0,style:"circle"},this.setOptions(t)}return o.prototype.getCanvasColors=function(){var e=window.getComputedStyle(this.element.querySelector(".progress-background")),t=window.getComputedStyle(this.element.querySelector(".progress-foreground"));return{background:e.backgroundColor,foreground:t.backgroundColor}},o.prototype.getInnerRadius=function(e){return this.options.size<32?e*.6:e*.7},o.prototype.initializeBar=function(){if(this.innerBar)return;this.canvasElement&&(this.element.classList.remove("progress-indicator-circle"),this.element.classList.remove("large-circle"),this.$element.empty(),this.canvasElement=null),this.innerBar=document.createElement("div"),this.innerBar.className="progress-foreground";var e=document.createElement("div");e.className="progress-background",e.appendChild(this.innerBar),this.element.classList.add("progress-indicator-bar"),this.element.appendChild(e)},o.prototype.initializeCanvas=function(){if(this.canvasElement)return;this.innerBar&&(this.element.classList.remove("progress-indicator-bar"),this.element.classList.remove("vertical-bar"),this.$element.empty(),this.innerBar=null);var e=document.createElement("div"),t=document.createElement("div");e.className="progress-background",t.className="progress-foreground",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.options.size,this.canvasElement.height=this.options.size,this.element.appendChild(e),this.element.appendChild(t),this.element.appendChild(this.canvasElement),this.element.classList.add("progress-indicator-circle"),this.options.size>=48&&(this.element.style.width=this.options.size+"px",this.element.classList.add("large-circle")),this.options.isIndeterminate&&(this.value=0,this.options.minValue=0,this.options.maxValue=1)},o.prototype.startAnimation=function(e){this.animation&&this.animation.finish(),this.animation=n.animate({source:this,duration:500,properties:{name:"value",from:this.value||0,to:e},onFinished:function(){this.animation=null,this.element.setAttribute("aria-valuenow",this.value)}.bind(this)}),this.animation.on("update",this.update,this)},o.prototype.startIndeterminateIndicator=function(){this.isRunning||(this.isRunning=!0,t.on("update",this.updateIndeterminateProgress,this))},o.prototype.update=function(){this.canvasElement?this.updateCanvas():this.updateBar(),this.progressElement&&(this.progressElement.textContent=Math.round(this.getProgress()*100)),this.trigger("update",{},this),this.value===this.options.maxValue&&this.trigger("complete",{},this)},o.prototype.updateBar=function(){var e;this.options.orientation==="vertical"?e=!0:this.options.orientation==="horizontal"?e=!1:e=this.element.clientHeight>this.element.clientWidth;var t=Math.round((1-this.getProgress())*100)+"%";e?(this.element.classList.add("vertical-bar"),this.innerBar.style.right="0px",this.innerBar.style.top=t):(this.element.classList.remove("vertical-bar"),this.innerBar.style.right=t,this.innerBar.style.top="0px")},o.prototype.updateCanvas=function(){var e=this.canvasElement.getContext("2d");e.clearRect(0,0,this.canvasElement.width,this.canvasElement.height);var t=this.getCanvasColors(),n=this.options.size/2,r=this.getInnerRadius(n),i=this.getProgress(),s,o;this.options.isIndeterminate?(s=i*Math.PI*2,o=s+Math.PI*.25):(s=-Math.PI*.5,o=s+i*Math.PI*2),e.fillStyle=t.background,e.lineWidth=1,e.beginPath(),e.arc(n,n,n,0,Math.PI*2),e.fill(),e.fillStyle=t.foreground,e.beginPath(),e.moveTo(n,n),e.arc(n,n,n,s,o),e.fill(),e.globalCompositeOperation="destination-out",e.beginPath(),e.arc(n,n,r,0,Math.PI*2),e.fill(),e.globalCompositeOperation="source-over"},o.prototype.updateIndeterminateProgress=function(e){if(!document.body.contains(this.element)){this.stop();return}this.value+=e/1e3,this.value>=this.options.maxValue&&(this.value=this.options.minValue+this.value-this.options.maxValue),this.updateCanvas(),this.updatePosition()},o.prototype.updatePosition=function(){if(this.parent){var e=this.parent.offsetWidth,t=this.parent.offsetHeight,n=this.element.offsetWidth,r=this.element.offsetHeight;this.element.style.left=(e-n)/2+"px",this.element.style.top=(t-r)/2-1+"px",this.topElement.style.height=this.parent.clientHeight+"px"}},o.prototype.updateState=function(e){if(this.options.states){var t;for(var n=0;n<this.options.states.length;n++){var r=this.options.states[n];r.progress<=e&&(t=r.className)}this.stateName!==t&&(this.stateName&&this.$element.removeClass(this.stateName),this.stateName=t,this.$element.addClass(t))}},o.prototype.updateValue=function(e){this.canvasElement?this.startAnimation(e):(this.value=e,this.element.setAttribute("aria-valuenow",e),this.update()),this.updateState(e)},o.prototype.updateValueThrottled=function(e){t.throttleByFrame({context:this,method:this.updateValue,parameters:[e],canExecute:function(){return document.body.contains(this.element)}})},o.prototype.close=function(){this.stop(),this.parent&&(this.parent.classList.remove("progress-indicator-host"),s.matches(this.parent,s.buttonSelector)&&(this.parent.disabled=this.disabledState)),this.topElement&&n.fadeOutAndRemove(this.topElement,this.options.opacity)},o.prototype.getElement=function(){return this.$element},o.prototype.getOptions=function(){return this.options},o.prototype.getProgress=function(){return(this.value-this.options.minValue)/(this.options.maxValue-this.options.minValue)},o.prototype.getValue=function(){return this.value},o.prototype.setOptions=function(e){i.mergeProperties(this.options,e),this.options.style==="bar"&&(this.options.isIndeterminate=!1),this.options.states&&Array.isArray(this.options.states)&&this.options.states.sort(function(e,t){return e.progress-t.progress}),!this.options.isIndeterminate&&this.options.showProgress?this.progressElement||(this.progressElement=document.createElement("span"),this.progressElement.className="progress-display"):this.progressElement&&this.element.removeChild(this.progressElement),this.options.style==="bar"?this.initializeBar():this.initializeCanvas(),this.progressElement&&this.element.appendChild(this.progressElement),this.options.isIndeterminate?(this.element.setAttribute("aria-valuemin",this.options.minValue),this.element.setAttribute("aria-valuemax",this.options.maxValue)):(this.element.setAttribute("aria-busy",!0),this.updateValueThrottled(i.clamp(this.options.minValue,this.options.maxValue,this.value||0)))},o.prototype.setValue=function(e){var t=i.clamp(this.options.minValue,this.options.maxValue,e);(t||t===0)&&this.value!==t&&this.updateValueThrottled(t)},o.prototype.start=function(){this.options.isIndeterminate&&this.canvasElement&&t.throttleByFrame({context:this,method:this.startIndeterminateIndicator,canExecute:function(){return document.body.contains(this.element)}})},o.prototype.stop=function(){this.animation&&this.animation.finish(),this.isRunning&&(this.isRunning=!1,t.off("update",null,this))},o.show=function(e){var u=document.createElement("div");u.className="modal-overlay progress-indicator-overlay";var a=function(e){e.preventDefault(),e.stopImmediatePropagation()};u.addEventListener("touchstart",a,!1),u.addEventListener("click",a,!1),e=i.mergeProperties({isIndeterminate:!0},e);var f=s.getHTMLElement(e.parent)||document.body;f.classList.add("progress-indicator-host");if(!e.size){var l=f.offsetHeight-16;l>64?e.size=64:l>32?e.size=32:l>24?e.size=24:e.size=16}var c=!1;s.matches(f,s.buttonSelector)?(c=f.disabled,f.disabled=!0,e.opacity=1):(e.opacity=.6,u.appendChild(r.createIFrameFixElement()));var h=new o(document.createElement("div"),e);return h.disabledState=c,h.topElement=u,h.parent=f,u.appendChild(h.element),f.appendChild(u),n.fadeIn(u,e.opacity),h.options.isIndeterminate?h.start():(this.isRunning=!0,t.on("update",h.updatePosition,h)),h},e.Events.enableFor(o.prototype),o}),define("packages/controls/src/js/core/infiniteScrollLoader",["jquery","core","../popups/progressIndicator","../core/domUtility"],function(e,t,n,r){function i(t,n){this.element=t,this.element.setAttribute("data-resizable",""),this.$element=e(this.element),this.isEnabled=!0,this.options=n||{},this.onUpdate=this.update.bind(this),this.updateValues(),this.$element.on("resize",this.onUpdate),this.element.addEventListener("scroll",this.onUpdate,!1)}return i.prototype.createEventObject=function(){var e=this;return{get isLoading(){return e.loadElement!=null},set isLoading(t){this.isLoading!==t&&e.toggleLoadingElement(t)}}},i.prototype.disable=function(){this.isEnabled=!1},i.prototype.enable=function(){this.isEnabled=!0,this.updateValues()},i.prototype.isHorizontalScrollbarVisible=function(){return this.scrollWidth>this.clientWidth},i.prototype.isVerticalScrollbarVisible=function(){return this.scrollHeight>this.clientHeight},i.prototype.restoreScrollPosition=function(){var e=this.element.scrollHeight-this.element.clientHeight;this.element.scrollTop=Math.min(e,this.scrollTop)},i.prototype.setOptions=function(e){this.options=e||{}},i.prototype.toggleLoadingElement=function(e){if(e||this.loadElement){this.progressIndicator&&this.progressIndicator.close(),r.detachElement(this.loadElement);if(e){this.loadElement=document.createElement("div"),this.loadElement.className="loading-indicator";if(this.options.loadOnInput){var i=document.createElement("button");i.textContent=t.Strings.translate("controls.loadMore"),this.loadElement.appendChild(i),i.addEventListener("click",function(){this.progressIndicator=n.show({parent:i}),this.trigger("loadResults",this.createEventObject())}.bind(this),!1)}else this.progressIndicator=n.show({parent:this.loadElement});this.element.appendChild(this.loadElement)}else this.loadElement=null;this.updateValues()}},i.prototype.triggerScrollChange=function(){var e=this.createEventObject();e.scrollTop=this.scrollTop,e.scrollHeight=this.scrollHeight,e.scrollBottom=this.viewportBottom,e.scrollRemaining=this.scrollHeight-this.viewportBottom,e.scrollPercentage=this.viewportBottom/this.scrollHeight,this.trigger("change:scroll",e,this)},i.prototype.triggerSizeChange=function(){this.trigger("change:size",{clientHeight:this.clientHeight},this)},i.prototype.update=function(){if(this.isEnabled){var e=this.clientWidth,t=this.clientHeight,n=this.scrollTop,r=this.scrollLeft,i=this.viewportRight,s=this.viewportBottom;this.updateValues(),(n!==this.scrollTop||s!==this.viewportBottom||r!==this.scrollLeft||i!==this.viewportRight)&&this.triggerScrollChange(),(t!==this.clientHeight||e!==this.clientWidth)&&this.triggerSizeChange()}},i.prototype.updateValues=function(){this.scrollTop=this.element.scrollTop,this.scrollLeft=this.element.scrollLeft,this.scrollWidth=this.element.scrollWidth,this.scrollHeight=this.element.scrollHeight,this.clientWidth=this.element.clientWidth,this.clientHeight=this.element.clientHeight,this.viewportRight=this.scrollLeft+this.clientWidth,this.viewportBottom=this.scrollTop+this.clientHeight},t.Events.enableFor(i.prototype),i}),define("packages/controls/src/js/core/positioning",["./domUtility","./utility"],function(e,t){function n(e,t,n,o){var u=e.offsetWidth,a=e.offsetHeight,f=i(t,n,o,u,a);return r(f,t,n,o,u,a),e.style.top=s(f.top),e.style.left=s(f.left),e.style.right=s(f.right),e.style.bottom=s(f.bottom),e.style.maxWidth=s(f.maxWidth,"none"),e.style.maxHeight=s(f.maxHeight,"none"),f.height=a,f.width=u,f.direction=o.direction,f}function r(e,t,n,r,i,s){r.direction==="left"||r.direction==="right"?(r.centerVertically?e.top=(n.bottom+n.top)/2-s/2:e.top=n.top,e.top<t.top?e.top=t.top:e.top+s>t.bottom&&(e.bottom=t.top,e.top=undefined)):(r.centerHorizontally?e.left=(n.right+n.left)/2-i/2:e.left=n.left,e.left<t.left?e.left=t.left:e.left+i>t.right&&(e.right=t.left,e.left=undefined))}function i(e,t,n,r,i){var s=t.left-e.left,o=t.top-e.top,u=e.right-t.right,a=e.bottom-t.bottom,f=e.height,l=e.width,c={};switch(n.direction){case"top":i>o&&o<a?(n.direction="bottom",f=a,c.top=t.bottom):(f=o,c.bottom=e.top+e.bottom-t.top);break;case"bottom":i>a&&a<o?(n.direction="top",f=o,c.bottom=e.top+e.bottom-t.top):(f=a,c.top=t.bottom);break;case"left":r>s&&s<u?(n.direction="right",l=u,c.left=t.right):(l=s,c.right=e.left+e.right-t.left);break;case"right":r>u&&u<s?(n.direction="left",l=s,c.right=e.left+e.right-t.left):(l=u,c.left=t.right);break;default:i>o&&o<a?(f=a+t.bottom-t.top,c.top=t.top):(f=o,c.bottom=e.top+e.bottom-t.top-i)}return c.maxWidth=l,c.maxHeight=f,c}function s(e,t){return e!=null?Math.floor(e)+"px":t||""}function o(e,r,i){i=t.mergeProperties({centerHorizontally:!1,centerVertically:!1,parentPadding:5,sourcePadding:0},i),i.sourcePadding&&(r.rect.left-=i.sourcePadding,r.rect.top-=i.sourcePadding,r.rect.right+=i.sourcePadding,r.rect.bottom+=i.sourcePadding);var s=i.parentPadding,o={left:s,top:s,right:-s,bottom:-s};if(i.positionToRelativeParent){var u=r.element.offsetParent.getBoundingClientRect();o.right+=u.width,o.bottom+=u.height}else o.right+=window.innerWidth,o.bottom+=window.innerHeight;return o.width=o.right-o.left,o.height=o.bottom-o.top,n(e,o,r.rect,i)}return{getScrollParent:function(t){t=e.getHTMLElement(t);if(t){var n=t.parentElement;while(n){var r=window.getComputedStyle(n,null);if(/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX))break;n=n.parentElement}return n&&window.getComputedStyle(t).position!=="fixed"?n:document.body}},positionRelativeToElement:function(t,n,r){t=e.getHTMLElement(t),n=e.getHTMLElement(n);if(t&&n){var i={},s=n.getBoundingClientRect();return r.positionToRelativeParent?(i.left=n.offsetLeft,i.top=n.offsetTop):(i.left=s.left,i.top=s.top),i.right=i.left+s.width,i.bottom=i.top+s.height,o(t,{element:n,rect:i},r)}},positionRelativeToPoint:function(n,r,i){n=e.getHTMLElement(n);if(n&&r){var s=t.mergeProperties({cursorWidth:14,cursorHeight:18},i);return o(n,{rect:{left:r.x,top:r.y,right:r.x+s.cursorWidth,bottom:r.y+s.cursorHeight}},i)}},scrollIntoView:function(t,n){t=e.getHTMLElement(t);if(t)if(t.scrollIntoViewIfNeeded)t.scrollIntoViewIfNeeded(!1);else{n||(n=this.getScrollParent(t));var r=t.offsetTop-t.parentNode.offsetTop,i=n.scrollTop;r<i?t.scrollIntoView(!0):r+t.clientHeight>i+n.clientHeight&&t.scrollIntoView(!1)}}}}),define("packages/controls/src/js/virtualPanels/verticalPanel",["jquery","../animation/animationFrame","../core/positioning","../core/domUtility"],function(e,t,n,r){function i(t,n){this.element=t||document.createElement("div"),this.element.classList.add("item-panel"),this.$element=e(this.element),this.viewportElement=this.element,this.collectionView=n,this.spacers=[]}return i.prototype.calculateHeight=function(e){var t=0,n=0,r=0;this.visibleItems=0;for(var i=0;i<e.length;i++){var s=e[i];if(s.isVisible!==!1){r++;if(s.element){if(!s.height||!this.areHeightsValid)s.height=s.element.offsetHeight;s.isInvalid||this.visibleItems++}s.height&&(t++,n+=s.height)}}t&&(this.areHeightsValid=!0,this.areAllItemsRendered=this.visibleItems===r,this.averageHeight=n/t,this.totalHeight=this.measureGroups()+n+(r-t)*this.averageHeight)},i.prototype.calculateHeightRange=function(e,t,n){var r=0;if(this.isReady())for(var i=t;i<=n;i++){var s=e[i];s.isVisible!==!1&&(r+=s.height||this.averageHeight)}return r},i.prototype.calculateItemTop=function(e,t){return this.calculateHeightRange(e,0,t-1)},i.prototype.calculateVisibleItems=function(e,t){this.firstItem=0,this.firstVisibleItem=0,this.lastVisibleItem=e.length-1,this.lastItem=this.lastVisibleItem;if(this.isReady()){var n=this.averageHeight*t,r=n/2,i=this.scrollHandler.scrollTop+this.scrollHandler.clientHeight/2,s=i-r,o=i+r;s<0?(s=0,o=Math.min(this.totalHeight,n)):o>this.totalHeight&&(o=this.totalHeight,s=o-Math.min(this.totalHeight,n));var u=0;for(var a=0;a<e.length;a++){var f=e[a];if(f.isVisible!==!1){u<=this.scrollHandler.scrollTop&&(this.firstVisibleItem=a,u<=s&&(this.firstItem=a)),u<o&&(this.lastItem=a,u<this.scrollHandler.viewportBottom&&(this.lastVisibleItem=a)),u+=f.height||this.averageHeight;if(u>=o)break}}}},i.prototype.fillGaps=function(e){if(!this.averageHeight)return;var t;for(var n=0;n<this.spacers.length;n++)r.detachElement(this.spacers[n]);this.spacers.length=0;var i=0;for(n=0;n<e.length;n++){var s=e[n];s.element?i&&(t=document.createElement("div"),t.style.height=i+"px",i=0,this.spacers.push(t),s.element.parentNode.insertBefore(t,s.element)):i+=s.height||this.averageHeight}i&&(t=document.createElement("div"),t.style.height=i+"px",this.spacers.push(t),this.element.appendChild(t))},i.prototype.getPageAmount=function(){if(this.isReady())return Math.floor(this.scrollHandler.clientHeight/this.averageHeight)-1},i.prototype.isReady=function(){return this.scrollHandler.clientHeight&&this.averageHeight},i.prototype.measureGroups=function(){var e=0,t=this.collectionView.getGroups();if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n];!r.height&&r.headerElement&&(r.height=r.headerElement.offsetHeight),e+=r.height}return e},i.prototype.reset=function(){this.averageHeight=0,this.areHeightsValid=!1},i.prototype.scrollTo=function(e,r,i){var s=e[r];if(s){var o=s[this.elementProperty];if(o){var u=s[this.scrollElementProperty]||o;n.scrollIntoView(u,this.viewportElement),i&&i()}else{var a=parseInt(this.$element.css("padding-top"),10),f=a+this.calculateItemTop(e,r);if(f<this.scrollHandler.scrollTop)this.viewportElement.scrollTop=f;else{var l=f+(s.height||this.averageHeight);l>this.scrollHandler.viewportBottom&&(this.viewportElement.scrollTop=l-this.scrollHandler.clientHeight)}t.throttleByFrame({context:this,method:this.scrollTo,parameters:[e,r,i],canExecute:function(){return s.element}})}}},i.prototype.update=function(e,t){this.calculateHeight(e),this.calculateVisibleItems(e,t)},i}),define("packages/controls/src/js/layout/virtualizedPanel",["jquery","underscore","core","../animation/animationFrame","../core/collectionView","../core/inputHandler","../core/infiniteScrollLoader","../core/utility","../core/domUtility","../virtualPanels/verticalPanel"],function(e,t,n,r,i,s,o,u,a,f){function l(t,r,l){this.$viewportElement=a.getElement(t),this.viewportElement=this.$viewportElement[0],this.isMobile=/phone|tablet/.test(n.PlatformDetector.type()),this.options=e.extend({elementProperty:"element",handleInput:!0,maxBatchSize:50,maxElementCount:500,maxMobileBatchSize:25,maxMobileElementCount:200,useMultiSelection:!0,expandable:!0},l);var c=this.options.scrollableElement||this.viewportElement;this.scrollHandler=new o(c,this.options),this.scrollHandler.on({"change:scroll":this.onScrollChanged,"change:size":this.throttleUpdate},this),u.proxy(this.scrollHandler,this,null,["loadResults"]);var h=this.options.CollectionType||i;this.collectionView=new h(r,this.options.visualProperties),this.options.dataOrganizers&&this.collectionView.setDataOrganizers(l.dataOrganizers);var p=this.options.PanelType||f;this.panel=new p(this.viewportElement,this.collectionView),this.panel.elementProperty=this.options.elementProperty,this.panel.scrollElementProperty=this.options.scrollElementProperty,this.panel.viewportElement=c,this.panel.scrollHandler=this.scrollHandler,this.options.handleInput&&(this.options.getPageAmount=this.panel.getPageAmount.bind(this.panel),this.panel.getRowAmount&&(this.options.getRowAmount=this.panel.getRowAmount.bind(this.panel)),this.inputHandler=new s(this.viewportElement,this.options),this.on("change:focus",this.onFocusChanged,this),u.proxy(this.inputHandler,this,["addToSelection","deselect","focus","getFocused","getSelected","select","toggleSelection"],["change:focus","change:selection","contextmenu:item"])),this.collectionView.on({set:this.onCollectionSet,ready:this.onCollectionBuilt,"add:item":this.throttleUpdate,"change:item":this.onItemChanged,"insert:item":this.throttleUpdate,"move:item":this.onItemMoved,"remove:item":this.onItemRemoved},this),this.firstVisibleItem=-1,this.lastVisibleItem=-1,this.onCollectionBuilt(),this.setOptions()}return l.prototype.calculateRenderableItems=function(e){var t=Math.floor((this.panel.firstVisibleItem+this.panel.lastVisibleItem)/2);this.panel.isReady()||(t=0);var n=t+1,r=t,i,s={},o=0;while(o<=this.maxBatchSize&&(r>=this.panel.firstItem||n<=this.panel.lastItem))r>=this.panel.firstItem&&(i=e[r],i&&!i.element&&(o++,s[r]=!0),r--),n<=this.panel.lastItem&&(i=e[n],i&&!i.element&&(o++,s[n]=!0),n++);return s},l.prototype.createGroupElements=function(){for(var e=0;e<this.groups.length;e++){var t=this.groups[e],n=document.createElement("ul");n.className="group-content expandable",this.expandHandler(n,t),t.headerElement=this.createGroupHeader(t),t.containerElement=n;for(var r=0;r<t.items.length;r++)t.items[r].group=t}},l.prototype.createGroupHeader=function(e){var t;return this.options.createGroupHeader&&(t=a.getHTMLElement(this.options.createGroupHeader(e))),t||(t=document.createElement("h3"),t.textContent=e.name),t.classList.add("group-header"),this.options.expandable&&t.setAttribute("data-expander",""),t},l.prototype.expandHandler=function(n,r){var i=this,s=this.inputHandler.getFocused();r.setItemsVisibility=function(e){var n=this.items;t(n).each(function(t){t.isVisible=e,i.inputHandler.deselect(t),s===t&&i.focus(null)})},r.onExpand=function(e){var t=e.data;t.setItemsVisibility(!0)},r.onCollapse=function(e){var t=e.data;t.setItemsVisibility(!1)},e(n).on("expand",null,r,r.onExpand).on("collapse",null,r,r.onCollapse)},l.prototype.createVisualElements=function(e,t){var n,r;for(var i=this.panel.firstItem;i<=this.panel.lastItem;i++){var s=e[i],o=r;r=s.group?s.group.containerElement:this.panel.element,n&&o!==r&&(o.appendChild(n),n=null);if(s.element)n&&(r.insertBefore(n,s.element),n=null);else if(t[i]){var u=this.createItemContainer(s);u.setAttribute("aria-selected",s.isSelected===!0),u.setAttribute("aria-posinset",i+1),u.setAttribute("aria-setsize",e.length),n||(n=document.createDocumentFragment()),n.appendChild(u),s.element=u,s.isInvalid=!1}}n&&r.appendChild(n)},l.prototype.finishedLoading=function(){this.isLoaded=!0;if(this.focusedItem){var e=this.focusedItem[this.options.elementProperty];e&&(e.tabIndex=0,this.focusedItem=null)}if(this.onLoadedHandlers){for(var t=0;t<this.onLoadedHandlers.length;t++)this.onLoadedHandlers[t].call(this);this.onLoadedHandlers=null}},l.prototype.onCollectionBuilt=function(){var e=this.collectionView.getItems();this.inputHandler&&(this.inputHandler.setItems(e),this.focusedItem=e[0],this.inputHandler.lastFocusedItem=this.focusedItem),this.groups=this.collectionView.getGroups(),this.groups&&this.createGroupElements(),this.isLoaded=!1,this.invalidate(!0)},l.prototype.onCollectionSet=function(){},l.prototype.onFocusChanged=function(e,t){if(!t)return;this.focusedItem=null,this.scrollToItem(this.collectionView.items,t.index,function(){var e=t[this.options.elementProperty];if(!e)return;e.tabIndex=0;if(this.options.focusItems!==!1){if(e.setActive)try{e.setActive()}catch(n){}else e.focus();(!n.sourceEvent||n.sourceEvent.type==="click")&&e.setAttribute("data-focus-hidden","")}}.bind(this))},l.prototype.onItemMoved=function(e,t){t.isInvalid=!0,this.throttleUpdate()},l.prototype.onItemRemoved=function(e,t){this.removeItemElement(t)},l.prototype.onItemChanged=function(e,t){t.isInvalid=!0,this.throttleUpdate()},l.prototype.onScrollChanged=function(e){this.trigger("change:scroll",e,this),this.throttleUpdate()},l.prototype.removeElements=function(e){var t=!1;for(var n=0;n<e.length;n++){var r=e[n],i=n>=this.panel.firstItem&&n<=this.panel.lastItem;if(r.element){if(i){if(!r.isInvalid)continue;t=!0}this.removeItemElement(r)}else i&&(t=!0)}return t},l.prototype.removeItemElement=function(e){e.$element?(e.$element.remove(),e.$element=null):a.detachElement(e.element),e.element=null},l.prototype.scrollToItem=function(e,t,n){this.panel.scrollTo(e,t,n)},l.prototype.throttleUpdate=function(){r.throttleByFrame({context:this,method:this.update,canExecute:function(){return document.body.contains(this.viewportElement)}})},l.prototype.triggerItemRender=function(e,t){var n=[];for(var r in t)n.push(e[r]);n.length&&this.trigger("render:items",{},n)},l.prototype.triggerItemVisibilityChange=function(e){if(this.firstVisibleItem!==this.panel.firstVisibleItem||this.lastVisibleItem!==this.panel.lastVisibleItem){var t=[];for(var n=this.panel.firstVisibleItem;n<=this.panel.lastVisibleItem;n++)(n<this.firstVisibleItem||n>this.lastVisibleItem)&&t.push(e[n]);this.firstVisibleItem=this.panel.firstVisibleItem,this.lastVisibleItem=this.panel.lastVisibleItem,t.length&&this.trigger("change:visibleItems",{},t)}},l.prototype.update=function(){this.scrollHandler.disable();if(this.isInvalid){this.inputHandler&&(this.focusedItem=this.inputHandler.getLastFocused());if(this.forceInvalidation){this.$viewportElement.empty(),this.collectionView.setProperty("element",null),this.forceInvalidation=!1;if(this.groups&&this.groups.length){var t=document.createDocumentFragment();for(var n=0;n<this.groups.length;n++){var r=this.groups[n];t.appendChild(r.headerElement),t.appendChild(r.containerElement)}this.panel.element.appendChild(t)}}else this.collectionView.setProperty("isInvalid",!0);this.panel.reset(),this.isInvalid=!1}var i=this.collectionView.getItems();this.updateItems(i),this.options.createEmptyState&&(this.$emptyStateElement&&(this.$emptyStateElement.remove(),this.$emptyStateElement=null),i.length||(this.$emptyStateElement=e(this.options.createEmptyState()).appendTo(this.panel.element))),this.scrollHandler.enable(),this.finishedLoading()},l.prototype.updateItems=function(e){this.panel.update(e,this.maxElementCount),this.updatePanelSize();var t=this.removeElements(e);if(t){var n=this.calculateRenderableItems(e);this.createVisualElements(e,n),this.triggerItemRender(e,n),this.throttleUpdate()}(t||!this.panel.areAllItemsRendered)&&this.panel.fillGaps(e),this.triggerItemVisibilityChange(e)},l.prototype.updatePanelSize=function(){},l.prototype.getCollectionView=function(){return this.collectionView},l.prototype.invalidate=function(e){this.isInvalid=!0,e!=null&&(this.forceInvalidation=e),this.throttleUpdate()},l.prototype.onLoaded=function(e){e&&(this.isLoaded?e.call(this):this.onLoadedHandlers?this.onLoadedHandlers.push(e):this.onLoadedHandlers=[e])},l.prototype.scrollTo=function(e){var t=this.collectionView.items,n=u.resolveArrayItems(t,e);n&&this.scrollToItem(t,n.index)},l.prototype.setOptions=function(t){e.extend(this.options,t),this.scrollHandler.setOptions(this.options),a.toggleAttribute(this.viewportElement,"aria-multiselectable",this.options.useMultiSelection),this.inputHandler&&this.inputHandler.setOptions({selectionMode:this.options.useMultiSelection?"multi":"single"}),this.isMobile?(this.maxBatchSize=this.options.maxMobileBatchSize,this.maxElementCount=this.options.maxMobileElementCount):(this.maxBatchSize=this.options.maxBatchSize,this.maxElementCount=this.options.maxElementCount),this.invalidate()},n.Events.enableFor(l.prototype),l}),define("packages/controls/src/js/layout/accordionPanel",["jquery","../animation/animator","../core/utility","../core/domUtility","./virtualizedPanel"],function(e,t,n,r,i){function s(t,n,r){i.call(this,t,n,e.extend({createExpandButton:!0},r)),this.viewportElement.classList.add("accordion-panel"),this.panel.$element.on("click",".disclosure",this.onDiscloseButtonClick.bind(this))}return s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype.animateItemCollapse=function(e,t){e.isExpanded=!1;if(!e.element)return;if(!e.contentElement){this.createItemElement(e);return}this.animateItemHeight(e,e.expandedContentHeight,e.collapsedContentHeight,function(){this.createItemElement(e),this.trigger("collapse:item",{sourceEvent:t},e)})},s.prototype.animateItemExpansion=function(e,t){e.isExpanded=!0;if(!e.element)return;if(!e.contentElement){this.createItemElement(e);return}e.height&&this.setDefaultHeights(e.height),e.collapsedContentHeight=e.contentElement.offsetHeight,this.createItemElement(e),e.expandedContentHeight=e.contentElement.offsetHeight,this.animateItemHeight(e,e.collapsedContentHeight,e.expandedContentHeight,function(){this.trigger("expand:item",{sourceEvent:t},e)})},s.prototype.animateItemHeight=function(e,n,r,i){e.animation&&e.animation.finish(),e.animation=t.animate({source:e.contentElement,properties:{name:"height",unitType:"px",from:n,to:r},onFinished:function(){delete e.animation,e.contentElement.style.height="",i.call(this),this.throttleUpdate()}.bind(this)})},s.prototype.createButtonElement=function(e){var t=document.createElement("button");t.className="disclosure containerless";var n=document.createElement("span");return n.className=e?"icon icon-disclosure_up":"icon icon-disclosure_down",t.appendChild(n),t},s.prototype.createItemContainer=function(t){return t.element=document.createElement("div"),t.element.className="panel-item",t.sourceItem.className&&r.addClass(t.element,t.sourceItem.className),t.contentElement=document.createElement("div"),t.contentElement.className="panel-item-content",t.$element=e(t.element),t.$contentElement=e(t.contentElement),t.element.appendChild(t.contentElement),this.createItemElement(t),t.element},s.prototype.createItemElement=function(e){var t;e.isExpanded?(e.element.setAttribute("aria-expanded",!0),t=e.expandedElement||this.options.createExpandedElement):(e.element.setAttribute("aria-expanded",!1),t=e.collapsedElement||this.options.createCollapsedElement),e.$contentElement.empty().append(n.resolveFunction(t,e)),this.options.createExpandButton&&e.sourceItem.showExpanderButton!==!1&&e.contentElement.appendChild(this.createButtonElement(e.isExpanded))},s.prototype.onDiscloseButtonClick=function(e){var t=e.currentTarget;while(t&&t.parentNode!==this.panel.element)t=t.parentNode;if(t){var n=this.collectionView.findByProperty("element",t);n.isExpanded?this.collapseItem(n):this.expandItem(n)}e.stopPropagation()},s.prototype.setDefaultHeights=function(e){for(var t=0;t<this.collectionView.items.length;t++){var n=this.collectionView.items[t];n.height||(n.height=e)}},s.prototype.collapseItem=function(e){var t=n.resolveArrayItems(this.collectionView.items,e);t&&t.isExpanded&&this.animateItemCollapse(t)},s.prototype.expandItem=function(e){var t=n.resolveArrayItems(this.collectionView.items,e);t&&!t.isExpanded&&this.animateItemExpansion(t)},s}),define("packages/controls/src/js/buttons/customButtonPanel",["jquery","core"],function(e,t){function r(t,n){this.element=t,this.buttons=n||[],e(this.element).on("click","button",this.onButtonClick.bind(this)),this.initialize()}var n={cancel:"controls.cancelButtonLabel",close:"controls.closeButtonLabel",ok:"controls.okButtonLabel",no:"controls.noButtonLabel",yes:"controls.yesButtonLabel"};return r.prototype.createButtonElement=function(e){var t=document.createElement("button");return t.type="button",e.className&&(t.className=e.className),e.id&&(t.id=e.id),e.isDisabled&&(t.disabled=!0,t.setAttribute("aria-disabled",!0)),e.isPrimary&&t.classList.add("primary"),e.text&&(t.textContent=this.translateText(e.text)),t},r.prototype.getButtonByElement=function(e){for(var t=0;t<this.buttons.length;t++){var n=this.buttons[t];if(n.element===e)return n}},r.prototype.initialize=function(){typeof this.buttons=="string"?this.buttons=this.parseButtonData():Array.isArray(this.buttons)||(this.buttons=[this.buttons]);var t=!1;for(var n=0;n<this.buttons.length;n++)if(this.buttons[n].isPrimary){t=!0;break}var r=document.createDocumentFragment();for(n=0;n<this.buttons.length;n++){var i=this.buttons[n];if(!t&&i.isPrimary==null){var s=i.text&&i.text.toLowerCase();if(s==="close"||s==="ok"||s==="yes")t=!0,i.isPrimary=!0}i.element=this.createButtonElement(i),i.$element=e(i.element),r.appendChild(i.element)}this.element.appendChild(r)},r.prototype.onButtonClick=function(e){var t=this.getButtonByElement(e.currentTarget);if(t){var n={cancel:!1,sourceEvent:e};t.onClick&&t.onClick(e,t)===!1&&(n.cancel=!0),this.trigger("click:button",n,t)}},r.prototype.parseButtonData=function(){var e=[],t=this.buttons.split("|");for(var n=0;n<t.length;n++){var r=t[n];r&&e.push({text:r})}return e},r.prototype.translateText=function(e){var r=n[e.toLowerCase()];return r?t.Strings.translate(r):e},t.Events.enableFor(r.prototype),r}),define("packages_controls_src_content_templates_actionDialog_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="action-dialog">\n    <div class="button-panel"></div>\n    <div class="action-cancel">'+f((o=n.i18n||t&&t.i18n,u={hash:{},data:i},o?o.call(t,"controls.cancelButtonLabel",u):a.call(t,"i18n","controls.cancelButtonLabel",u)))+"</div>\n</div>",s}}),define("packages/controls/src/js/dialogs/actionDialog",["jquery","core","../animation/animator","../buttons/customButtonPanel","./modalHelper","template!../../content/templates/actionDialog.html","../core/domUtility"],function(e,t,n,r,i,s,o){function u(e){this.element=o.renderTemplate(s),this.buttonPanel=new r(this.element.querySelector(".button-panel"),e&&e.buttons),this.buttonPanel.on("click:button",this.onButtonClick,this)}return u.prototype.onButtonClick=function(e,t){this.trigger("click:button",e,t),e.cancel?e.sourceEvent.stopPropagation():this.tryClose(e.sourceEvent)},u.prototype.onTouchStart=function(e){var t=o.getTouchFromEvent(e,"targetTouches");t&&!o.findParent(t.target,"button")&&(this.initialTouch={identifier:t.identifier})},u.prototype.onTouchEnd=function(e){var t=o.getTouchById(e,"changedTouches",this.initialTouch);t&&!o.hasTouchMoved(this.initialTouch,t)&&this.tryClose(e)},u.prototype.onWindowClick=function(e){o.findParent(e.target,"button")||this.tryClose(e)},u.prototype.show=function(){this.isClosing||(e(document.body).on("touchstart.actionDialog",this.onTouchStart.bind(this)).on("touchend.actionDialog",this.onTouchEnd.bind(this)).on("click.actionDialog",this.onWindowClick.bind(this)),i.add(this,!1),n.animate({duration:500,source:this.element,properties:{name:"bottom",from:-100,to:0,unitType:"%"}}),this.trigger("show",{},this))},u.prototype.tryClose=function(t){if(!this.isClosing){var r={sourceEvent:t,cancel:!1};this.trigger("close",r,this);if(r.cancel)return;this.isClosing=!0,e(document.body).off("touchstart.actionDialog").off("touchend.actionDialog").off("click.actionDialog"),i.remove(this,!1),n.animate({duration:500,source:this.element,properties:{name:"bottom",to:-100,from:0,unitType:"%"},onFinished:function(){o.detachElement(this.element)}.bind(this)})}},u.prototype.close=function(){this.tryClose()},u.prototype.getButtons=function(){return this.buttonPanel&&this.buttonPanel.buttons},u.show=function(e){var t=new u(e);return setTimeout(t.show.bind(t),0),t},t.Events.enableFor(u.prototype),u}),define("packages_controls_src_content_templates_actionSheet_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<div class="action-sheet ',(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'">\n    <div class="action-sheet-header">\n        <div class="action-sheet-header-row">\n            <button type="button" class="containerless cancel-button">\n                <span class="icon icon-24 icon-disclosure_left_triangle" aria-hidden="true"></span>\n            </button>\n            <div class="title-container"><span>',(u=n.title)?o=u.call(t,{hash:{},data:i}):(u=t&&t.title,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</span></div>\n            <button class="submit-button primary">',(u=n.submitButtonText)?o=u.call(t,{hash:{},data:i}):(u=t&&t.submitButtonText,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</button>\n        </div>\n    </div>\n    <div class="content-container"></div>\n</div>',s}}),define("packages/controls/src/js/dialogs/actionSheet",["jquery","core","../core/positioning","template!../../content/templates/actionSheet.html","../core/domUtility"],function(e,t,n,r,i){function s(n){this.options=e.extend({submitButtonText:t.Strings.translate("controls.submitButtonText")},n),this.element=i.renderTemplate(r,this.options),this.$element=e(this.element)}return s.prototype.show=function(){if(!this.isClosing){this.$element.find(".content-container").empty().append(this.options.content),document.body.appendChild(this.element),this.$element.find(".cancel-button").on("click",{eventName:"cancel"},this.triggerEvent.bind(this));var t=this.element.querySelector(".submit-button");this.options.showSubmitButton===!1&&(t.style.visibility="hidden"),e(t).on("click",{eventName:"submit"},this.triggerEvent.bind(this));if(this.options.focusSelector){var r=this.element.querySelector(this.options.focusSelector);if(r){var i=this.element.querySelector(".content-container");r.focus(),setTimeout(function(){r.focus(),n.scrollIntoView(r,i)},200)}}this.trigger("show",{},this)}},s.prototype.triggerEvent=function(e){var t={};this.trigger(e.data.eventName,t,this),t.cancel!==!0&&this.tryClose(e)},s.prototype.tryClose=function(e){if(this.isClosing)return;var t={sourceEvent:e,cancel:!1};this.trigger("close",t,this);if(t.cancel)return;this.isClosing=!0,clearTimeout(this.showTimeout),this.$element.remove()},s.prototype.close=function(){this.tryClose()},s.prototype.getElement=function(){return this.$element},s.show=function(e){var t=new s(e);return t.showTimeout=setTimeout(t.show.bind(t),0),t},t.Events.enableFor(s.prototype),s}),define("packages_controls_src_content_templates_alertDialogView_html",[],function(){return function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\r\n    <span class="alert-icon ',(s=n.iconClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconClass,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" aria-hidden="true"></span>\r\n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="alert-dialog-content">\r\n    ',o=n["if"].call(t,t&&t.showIcon,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\r\n    <div class="alert-message"></div>\r\n</div>\r\n<div class="alert-dialog-footer-content">\r\n    <div class="checkbox inline alert-show-again-control">\r\n        <label class="alert-show-again-label">\r\n            <input type="checkbox" class="alert-show-again-checkbox">\r\n            '+l((u=n.i18n||t&&t.i18n,a={hash:{},data:i},u?u.call(t,"controls.showAgainLabel",a):h.call(t,"i18n","controls.showAgainLabel",a)))+"\r\n        </label>\r\n    </div>\r\n</div>",s}}),define("packages/controls/src/js/dragDrop/resizer",["jquery","../core/utility"],function(e,t){return{Grips:{left:1,right:2,top:4,bottom:8,vertical:3,horizontal:12,corners:16,all:31},Orientation:{ZeroDegrees:1,NinetyDegrees:2,OneEightyDegrees:3,TwoSeventyDegrees:4},clearResizable:function(t){t&&e(t).off("drag:begin.resizer").off("drag:update.resizer").off("drag:end.resizer").children(".resize-grip").remove()},createGrips:function(t,n){var r=n.grips&this.Grips.top,i=n.grips&this.Grips.left,s=n.grips&this.Grips.right,o=n.grips&this.Grips.bottom,u=n.grips&this.Grips.corners,a,f=[],l=n.gripSize+"px",c=-n.gripSize/2+"px",h={className:"resize-grip resize-grip-left",style:{left:c,width:l}},p={className:"resize-grip resize-grip-top",style:{top:c,height:l}},d={className:"resize-grip resize-grip-right",style:{right:c,width:l}},v={className:"resize-grip resize-grip-bottom",style:{bottom:c,height:l}},m={className:"resize-grip resize-grip-top-left",style:{top:c,left:c,width:l,height:l}},g={className:"resize-grip resize-grip-top-right",style:{top:c,right:c,width:l,height:l}},y={className:"resize-grip resize-grip-bottom-right",style:{bottom:c,right:c,width:l,height:l}},b={className:"resize-grip resize-grip-bottom-left",style:{bottom:c,left:c,width:l,height:l}},w=n.orientation;r&&(a={className:p.className,style:p.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-n":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-e":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-s":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-w"),f.push(a)),s&&(a={className:d.className,style:d.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-e":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-s":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-w":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-n"),f.push(a)),o&&(a={className:v.className,style:v.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-s":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-w":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-n":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-e"),f.push(a)),i&&(a={className:h.className,style:h.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-w":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-n":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-e":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-s"),f.push(a));if(u||r&&i)a={className:m.className,style:m.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-nw":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-ne":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-se":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-sw"),f.push(a);if(u||o&&i)a={className:b.className,style:b.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-sw":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-nw":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-ne":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-se"),f.push(a);if(u||r&&s)a={className:g.className,style:g.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-ne":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-se":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-sw":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-nw"),f.push(a);if(u||o&&s)a={className:y.className,style:y.style},w===this.Orientation.ZeroDegrees?a.className+=" resize-grip-cursor-se":w===this.Orientation.NinetyDegrees?a.className+=" resize-grip-cursor-sw":w===this.Orientation.OneEightyDegrees?a.className+=" resize-grip-cursor-nw":w===this.Orientation.TwoSeventyDegrees&&(a.className+=" resize-grip-cursor-ne"),f.push(a);var E=document.createDocumentFragment();for(var S=0;S<f.length;S++){var x=document.createElement("div");x.setAttribute("data-draggable",!0),a=f[S],x.className=a.className;for(var T in a.style)x.style[T]=a.style[T];E.appendChild(x)}e(t).on("drag:begin.resizer",".resize-grip",this.onThumbDragBegin.bind(this,n)).on("drag:update.resizer",".resize-grip",this.onThumbDrag.bind(this)).on("drag:end.resizer",".resize-grip",this.onThumbDragEnd).append(E)},onThumbDragBegin:function(t,n,r){var i=n.currentTarget.parentNode,s=i.offsetParent;r.cursor=e(n.currentTarget).css("cursor"),r.updateVisual=!1,r.orientation=t.orientation,r.scale=t.scale,r.resizer={options:t,top:i.offsetTop,left:i.offsetLeft,width:i.offsetWidth,height:i.offsetHeight,parentWidth:s.clientWidth,parentHeight:s.clientHeight},e(i).trigger("resize:begin",r),n.stopImmediatePropagation()},normalizeMouseDelta:function(e,t,n,r){e/=r,t/=r;if(n===this.Orientation.ZeroDegrees)return{deltaX:e,deltaY:t};if(n===this.Orientation.TwoSeventyDegrees)return{deltaX:-t,deltaY:e};if(n===this.Orientation.NinetyDegrees)return{deltaX:t,deltaY:-e};if(n===this.Orientation.OneEightyDegrees)return{deltaX:-e,deltaY:-t}},onThumbDrag:function(n,r){var i=n.currentTarget.className,s=i.indexOf("top")>=0,o=i.indexOf("left")>=0,u=i.indexOf("right")>=0,a=i.indexOf("bottom")>=0,f=r.mousePosition.x-r.initialPosition.x,l=r.mousePosition.y-r.initialPosition.y,c=this.normalizeMouseDelta(f,l,r.orientation,r.scale),h,p;o?h=r.resizer.width-c.deltaX:u&&(h=r.resizer.width+c.deltaX),s?p=r.resizer.height-c.deltaY:a&&(p=r.resizer.height+c.deltaY);var d,v=n.currentTarget.parentNode;h&&(h=t.clamp(r.resizer.options.minWidth,r.resizer.options.maxWidth,h),d=r.resizer.left,o&&(d+=r.resizer.width-h,d<0&&(h+=d,d=0),v.style.left=d+"px"),h=Math.min(h,r.resizer.parentWidth-d),v.style.width=h+"px"),p&&(p=t.clamp(r.resizer.options.minHeight,r.resizer.options.maxHeight,p),d=r.resizer.top,s&&(d+=r.resizer.height-p,d<0&&(p+=d,d=0),v.style.top=d+"px"),p=Math.min(p,r.resizer.parentHeight-d),v.style.height=p+"px"),(h||p)&&e(v).trigger("resize:update",r),n.stopImmediatePropagation()},onThumbDragEnd:function(t,n){e(t.currentTarget.parentNode).trigger("resize:end",n),t.stopImmediatePropagation()},setResizable:function(t,n){if(t){n=e.extend({orientation:this.Orientation.ZeroDegrees,scale:1,gripSize:5,grips:this.Grips.all,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0},n);var r=n.gripSize*2;n.minHeight=Math.max(r,n.minHeight),n.minWidth=Math.max(r,n.minWidth),this.createGrips(t,n)}}}}),define("packages/controls/src/js/rendering/visualItemFactory",["jquery","core","../core/domUtility"],function(e,t,n){function r(e){var t=document.createElement("span");return t.innerHTML=e,t.children.length===1&&t.childNodes.length===1?t.firstElementChild:t}function i(n){if(typeof n=="function")return n.prototype instanceof t.View?h:o;if(n.nodeType===1)return u;if(n instanceof t.View)return c;if(n.render)return l;if(n instanceof e)return a;if(typeof n=="string")return f}function s(){n.detachElement(this.element)}function o(e,t){this.method=e,this.render(t)}function u(e){this.element=e}function a(e){this.$element=e,this.element=e[0]}function f(e){this.element=r(e)}function l(e,t){this.template=e,this.element=r(e.render(t))}function c(e,t){this.view=e,this.view.render(t),this.element=this.view.element}function h(e,t){c.call(this,new e({item:t}),t)}return o.prototype.render=function(e){var t=this.method(e),n=i(t);this.item=new n(t,e),this.item.render(),this.element=this.item.element},o.prototype.remove=function(){this.item.remove()},u.prototype.remove=s,u.prototype.render=e.noop,a.prototype.render=e.noop,a.prototype.remove=function(){this.$element.remove()},f.prototype.remove=s,f.prototype.render=e.noop,l.prototype.remove=s,l.prototype.render=function(e){this.element=r(this.template.render(e))},c.prototype.remove=function(){this.view.remove()},c.prototype.render=function(e){this.view.render(e)},h.prototype.remove=c.prototype.remove,h.prototype.render=c.prototype.render,{createItem:function(e,t){if(e){var n=i(e);return new n(e,t)}},createItemFactory:function(e){if(e){var t=i(e);return{createItem:function(e,n){return new t(e,n)}}}}}}),define("packages_controls_src_content_templates_modalDialogView_html",[],function(){return function(e,t,n,r,i){function l(e,t){return'\r\n    <div class="modal-dialog-header">\r\n        <div class="modal-dialog-header-content">\r\n            <div class="modal-dialog-title"></div>\r\n        </div>\r\n    </div>\r\n    '}function c(e,t){return'\r\n    <div class="modal-dialog-footer">\r\n        <div class="modal-dialog-footer-content">\r\n            <div class="modal-dialog-footer-panel"></div>\r\n            <div class="modal-dialog-button-panel"></div>\r\n        </div>\r\n    </div>\r\n    '}function h(e,t){var r="",i,s;return r+='\r\n    <button class="modal-dialog-close containerless" aria-label="'+a((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"controls.closeButtonLabel",s):u.call(e,"i18n","controls.closeButtonLabel",s)))+'" type="button">\r\n        <span class="icon-close" aria-hidden="true"></span>\r\n    </button>\r\n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;s+='<div class="modal-dialog" tabindex="0" data-resizable role="dialog">\r\n    ',o=n["if"].call(t,t&&t.showHeader,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\r\n    <div class="modal-dialog-body"></div>\r\n    ',o=n["if"].call(t,t&&t.showFooter,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+="\r\n    ",o=n["if"].call(t,t&&t.showCloseButton,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;return s+="\r\n</div>",s}}),define("packages/controls/src/js/dialogs/modalDialog",["jquery","core","../animation/animator","../buttons/customButtonPanel","./modalHelper","../dragDrop/resizer","../core/utility","../core/domUtility","../rendering/visualItemFactory","template!../../content/templates/modalDialogView.html"],function(e,t,n,r,i,s,o,u,a,f){function h(t){if(t.length){var n=t.children();return n.length===1?n.eq(0):e(n)}}function p(n){this.options=e.extend({buttons:"close",closeOnEscape:!0,isModal:!0,isResizable:!0,maxInitialHeight:Infinity,maxInitialWidth:600,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:200,showCloseButton:!0,showFooter:!0,showHeader:!0},n),this.element=u.renderTemplate(f,this.options),this.$element=e(this.element),this.bodyElement=this.element.querySelector(".modal-dialog-body"),this.$element.on("click",".modal-dialog-close",this.tryClose.bind(this));var i=this.element.querySelector(".modal-dialog-button-panel");i&&(this.buttonPanel=new r(i,this.options.buttons),this.listenTo(this.buttonPanel,"click:button",this.onButtonClick)),this.setTitle(this.options.title),this.setContent(this.options.content),this.setFooter(this.options.footer),this.isSmallForm=t.PlatformDetector.type()==="phone",this.verticalOffset=.5,this.horizontalOffset=.5}var l=16,c=50;return p.prototype.initializeHeader=function(){var t=this.element.querySelector(".modal-dialog-header");if(t){this.headerHeight=t.offsetHeight;if(!this.options.showFullScreen||!this.isSmallForm)t.setAttribute("data-draggable",!0),e(t).on("drag:begin",this.onDragBegin.bind(this)).on("drag:end",this.onPositionChanged.bind(this))}else this.element.classList.add("no-header"),this.headerHeight=0},p.prototype.initializeFooter=function(){var e=this.element.querySelector(".modal-dialog-footer");if(e){this.footerHeight=e.offsetHeight;if(!this.options.showFullScreen||!this.isSmallForm)e.style.width="auto",e.style.display="inline-block",this.options.minWidth=Math.max(this.options.minWidth,e.offsetWidth),this.options.minHeight=Math.max(this.options.minHeight,this.headerHeight+this.footerHeight+c),e.style.display="",e.style.width=""}else this.footerHeight=0,this.options.minHeight=Math.max(this.options.minHeight,this.headerHeight+c)},p.prototype.handleBackgroundClick=function(){this.onBackgroundClick=function(e){this.element.contains(e.target)||this.tryClose(e)}.bind(this),e(document.body).on("click",this.onBackgroundClick)},p.prototype.handleEscapeKeyDown=function(){this.onEscapeKeyDown=function(e){e.which===27&&this.tryClose(e)}.bind(this),e(document.body).on("keydown",this.onEscapeKeyDown)},p.prototype.onButtonClick=function(e,t){this.trigger("click:button",e,t),!e.cancel&&t.close!==!1&&this.tryClose(e.sourceEvent)},p.prototype.onDragBegin=function(e,t){var n=t.initialEvent.target;t.visualElement=this.element,u.findParent(n,"button")&&(t.cancel=!0)},p.prototype.onPositionChanged=function(){var e=parseInt(this.element.style.left,10)||0,t=parseInt(this.element.style.top,10)||0;this.options.width=this.element.offsetWidth,this.options.height=this.element.offsetHeight;var n=this.element.parentNode;this.verticalOffset=t/(n.clientHeight-this.options.height),this.horizontalOffset=e/(n.clientWidth-this.options.width)},p.prototype.onResize=function(){this.bodyElement.style.height=this.element.clientHeight-this.headerHeight-this.footerHeight+"px",u.invokeResize(this.bodyElement)},p.prototype.onTabDown=function(e){if(e.which===9)return e.shiftKey?u.focusPreviousElement(e.currentTarget,!0):u.focusNextElement(e.currentTarget,!0),!1},p.prototype.performLayout=function(){var e=this.element.parentNode,t=e.clientWidth,n=e.clientHeight,r,i;this.isShown?(r=this.options.maxWidth,i=this.options.maxHeight):(r=this.options.maxInitialWidth,i=this.options.maxInitialHeight),this.isSmallForm?(r=Math.min(r,t-l*2),i=Math.min(i,n-l*2)):(r=Math.min(r,t),i=Math.min(i,n)),this.resetSizes(),this.element.style.display="inline-block";var s=this.options.width||this.element.offsetWidth;s=o.clamp(this.options.minWidth,r,s),this.element.style.width=s+"px";var u=this.options.height||this.element.offsetHeight;u=o.clamp(this.options.minHeight,i,u),this.element.style.height=u+"px",this.element.style.display="";var a=(t-s)*this.horizontalOffset,f=(n-u)*this.verticalOffset;this.element.style.left=Math.floor(Math.max(0,a))+"px",this.element.style.top=Math.floor(Math.max(0,f))+"px",this.onResize()},p.prototype.resetSizes=function(){this.element.style.top="",this.element.style.left="",this.element.style.width="",this.element.style.height="",this.bodyElement.style.height=""},p.prototype.setContentTo=function(t,n){var r=this.element.querySelector(t);r&&(e(r).empty(),n&&r.appendChild(a.createItem(n).element))},p.prototype.show=function(){if(this.isClosing)return;this.options.showFullScreen&&this.isSmallForm?(this.element.classList.add("full-screen"),document.body.appendChild(this.element),this.$element.on("resize",this.onResize.bind(this)),this.initializeHeader(),this.initializeFooter(),this.onResize()):(this.options.isModal?(this.isModal=!0,i.add(this),this.$element.on("keydown",this.onTabDown.bind(this))):(this.element.insertBefore(i.createIFrameFixElement(),this.element.firstChild),document.body.appendChild(this.element)),this.initializeHeader(),this.initializeFooter(),this.performLayout(),this.$element.on("resize",this.performLayout.bind(this)),this.options.isResizable&&(s.setResizable(this.$element,{minHeight:this.options.minHeight,minWidth:this.options.minWidth,maxHeight:this.options.maxHeight,maxWidth:this.options.maxWidth}),this.$element.on("resize:update",this.onResize.bind(this)).on("resize:end",this.onPositionChanged.bind(this))),this.options.closeOnBackgroundClick&&this.handleBackgroundClick(),this.options.closeOnEscape&&this.handleEscapeKeyDown()),this.isShown=!0,this.isModal||n.fadeIn(this.element),this.element.focus(),this.trigger("show",{},this)},p.prototype.tryClose=function(t){if(this.isClosing)return;var r={sourceEvent:t,cancel:!1};this.trigger("close",r,this);if(r.cancel)return;this.isClosing=!0,this.onBackgroundClick&&e(document.body).off("click",this.onBackgroundClick),this.onEscapeKeyDown&&e(document.body).off("keydown",this.onEscapeKeyDown);if(this.isModal){i.remove(this);if(!i.modalDialogQueue.length)return}n.fadeOutAndRemove(this.element)},p.prototype.close=function(){this.tryClose()},p.prototype.getButtons=function(){return this.buttonPanel&&this.buttonPanel.buttons},p.prototype.getContent=function(){return h(this.$element.find(".modal-dialog-body"))},p.prototype.getFooter=function(){return h(this.$element.find(".modal-dialog-footer-panel"))},p.prototype.getTitle=function(){return h(this.$element.find(".modal-dialog-title"))},p.prototype.invalidate=function(){this.options.showFullScreen&&this.isSmallForm?this.onResize():this.performLayout()},p.prototype.setContent=function(e){this.setContentTo(".modal-dialog-body",e)},p.prototype.setFooter=function(e){this.setContentTo(".modal-dialog-footer-panel",e)},p.prototype.setOptions=function(t){e.extend(this.options,t),this.invalidate()},p.prototype.setTitle=function(e){this.setContentTo(".modal-dialog-title",e)},p.show=function(e){var t=new p(e);return setTimeout(t.show.bind(t),0),t},t.Events.enableFor(p.prototype),p}),define("packages/controls/src/js/dialogs/alertDialog",["jquery","core","template!../../content/templates/alertDialogView.html","./modalDialog","../core/domUtility","../rendering/visualItemFactory"],function(e,t,n,r,i,s){return{show:function(t){var o=e.extend({isResizable:!1,showAgain:!0,showIcon:!0,showRememberCheckbox:!1,type:"error"},t),u=document.createElement("div");u.innerHTML=n.render({showIcon:o.showIcon,iconClass:i.getIconClassFromAlertType(o.type)}),o.content=u.querySelector(".alert-dialog-content");var a=s.createItem(o.message);a&&o.content.querySelector(".alert-message").appendChild(a.element);var f;if(o.showRememberCheckbox){var l=u.querySelector(".alert-dialog-footer-content");f=l.querySelector(".alert-show-again-checkbox"),o.footer=l}var c=r.show(o);return f&&(c.showAgain=o.showAgain,f.checked=!c.showAgain,f.addEventListener("change",function(e){c.showAgain=!e.currentTarget.checked})),c.element.setAttribute("role","alertdialog"),c}}}),define("packages_controls_src_content_templates_alertInlineView_html",[],function(){return function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+="\r\n    <span class='alert-icon ",(s=n.iconClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconClass,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'\' aria-hidden="true"></span>\r\n    ',r}function p(e,t){var r="",i,s;return r+="\r\n        <a class='alert-info-link'>"+f((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"controls.moreInfoLabel",s):l.call(e,"i18n","controls.moreInfoLabel",s)))+"</a>\r\n        ",r}function d(e,t){return"\r\n            <div class='alert-button-panel'></div>\r\n            "}function v(e,t){var r="",i,s;return r+="\r\n            <div class='checkbox inline alert-show-again-control'>\r\n                <label class='alert-show-again-label'>\r\n                    <input type='checkbox' class='alert-show-again-checkbox'>\r\n                    "+f((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"controls.showAgainLabel",s):l.call(e,"i18n","controls.showAgainLabel",s)))+"\r\n                </label>\r\n            </div>\r\n            ",r}function m(e,t){return"\r\n    <button class='alert-close-button' type=\"button\">\r\n        <span class='icon-close' aria-hidden=\"true\"></span>\r\n    </button>\r\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<div class="alert alert-inline ',(u=n.alertClass)?o=u.call(t,{hash:{},data:i}):(u=t&&t.alertClass,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+" ",(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'">\r\n    ',o=n["if"].call(t,t&&t.showIcon,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;s+="\r\n    <div class='alert-content'>\r\n        <div class='alert-message-container-outer'>\r\n            <div class='alert-message-container'>\r\n                <span class='alert-message'>",(u=n.message)?o=u.call(t,{hash:{},data:i}):(u=t&&t.message,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</span>\r\n            </div>\r\n        </div>\r\n        ",o=n["if"].call(t,t&&t.showDetailsLink,{hash:{},inverse:c.noop,fn:c.program(3,p,i),data:i});if(o||o===0)s+=o;s+="\r\n        <div class='alert-actions-container'>\r\n            ",o=n["if"].call(t,t&&t.buttonPanel,{hash:{},inverse:c.noop,fn:c.program(5,d,i),data:i});if(o||o===0)s+=o;s+="\r\n            ",o=n["if"].call(t,t&&t.showRememberCheckbox,{hash:{},inverse:c.noop,fn:c.program(7,v,i),data:i});if(o||o===0)s+=o;s+="\r\n        </div>\r\n    </div>\r\n    ",o=n["if"].call(t,t&&t.showCloseButton,{hash:{},inverse:c.noop,fn:c.program(9,m,i),data:i});if(o||o===0)s+=o;return s+="\r\n</div>",s}}),define("packages_controls_src_content_templates_alertFloatingView_html",[],function(){return function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n    <span class='alert-icon ",(s=n.iconClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconClass,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'\' aria-hidden="true"></span>\n    ',r}function h(e,t){return"\n    <button class='alert-close-button' type=\"button\">\n        <span class='icon-close' aria-hidden=\"true\"></span>\n    </button>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div class="alert alert-floating ',(u=n.alertClass)?o=u.call(t,{hash:{},data:i}):(u=t&&t.alertClass,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+" ",(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'">\n    ',o=n["if"].call(t,t&&t.showIcon,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n    <span>",(u=n.message)?o=u.call(t,{hash:{},data:i}):(u=t&&t.message,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</span>\n    <a class='alert-undo-link' href=\"#\">",(u=n.undoLinkText)?o=u.call(t,{hash:{},data:i}):(u=t&&t.undoLinkText,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</a>\n    ",o=n["if"].call(t,t&&t.showCloseButton,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;return s+="\n</div>",s}}),define("packages/controls/src/js/popups/pointer",["../core/utility"],function(e){function t(e,t){this.pointerElement=document.createElement("span"),this.pointerShadowElement=document.createElement("span"),this.padding=t||16,this.parentElement=e,this.parentElement.insertBefore(this.pointerElement,this.parentElement.firstChild),this.parentElement.insertBefore(this.pointerShadowElement,this.parentElement.firstChild)}return t.prototype.calculatePosition=function(t,n){this.pointerElement.className="pointer-"+n,this.pointerShadowElement.className="pointer-shadow-"+n;var r=t.getBoundingClientRect(),i=this.parentElement.getBoundingClientRect(),s,o,u;switch(n){case"top":case"bottom":s=(i.left+i.right)/2,o=(r.left+r.right)/2,u=i.width/2-(s-o),u=Math.floor(e.clamp(this.padding,i.width-this.padding,u))+"px",this.pointerElement.style.left=u,this.pointerShadowElement.style.left=u;break;case"left":case"right":s=(i.top+i.bottom)/2,o=(r.top+r.bottom)/2,u=i.height/2-(s-o),u=Math.floor(e.clamp(this.padding,i.height-this.padding,u))+"px",this.pointerElement.style.top=u,this.pointerShadowElement.style.top=u}},t}),define("packages/controls/src/js/popups/popup",["jquery","core","../animation/animator","./pointer","../core/positioning","../core/domUtility"],function(e,t,n,r,i,s){function o(t,n){this.options=e.extend({centerHorizontallyOnSource:!0,delay:500},n),this.$sourceElement=t,this.$sourceElement&&this.$sourceElement.length&&(this.sourceElement=this.$sourceElement[0])}return o.prototype.close=function(){this.isClosing||(this.isClosing=!0,clearTimeout(this.timeoutId),clearInterval(this.pollingId),n.fadeOutAndRemove(this.element,1,function(){this.options.detachContent&&this.container&&s.detachElement(this.container),this.trigger("closed",{},this)}.bind(this)),this.onBackgroundClick&&e(document.body).off("mousedown",this.onBackgroundClick).off("touchstart",this.onBackgroundClick),this.onEscapeKeyDown&&e(document.body).off("keydown",this.onEscapeKeyDown))},o.prototype.getEffectiveValue=function(e,t){var n=this.options[e];if(n||!this.sourceElement)return n;var r=this.sourceElement;while(r&&r.getAttribute){n=r.getAttribute(t);if(n!=null)return n;r=r.parentNode}},o.prototype.handleBackgroundClick=function(){this.onBackgroundClick=function(e){if(!this.element.contains(e.target)&&document.body.contains(e.target)){if(this.sourceElement&&this.sourceElement.contains(e.target))return;this.close()}}.bind(this),e(document.body).on("mousedown",this.onBackgroundClick).on("touchstart",this.onBackgroundClick)},o.prototype.handleEscapeKeyDown=function(){this.onEscapeKeyDown=function(e){e.which===27&&(this.close(),this.sourceElement&&this.sourceElement.focus())}.bind(this),e(document.body).on("keydown",this.onEscapeKeyDown)},o.prototype.onShown=function(){if(!this.isClosing){if(!this.verifySource()){this.close();return}this.options.showPointer&&(this.pointer=new r(this.element,this.options.pointerPadding));var e;this.options.positionToRelativeParent&&this.sourceElement&&(e=this.sourceElement.offsetParent),e||(e=document.body),this.options.left==null&&(this.options.left=this.options.mouseLeft),this.options.top==null&&(this.options.top=this.options.mouseTop),e.appendChild(this.element),this.updatePosition(),n.fadeIn(this.element),this.sourceElement&&(this.pollingId=setInterval(this.verifyPosition.bind(this),100))}},o.prototype.show=function(){this.timeoutId=setTimeout(this.onShown.bind(this),this.options.delay)},o.prototype.updatePosition=function(){if(this.isClosing)return;if(!this.options.isPositioned){var e;if(this.options.source==="element")this.options.centerHorizontally=this.options.centerHorizontallyOnSource,e=i.positionRelativeToElement(this.element,this.sourceElement,this.options);else{this.options.centerHorizontally=!1;var t={x:this.options.left,y:this.options.top};e=i.positionRelativeToPoint(this.element,t,this.options)}if(e.maxHeight&&this.container){var n=e.maxHeight-(this.element.offsetHeight-this.element.clientHeight);this.container.style.maxHeight=n+"px"}this.pointer&&this.pointer.calculatePosition(this.sourceElement,e.direction)}else this.pointer&&this.pointer.calculatePosition(this.sourceElement,this.options.direction)},o.prototype.verifyPosition=function(){this.verifySource()?this.updatePosition():this.close()},o.prototype.verifySource=function(){if(this.sourceElement&&this.sourceElement!==document.body)if(!document.body.contains(this.sourceElement)||this.sourceElement.offsetWidth<=0&&this.sourceElement.offsetHeight<=0)return!1;return!0},t.Events.enableFor(o.prototype),o}),define("packages/controls/src/js/popups/tooltip",["jquery","./popup","../core/domUtility"],function(e,t,n){function r(r,i){t.call(this,n.getElement(r),e.extend({centerVertically:!0,pointerPadding:8,sourcePadding:2},i)),this.sourceElement.title&&(this.options.title=this.sourceElement.title,this.sourceElement.title=""),this.$sourceElement.on("mousemove.tooltip",this.onMouseMove.bind(this)).on("mouseleave.tooltip",this.onMouseLeave.bind(this))}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.close=function(){this.isClosing||(t.prototype.close.call(this),this.$sourceElement.off("mousemove.tooltip").off("mouseleave.tooltip"),this.options.title&&(this.sourceElement.title=this.options.title))},r.prototype.onMouseMove=function(e){this.options.mouseLeft=e.pageX,this.options.mouseTop=e.pageY},r.prototype.onMouseLeave=function(){this.close()},r.prototype.onShown=function(){this.$sourceElement.off("mousemove.tooltip"),this.options.source=this.getEffectiveValue("source","data-tooltip-source")||"element",this.options.direction=this.getEffectiveValue("direction","data-tooltip-direction")||"top",this.options.showPointer=this.options.source==="element",this.element=document.createElement("div"),this.element.setAttribute("role","tooltip"),this.element.className="tooltip";var n=document.createElement("span");n.textContent=this.options.content||this.options.title||"",this.element.appendChild(n),this.$element=e(this.element),t.prototype.onShown.call(this)},r.prototype.show=function(){this.$sourceElement.trigger("show:tooltip",this.options),(this.options.content||this.options.title)&&t.prototype.show.call(this)},r.prototype.verifySource=function(){return n.matches(this.sourceElement,":hover")?t.prototype.verifySource.call(this):!1},{addTooltipIfTruncated:function(e){if(!e.currentTarget.title){var t;e.data&&e.data.target?t=e.currentTarget.querySelector(e.data.target):t=e.currentTarget;if(t&&t.offsetWidth<t.scrollWidth){var n=t.textContent;n&&this.show(e.currentTarget,{content:n.trim(),mouseLeft:e.pageX,mouseTop:e.pageY})}}},onMouseEnterElement:function(e){e.currentTarget.title&&this.show(e.currentTarget,{mouseLeft:e.pageX,mouseTop:e.pageY})},replaceBrowserTooltips:function(){this.showTooltips=!0,e(document.body).on("mouseenter.tooltip","*",this.onMouseEnterElement.bind(this))},close:function(){this.tooltip&&(this.tooltip.close(),this.tooltip=null)},registerForAutoTooltip:function(t,n){if(this.showTooltips&&t){var r=n&&(n.source||n);e(t).on("mouseenter.autotooltip",r,n,this.addTooltipIfTruncated.bind(this))}},show:function(e,t){this.showTooltips&&(this.close(),e&&(this.tooltip=new r(e,t),this.tooltip.show()))},unregisterFromAutoTooltip:function(t){t&&e(t).off("mouseenter.autotooltip")}}}),define("packages/controls/src/js/alert/alert",["jquery","core","../dialogs/alertDialog","../animation/animator","../buttons/customButtonPanel","template!../../content/templates/alertInlineView.html","template!../../content/templates/alertFloatingView.html","../popups/tooltip","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o,u,a,f){function c(n){e.extend(this,{autoTooltip:!0,showAgain:!0,showCloseButton:!0,showIcon:!0,type:"info"},n),this.showDialog=this.showDialogOnMobile&&t.PlatformDetector.type()==="phone",this.showDialog||(this.initialize(),this.$element.on("click",".alert-close-button",this.tryClose.bind(this)).on("click",".alert-undo-link",this.onUndoClick.bind(this)),this.autoTooltip&&this.style!=="floating"&&u.registerForAutoTooltip(this.element,".alert-message"))}var l={error:"alert-error",info:"alert-info",success:"alert-success",warning:"alert-warning"};return c.prototype.initialize=function(){var n=this.style==="floating"?o:s;this.element=f.renderTemplate(n,{alertClass:l[this.type.toLowerCase()],buttonPanel:this.buttons,className:this.className,iconClass:f.getIconClassFromAlertType(this.type),message:this.message,showCloseButton:this.showCloseButton,showDetailsLink:this.details&&this.details.value,showIcon:this.showIcon,showRememberCheckbox:this.showRememberCheckbox,undoLinkText:this.undoLinkText||t.Strings.translate("controls.undoLabel")}),this.$element=e(this.element),this.buttons&&(this.buttonPanel=new i(this.element.querySelector(".alert-button-panel"),this.buttons),this.buttonPanel.on("click:button",this.onButtonClick,this));if(this.showRememberCheckbox){var r=this.element.querySelector(".alert-show-again-checkbox");r&&(r.checked=!this.showAgain,r.addEventListener("change",function(e){this.showAgain=!e.currentTarget.checked}.bind(this)))}var u=this.element.querySelector(".alert-info-link");u&&(this.details.isUrl?(u.href=this.details.value,u.target="_blank"):(u.href="#",e(u).on("click",function(e){this.showAlertDialog(this.details.value),e.preventDefault()}.bind(this)))),this.displayTimeout>0&&setTimeout(this.close.bind(this),this.displayTimeout)},c.prototype.onButtonClick=function(e,t){this.trigger("click:button",e,t),!e.cancel&&t.close!==!1&&this.tryClose(e.sourceEvent)},c.prototype.onUndoClick=function(e){e.preventDefault();var t={sourceEvent:e};this.trigger("click:undo",t,this),t.cancel||this.tryClose(e)},c.prototype.showAlertDialog=function(e){var t=n.show(e);a.proxy(t,this,null,[{from:"close",to:"close:dialog"},{from:"show",to:"show:dialog"}])},c.prototype.tryClose=function(e){if(this.isClosing||this.onClose&&this.onClose(this)===!1)return;var t={sourceEvent:e,cancel:!1};this.trigger("close",t,this),t.cancel||(this.isClosing=!0,r.fadeOutAndRemove(this.element))},c.prototype.close=function(){this.tryClose()},c.prototype.getButtons=function(){return this.buttonPanel&&this.buttonPanel.buttons},c.prototype.getElement=function(){return this.$element},c.prototype.getShowAgain=function(){return this.showAgain},c.prototype.show=function(){this.showDialog?(this.showHeader=this.showHeader||!1,this.showAlertDialog(this)):this.element&&r.fadeIn(this.element)},t.Events.enableFor(c.prototype),c}),define("packages/controls/src/js/alert/alertContainer",["core","./alert","../popups/tooltip","../core/utility","../core/domUtility"],function(e,t,n,r,i){function s(e){this.$element=i.getElement(e),this.element=this.$element[0],this.element.setAttribute("role","log"),this.alerts=[],n.registerForAutoTooltip(this.$element,".alert-message")}return s.prototype.forwardAlertEvents=function(e,t,n){this.trigger(e,t,n),!t.cancel&&e==="close"&&r.removeFromArray(this.alerts,n)},s.prototype.clear=function(){this.$element.empty(),this.alerts.length=0},s.prototype.findAlertByProperty=function(e,t){return r.findByProperty(this.alerts,e,t)},s.prototype.getAlerts=function(){return this.alerts},s.prototype.showAlert=function(e){var n=new t(r.mergeProperties({autoTooltip:!1},e));return n.on("all",this.forwardAlertEvents,this),n.element&&(this.alerts.push(n),this.element.appendChild(n.element)),n.show(),n},e.Events.enableFor(s.prototype),s}),define("packages_controls_src_content_templates_menuHeader_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<div class="menu-group-header">\n	<div class="menu-group-header-cell menu-cell">\n		<span class="header">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</span>\n	</div>\n	<div class="menu-cell">&nbsp;</div>\n	<div class="menu-cell"></div>\n	<div class="menu-cell"></div>\n</div>\n',s}}),define("packages_controls_src_content_templates_menuItem_html",[],function(){return function(e,t,n,r,i){function c(e,t){return'\r\n        <span class="icon-arrow_east" aria-hidden="true"></span>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<li class="menu-item ',(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" role="menuitem">\r\n    <span class="menu-item-content-container menu-cell">\r\n        <span class="menu-item-content">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</span>\r\n        <span class="menu-item-description">',(u=n.description)?o=u.call(t,{hash:{},data:i}):(u=t&&t.description,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</span>\r\n    </span>\r\n    <div class="badge-container menu-cell"></div>\r\n    <div class="submenu-indicator menu-cell">\r\n        ',o=n["if"].call(t,t&&t.hasChildren,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\r\n    </div>\r\n</li>",s}}),define("packages_controls_src_content_templates_menuSeparator_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="menu-group-separator" role="separator">\n	<div class="separator menu-cell"></div>\n	<div class="separator menu-cell"></div>\n	<div class="separator menu-cell"></div>\n	<div class="separator menu-cell"></div>\n</div>\n'}}),define("packages/controls/src/js/popups/menuItem",["template!../../content/templates/menuHeader.html","template!../../content/templates/menuItem.html","template!../../content/templates/menuSeparator.html","../core/domUtility","../core/utility"],function(e,t,n,r,i){function s(t,s){i.mergeProperties(this,t),this.isHeader?this.element=r.renderTemplate(e,this):this.isSeparator?this.element=r.renderTemplate(n):this.initializeItem(s)}return s.prototype.createIconElement=function(e,t,n){var r;return e&&!t?(e.src.indexOf(".svg")>=0?(r=document.createElement("object"),r.type="image/svg+xml",r.data=e.src,r.addEventListener("load",function(){var e=r.contentDocument.querySelector("svg");e&&(e.style.fill=n)})):(r=document.createElement("img"),r.src=e.src),r.alt=e.alt||"",r.title=e.title||""):(r=document.createElement("span"),r.className="icon "+(t||"")),r.setAttribute("aria-hidden",!0),r},s.prototype.initializeItem=function(e){var n=this.children&&this.children.length;this.element=r.renderTemplate(t,{className:this.className,description:this.description,hasChildren:n,name:this.name}),this.id&&(this.element.id=this.id);var i=this.createIconElement(this.icon,this.iconClass,"#363636");this.element.insertBefore(i,this.element.firstChild);if(e){var s=r.getHTMLElement(e(this));s&&(s.classList.add("menu-item-indicator"),this.element.querySelector(".badge-container").appendChild(s))}this.isDisabled?this.element.setAttribute("aria-disabled",!0):(this.element.tabIndex=-1,this.isSelected&&this.element.setAttribute("aria-selected",!0)),n&&this.element.setAttribute("aria-haspopup",!0)},s}),define("packages_controls_src_content_templates_menu_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="menu" tabindex="0" data-resizable role="menu">\n    <iframe class="iframe-fix-element" aria-hidden="true"></iframe>\n    <div class="menu-animation-panel">\n        <div class="menu-content-panel">\n            <div class="menu-header">\n                <button class="menu-header-button containerless" type="button">\n                    <span class="icon-back" aria-hidden="true"></span>\n                </button>\n                <span class="menu-header-label-container">\n                    <span class="menu-header-label"></span>\n                </span>\n            </div>\n            <div class="menu-item-viewport">\n                <ul class="menu-item-panel"></ul>\n            </div>\n        </div>\n    </div>\n</div>'}}),define("packages/controls/src/js/popups/menu",["jquery","core","./popup","../animation/animator","../core/inputHandler","./menuItem","../core/domUtility","template!../../content/templates/menu.html"],function(e,t,n,r,i,s,o,u){function a(r,s,a,p){n.call(this,r,e.extend({centerHorizontallyOnSource:!1,closeOnMouseLeave:!0,delay:0,showPointer:!1,source:"element"},p)),this.sourceItems=s||[],this.parentMenu=a,this.sourceElement||(this.options.source="mouse"),this.isMobile=/phone|tablet/.test(t.PlatformDetector.type()),!this.options.direction&&this.options.source==="element"&&(this.options.direction="bottom"),this.$sourceElement?(this.$sourceElement.on("mouseleave.menu",this.onMouseLeave.bind(this)),this.options.showPointer&&(this.options.sourcePadding=3)):this.options.showPointer=!1,this.element=o.renderTemplate(u),this.$element=e(this.element).on("resize",this.updatePosition.bind(this)).on("focusout",this.startCloseTimer.bind(this)),this.animationPanel=this.element.querySelector(".menu-animation-panel"),this.container=this.element.querySelector(".menu-item-viewport"),this.itemPanel=this.element.querySelector(".menu-item-panel"),this.inputHandler=new i(this.$element,{getFirstItem:f.bind(this),getLastItem:l.bind(this),getNextItem:c.bind(this),getPreviousItem:h.bind(this),itemSelector:".menu-item",selectionMode:"single"}),this.inputHandler.on({"change:focus":this.onFocusChanged,"click:item":this.triggerClickEvent,"enter:item":this.triggerClickEvent,"left:item":this.onLeftKeyDown,"right:item":this.onRightKeyDown},this),this.isMobile?(this.parentItemStack=[],this.contentPanel=this.element.querySelector(".menu-content-panel"),this.headerLabel=this.element.querySelector(".menu-header-label"),this.headerElement=this.element.querySelector(".menu-header"),this.headerElement.style.display="none",this.$element.on("click",".menu-header",this.onBackButtonClick.bind(this))):(this.element.appendChild(this.container),this.element.removeChild(this.animationPanel),this.inputHandler.setOptions({hoverClass:"menu-item-hover"}),this.inputHandler.on({"mouseenter:item":this.onItemMouseEnter,"mouseleave:item":this.onItemMouseLeave},this),this.options.closeOnMouseLeave&&this.$element.on("mouseenter",this.onMouseEnter.bind(this)).on("mouseleave",this.onMouseLeave.bind(this)))}function f(){return p(this.items,0,1)}function l(){return p(this.items,this.items.length-1,-1)}function c(e,t){var n=e!=null?e.index+1:0;return p(this.items,n,t)||e}function h(e,t){if(e)return p(this.items,e.index-1,-t)||e}function p(e,t,n){var r=e[t];while(r&&(r.isHeader||r.isSeparator||r.isDisabled))t+=n,r=e[t];return r}return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.animateMenuChange=function(e,t){if(this.menuChangeAnimations)for(var n=0;n<this.menuChangeAnimations.length;n++)this.menuChangeAnimations[n].finish();this.parentItem=e;var i=e?e.children:this.sourceItems,s=this.element.clientWidth,o=this.element.offsetHeight,u=this.contentPanel.cloneNode(!0);u.style.position="absolute",u.style.overflow="hidden",u.style.width=s+"px",this.container.style.height="",this.generateMenu(i),e?(this.headerElement.style.display="",this.headerLabel.textContent=e.name||""):this.headerElement.style.display="none",this.element.style.height="auto",this.element.style.display="inline-block";var a=this.element.offsetHeight;this.element.style.height="",this.element.style.display="",this.animationPanel.appendChild(u),this.contentPanel.style.position="absolute",this.contentPanel.style.width=s+"px",this.contentPanel.style.overflow="hidden",this.menuChangeAnimations=[];var f=t?100:-100;this.menuChangeAnimations.push(r.animate({source:this.contentPanel,properties:{name:"left",from:f,to:0,unitType:"%"}})),this.menuChangeAnimations.push(r.animate({source:u,properties:{name:"left",from:0,to:-f,unitType:"%"}})),this.menuChangeAnimations.push(r.animate({source:this.element,properties:{name:"height",unitType:"px",from:o,to:a},onFinished:function(){this.menuChangeAnimations=null,this.animationPanel.removeChild(u),this.contentPanel.style.width="",this.contentPanel.style.position="",this.contentPanel.style.overflow="";var e=this.element.offsetHeight-this.headerElement.offsetHeight;this.container.style.height=e+"px",this.updatePosition()}.bind(this)}))},a.prototype.closeHierarchy=function(){var e=this;while(e.parentMenu)e=e.parentMenu;e.close()},a.prototype.generateMenu=function(e){this.items=[];var t=document.createDocumentFragment();for(var n=0;n<e.length;n++){var r=new s(e[n],this.options.createItemIndicator);t.appendChild(r.element),r.index=n,this.items.push(r)}while(this.itemPanel.lastChild)this.itemPanel.removeChild(this.itemPanel.lastChild);this.itemPanel.appendChild(t),this.inputHandler.setItems(this.items)},a.prototype.onBackButtonClick=function(){this.animateMenuChange(this.parentItemStack.pop(),!1)},a.prototype.onFocusChanged=function(e,t){t&&t.element&&!t.isDisabled&&t.element.focus()},a.prototype.onItemMouseEnter=function(e,t){this.showSubMenu(t)},a.prototype.onItemMouseLeave=function(e,t){this.childMenu&&this.childMenu.items===t.children&&this.childMenu.onMouseLeave()},a.prototype.onLeftKeyDown=function(){this.parentMenu&&this.sourceElement.focus()},a.prototype.onRightKeyDown=function(e,t){if(t){var n=this.showSubMenu(t);n&&n.inputHandler.focus(0)}},a.prototype.onMouseEnter=function(){this.closeTimeoutId&&(clearTimeout(this.closeTimeoutId),this.closeTimeoutId=null)},a.prototype.onMouseLeave=function(){this.startCloseTimer()},a.prototype.onShown=function(){if(!this.isClosing){this.generateMenu(this.sourceItems),this.parentMenu||(this.handleEscapeKeyDown(),this.handleBackgroundClick()),n.prototype.onShown.call(this);var e=this.inputHandler.getFocused();e?e.element.focus():this.element.focus(),this.trigger("show",{},this)}},a.prototype.showSubMenu=function(t){if(this.isClosing||t.element.getAttribute("aria-disabled"))return;this.childMenu&&this.childMenu.close();if(t.children&&t.children.length){if(this.isMobile)return this.parentItem&&this.parentItemStack.push(this.parentItem),this.animateMenuChange(t,!0),this.element.focus(),this;t.element.classList.add("menu-item-opened");var n=e.extend({},this.options,{direction:"right",closeOnMouseLeave:!0,showPointer:!1,source:"element",sourcePadding:0});return this.childMenu=new a(e(t.element),t.children,this,n),this.childMenu.show(),this.childMenu}},a.prototype.startCloseTimer=function(){clearTimeout(this.closeTimeoutId),this.closeTimeoutId=setTimeout(this.tryClose.bind(this),500)},a.prototype.triggerClickEvent=function(e,t){Array.isArray(t)&&(t=t[0]);if(t.isDisabled)return;if(t.children&&t.children.length)(!this.childMenu||t.element!==this.childMenu.sourceElement)&&this.showSubMenu(t);else{t.onClick&&t.onClick(e,t);var n=this;while(n.parentMenu)n=n.parentMenu;n.trigger("click:item",e,t),this.closeHierarchy()}},a.prototype.tryClose=function(){var e=this;while(e){if(e.element===document.activeElement||o.matches(e.element,":hover")||e.element.contains(document.activeElement))return;e=e.childMenu}this.close(),this.parentMenu&&this.parentMenu.tryClose()},a.triggerContextMenuEvent=function(e,t,n,r,i){n.items||(r.items=[]),t.trigger(n,r,i),r.items&&r.items.length&&(a.show(null,r.items,{source:"mouse",mouseLeft:e.pageX,mouseTop:e.pageY}),e.stopPropagation(),e.preventDefault())},a.prototype.close=function(){if(!this.isClosing){if(!this.parentMenu){var e={cancel:!1};this.trigger("close",e,this);if(e.cancel)return}clearTimeout(this.closeTimeoutId),this.parentMenu&&this.parentMenu.childMenu===this&&(this.sourceElement&&this.sourceElement.classList.remove("menu-item-opened"),this.parentMenu.childMenu=null),this.childMenu&&this.childMenu.close(),this.$sourceElement&&this.$sourceElement.off("mouseleave.menu"),n.prototype.close.call(this)}},a.show=function(t,n,r){if(t||n){var i=e(t);i.length||(i=null);var s=new a(i,n,null,r);return s.show(),s}},a}),define("packages/controls/src/js/canvas/canvasControl",["jquery","underscore","core","../popups/menu","../popups/tooltip","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o){function u(e){this.$canvas=o.getElement(e,!1,"canvas"),this.canvas=this.$canvas[0],this.canvas.setAttribute("data-draggable",!0),this.canvas.tabIndex=0,this.items=[],this.iconFontCache={},o.disableBrowserSelection(this.$canvas),this.$canvas.on("mousedown",v.bind(this)).on("mousemove",m.bind(this)).on("mouseleave",y.bind(this)).on("mouseup",g.bind(this)).on("click",f.bind(this)).on("dblclick",f.bind(this)).on("contextmenu",l.bind(this)).on("keydown",d.bind(this)).on("drag:begin",c.bind(this)).on("drag:update",h.bind(this)).on("drag:end",p.bind(this))}function a(e,t,n){var r=t<0&&n<0?Infinity:t+n,i=Infinity*n,s=null;for(var o=0;o<e.length;o++){var u=e[o].tabIndex;if(u==null)continue;if(u===r){s=o;break}n>=0?u>=r&&u<i&&(s=o,i=u):u<=r&&u>i&&(s=o,i=u)}if(s!=null)return e[s]}function f(e){var t=this.getMousePosition(e),n=this.getItemAtScreenPosition(t.x,t.y);n&&this.sendMouseEvent(e,e.type,n,t)}function l(e){var t=this.getMousePosition(e),n=this.getItemAtScreenPosition(t.x,t.y);if(n){var i={sourceEvent:e};i.offsetX=t.x-n.rect.left,i.offsetY=t.y-n.rect.top,r.triggerContextMenuEvent(e,this,"contextmenu:item",i,n)}}function c(e,t){var n=this.toSurfaceSpace(t.mouseOffset.x,t.mouseOffset.y),r=this.getItemAtSurfacePosition(n.x,n.y);r&&r.isDraggable&&(this.draggingItem=r,r.dragOffset={x:n.x-r.rect.left,y:n.y-r.rect.top},i.close(),this.updateDragPosition(t),this.trigger("drag:begin",{sourceEvent:e},this.draggingItem))}function h(e,t){this.draggingItem&&(this.updateDragPosition(t),this.trigger("drag:update",{sourceEvent:e},this.draggingItem))}function p(e,t){this.draggingItem&&(this.updateDragPosition(t),this.draggingItem.dragOffset=null,this.trigger("drag:end",{sourceEvent:e},this.draggingItem)),this.draggingItem=null}function d(e){var t=this.focusedItem;if(e.which===9){var n;t&&t.tabIndex!=null&&(n=t.tabIndex);var r;e.shiftKey?r=this.getPreviousTabItem(n):r=this.getNextTabItem(n),r&&r!==Infinity?(this.focusItem(r),e.preventDefault()):this.focusItem(null)}t&&this.trigger("keydown:item",{sourceEvent:e},t)}function v(e){var t=this.getMousePosition(e),n=this.getItemAtScreenPosition(t.x,t.y);n&&this.sendMouseEvent(e,"mousedown",n,t),this.canvas.focus(),this.focusItem(n)}function m(e){if(this.draggingItem)return;var t=this.getMousePosition(e),n=this.getItemAtScreenPosition(t.x,t.y);if(n===this.mouseOverItem)n&&this.sendMouseEvent(e,"mousemove",n,t);else{this.mouseOverItem&&(i.close(),this.mouseOverItem.isMouseOver=!1,this.sendMouseEvent(e,"mouseleave",this.mouseOverItem,t));if(n){n.isMouseOver=!0,this.sendMouseEvent(e,"mouseenter",n,t);var r=n.tooltip!=null?n.tooltip:n.description;r&&i.show(this.$canvas,{source:"mouse",content:r,left:e.pageX,top:e.pageY})}this.mouseOverItem=n}}function g(e){if(this.draggingItem)return;var t=this.getMousePosition(e),n=this.getItemAtScreenPosition(t.x,t.y);n&&this.sendMouseEvent(e,"mouseup",n,t)}function y(e){this.mouseOverItem&&(this.mouseOverItem.isMouseOver=!1),this.mouseOverItem&&(i.close(),this.sendMouseEvent(e,"mouseleave",this.mouseOverItem,this.getMousePosition(e))),this.mouseOverItem=null}return u.prototype.getMousePosition=function(e){var t=this.$canvas.offset();return{x:e.pageX-t.left,y:e.pageY-t.top}},u.prototype.getPixelRatio=function(){return{x:this.canvas.width/this.canvas.clientWidth,y:this.canvas.height/this.canvas.clientHeight}},u.prototype.sendMouseEvent=function(e,t,n,r){var i={sourceEvent:e};i.offsetX=r.x-n.rect.left,i.offsetY=r.y-n.rect.top,this.trigger(t+":item",i,n)},u.prototype.updateDragPosition=function(e){var t=this.toSurfaceSpace(e.mouseOffset.x+e.mousePosition.x-e.initialPosition.x,e.mouseOffset.y+e.mousePosition.y-e.initialPosition.y),n=this.draggingItem,r=t.x-n.dragOffset.x,i=t.y-n.dragOffset.y;n.rect.left=s.clamp(0,this.canvas.width-n.rect.width,r),n.rect.top=s.clamp(0,this.canvas.height-n.rect.height,i)},u.prototype.addItem=function(e){if(e)return this.items.push(e),e},u.prototype.calculateTabOrder=function(){this.items.sort(function(e,t){var n=e.rect.top-t.rect.top;if(Math.abs(n)>10)return n;var r=e.rect.left-t.rect.left;return Math.abs(r)>10?r:n||r});for(var e=0;e<this.items.length;e++)this.items[e].tabIndex=e},u.prototype.clearItems=function(){this.items.length=0,this.focusedItem=null;while(this.canvas.lastChild)this.canvas.removeChild(this.canvas.lastChild)},u.prototype.focusItem=function(e){if(this.focusedItem===e)return;this.focusedItem&&(this.focusedItem.isFocused=!1,this.trigger("blur:item",{},this.focusedItem)),this.focusedItem=e;while(this.canvas.lastChild)this.canvas.removeChild(this.canvas.lastChild);if(e){e.isFocused=!0,this.trigger("focus:item",{},e);if(e.description){var t=document.createElement("span");t.textContent=e.description,this.canvas.appendChild(t)}}},u.prototype.get2DContext=function(){return this.canvas.getContext("2d")},u.prototype.getCanvas=function(){return this.canvas},u.prototype.getItemAtScreenPosition=function(e,t){var n=this.toSurfaceSpace(e,t);return this.getItemAtSurfacePosition(n.x,n.y)},u.prototype.getItemAtSurfacePosition=function(e,t){for(var n=0;n<this.items.length;n++){var r=this.items[n];if(this.isPointInRectangle(e,t,r.rect))if(!r.isPointInside||r.isPointInside(e,t))return r}},u.prototype.getItemByProperty=function(e,t){return s.findByProperty(this.items,e,t)},u.prototype.getItems=function(){return this.items},u.prototype.getNextTabItem=function(e){return!e&&e!==0?t.min(this.items,function(e){return e.tabIndex}):a(this.items,e,1)},u.prototype.getPreviousTabItem=function(e){return!e&&e!==0?t.max(this.items,function(e){return e.tabIndex}):a(this.items,e,-1)},u.prototype.getIconFontProperties=function(e){var t=this.iconFontCache[e];if(!t){var n=document.createElement("span");n.className=e,n.style.display="hidden",document.body.appendChild(n);var r=window.getComputedStyle(n,":before");if(r){t={color:r.color,fontSize:r.fontSize,fontFamily:r.fontFamily,fontStyle:r.fontStyle};var i=r.content;i&&(t.content=i.replace(/['"]/g,"")),this.iconFontCache[e]=t}document.body.removeChild(n)}return t},u.prototype.isPointInCircle=function(e,t,n,r,i){var s=n-e,o=r-t;return s*s+o*o<i*i},u.prototype.isPointInConvexPolygon=function(e,t,n){if(!n)return!1;for(var r=0;r<n.length;r++){var i=n[r],s=n[r+1]||n[0],o=i.y-s.y,u=-(i.x-s.x),a=e-(i.x+s.x)/2,f=t-(i.y+s.y)/2;if(o*a+u*f<0)return!1}return!0},u.prototype.isPointInRectangle=function(e,t,n){if(n)return n.left<=e&&n.left+n.width>=e&&n.top<=t&&n.top+n.height>=t},u.prototype.removeItem=function(e){s.removeFromArray(this.items,e)&&e.isFocused&&this.focusedItem(null)},u.prototype.removeItemByProperty=function(e,t){var n=s.removeFromArrayByProperty(this.items,e,t);n&&n.isFocused&&this.focusedItem(null)},u.prototype.toScreenSpace=function(e,t){var n=this.getPixelRatio();return{x:e/n.x,y:t/n.y}},u.prototype.toSurfaceSpace=function(e,t){var n=this.getPixelRatio();return{x:e*n.x,y:t*n.y}},n.Events.enableFor(u.prototype),u}),define("packages_controls_src_content_templates_grid_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="grid-viewport">\r\n    <div class="column-header-viewport" aria-hidden="true">\r\n        <div class="column-header-panel" role="row">\r\n            <div class="checkbox-cell" tabindex="-1">\r\n                <input class="column-header-checkbox" type="checkbox" tabindex="-1"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row-viewport">\r\n        <div></div>\r\n    </div>\r\n</div>'}}),define("packages/controls/src/js/grid/gridControl",["jquery","underscore","core","template!../../content/templates/grid.html","../animation/animator","../core/collectionView","../core/inputHandler","../popups/tooltip","../core/utility","../core/domUtility","../layout/virtualizedPanel"],function(e,t,n,r,i,s,o,u,a,f,l){function h(t,n,i,o){this.element=t,this.$element=e(t),this.element.innerHTML=r.render(),this.element.setAttribute("role","grid"),this.element.setAttribute("aria-readonly",!0),this.gridViewport=this.element.querySelector(".grid-viewport"),this.columnHeaderViewport=this.element.querySelector(".column-header-viewport"),this.columnHeaderPanel=this.element.querySelector(".column-header-panel"),this.$gridViewport=e(this.gridViewport),this.$columnHeaderPanel=e(this.columnHeaderPanel),this.columnCollectionView=new s(n,["name"]),this.columnCollectionView.on({set:this.onColumnsSet,ready:this.onColumnsReady,"add:item":this.onColumnChanged,"change:item":this.onColumnChanged,"insert:item":this.onColumnChanged,"move:item":this.onColumnChanged,"remove:item":this.onColumnChanged},this),o=e.extend({allowColumnReorder:!0,useCheckboxSelection:!1,useMultiSelection:!0},o),o.handleHover=!1,o.itemSelector=".row",this.rowViewport=this.element.querySelector(".row-viewport"),o.scrollableElement=this.rowViewport,l.call(this,this.rowViewport.firstElementChild,i,o),this.options.useCheckboxSelection&&this.element.classList.add("has-checkboxes"),this.initializeRows(),this.initializeColumns(),this.onColumnsSet(),this.onColumnsReady(),f.disableBrowserSelection(this.$element),u.registerForAutoTooltip(this.$element,".column-header-content, .cell")}var c={isReorderable:!0,isResizable:!0,isSortable:!0,maxWidth:Infinity,minWidth:32};return h.prototype=Object.create(l.prototype),h.prototype.constructor=h,h.prototype.initializeColumns=function(){this.$columnHeaderPanel.on({"drag:begin":this.columnHeaderDragStart.bind(this),"drag:update":this.columnHeaderDragUpdate.bind(this),"drag:end":this.columnHeaderDragEnd.bind(this)},".column-header").on({click:function(){return!1},dblclick:this.columnHeaderResizerDoubleClick.bind(this),"drag:begin":this.columnHeaderResizeBegin.bind(this),"drag:update":this.columnHeaderResizeUpdate.bind(this),"drag:end":this.columnHeaderResizeEnd.bind(this)},".resize-grip"),this.$columnHeaderPanel.find(".checkbox-cell").on("click",this.columnHeaderCheckboxCellClick.bind(this)).on("keydown",this.columnHeaderCheckboxCellKeyDown.bind(this)),this.$columnHeaderPanel.find(".column-header-checkbox").on("click",this.columnHeaderCheckboxClick.bind(this)),this.masterCheckboxCell=this.columnHeaderPanel.querySelector(".checkbox-cell"),this.masterCheckboxElement=this.masterCheckboxCell.firstElementChild,this.columnInputHandler=new o(this.$columnHeaderPanel,{getNextItem:this.getNextColumn.bind(this),getPreviousItem:this.getPreviousColumn.bind(this),itemSelector:".column-header",selectionDirection:"horizontal",selectionMode:"single"}),a.proxy(this.columnInputHandler,this,[{from:"focus",to:"focusColumn"},{from:"getFocused",to:"getFocusedColumn"}],[{from:"contextmenu:item",to:"contextmenu:column"}]),this.columnInputHandler.on({"click:item":this.onColumnClick,"change:focus":this.onColumnFocusChanged,"spacebar:item":this.onColumnSpacebar},this)},h.prototype.onColumnsSet=function(){var e=this.columnCollectionView.items;for(var n=0;n<e.length;n++){var r=e[n],i=r.sourceItem;t.defaults(i,c),i.width==null?this.panel.isReady()&&(i.width=this.getColumnHeaderWidth(r)):i.width=a.clamp(i.minWidth,i.maxWidth,i.width)}this.columnInputHandler.setItems(this.columnCollectionView.items)},h.prototype.onColumnsReady=function(){this.focusedColumn=this.columnCollectionView.getItems()[0],this.columnInputHandler.lastFocusedItem=this.focusedColumn;var e=this.columnCollectionView.getItems();this.collectionView.setBoundProperties(e.map(function(e){return e.sourceItem.propertyName})),this.invalidate()},h.prototype.onColumnChanged=function(){this.redrawColumns=!0,this.throttleUpdate()},h.prototype.createColumnReorderVisual=function(e,t){var n=this.columnCollectionView.findByProperty("element",t.element);n.isDragging=!0;var r=document.createElement("div");r.className="grid column-reorder-visual",r.style.width=n.sourceItem.width+"px",this.element.classList.contains("no-container")&&r.classList.add("no-container");var i=this.columnHeaderViewport.offsetHeight,s=this.scrollHandler.clientHeight+i;this.rowViewport.offsetWidth<this.rowViewport.scrollWidth&&(s-=f.getScrollbarSize().height),r.style.height=s+"px";var o=document.createElement("div");o.className="column-header-viewport";var u=t.element.cloneNode(!0);o.appendChild(u),r.appendChild(o);var a=document.createElement("div");a.className="item-panel",a.style.zIndex=-1,a.style.position="absolute";var l=this.collectionView.items,c=this.panel.calculateItemTop(l,this.panel.firstVisibleItem);a.style.top=i+c-this.scrollHandler.scrollTop+"px";for(var h=this.panel.firstVisibleItem;h<=this.panel.lastVisibleItem;h++)if(l[h].element){var p=document.createElement("div");p.className="row",p.appendChild(l[h].childElements[n.index].cloneNode(!0)),a.appendChild(p)}return r.appendChild(a),r},h.prototype.columnHeaderCheckboxCellClick=function(){this.toggleColumnHeaderCheckbox(),this.setCheckboxFocus()},h.prototype.columnHeaderCheckboxClick=function(e){e.currentTarget.checked?this.inputHandler.selectAll():this.inputHandler.deselectAll(),this.masterCheckboxElement.setAttribute("data-focus-hidden",""),this.setCheckboxFocus(),e.stopPropagation()},h.prototype.columnHeaderCheckboxCellKeyDown=function(e){if(e.which===32)return this.toggleColumnHeaderCheckbox(),!1;if(e.which===39){var t=this.columnCollectionView.items;for(var n=0;n<t.length;n++){var r=t[n];if(r.left+r.sourceItem.width>this.scrollHandler.scrollLeft){this.onColumnFocusChanged({sourceEvent:e},r);break}}return!1}},h.prototype.columnHeaderDragStart=function(e,t){t.updateVisual=!1,t.visualParent=document.body,t.visualElement=this.createColumnReorderVisual(e,t);var n=this.columnCollectionView.findByProperty("element",t.element);n.newIndex=n.index,this.setColumnProperty(n.index,"display","none"),this.setColumnProperty(n.index+1,"marginLeft",n.sourceItem.width+"px")},h.prototype.columnHeaderDragUpdate=function(e,t){t.isVisible||(t.isVisible=!0,t.visualElement.classList.add("visible"));var n=this.columnCollectionView.findByProperty("element",t.element),r=this.gridViewport.getBoundingClientRect(),i=r.left,s=i+this.scrollHandler.clientWidth;this.options.useCheckboxSelection&&(i+=this.masterCheckboxCell.offsetWidth);var o=t.mousePosition.x-t.mouseOffset.x;o<i?o=i:o+t.width>s&&(o=s-t.width),t.visualElement.style.top=r.top+"px",t.visualElement.style.left=o+"px";var u=this.scrollHandler.scrollLeft;o<i+32?u>0&&(u=Math.max(0,u-16),this.rowViewport.scrollLeft=u):o+t.width>s-32&&u<this.rowViewport.scrollWidth-this.scrollHandler.clientWidth&&(u=Math.min(this.rowViewport.scrollWidth-this.scrollHandler.clientWidth,u+16),this.rowViewport.scrollLeft=u);var a=this.columnCollectionView.items,f=a.length-1,l=t.mousePosition.x-t.mouseOffset.x-i,c=-this.scrollHandler.scrollLeft;for(var h=0;h<a.length;h++){if(h===n.index)continue;c+=a[h].sourceItem.width;if(l<c){n.index<h&&h--,f=Math.max(0,h);break}}n.newIndex!==f&&(this.animateColumn(n,"marginLeft",0),n.newIndex=f,this.animateColumn(n,"marginLeft",n.sourceItem.width))},h.prototype.columnHeaderDragEnd=function(e,t){var n;for(var r=0;r<this.columnCollectionView.items.length;r++)n=this.columnCollectionView.items[r],n.animation&&n.animation.finish(),this.setColumnProperty(r,"marginLeft","");n=this.columnCollectionView.findByProperty("element",t.element),this.setColumnProperty(n.index,"display",""),this.setColumnProperty(n.index,"visibility","hidden"),n.index!==n.newIndex&&(this.moveColumn(n.index,n.newIndex),this.trigger("change:columnOrder",{},n));var s=this.gridViewport.getBoundingClientRect().left;this.options.useCheckboxSelection&&(s+=this.masterCheckboxCell.offsetWidth);var o=parseFloat(t.visualElement.style.left),u=s+Math.max(0,n.left-this.scrollHandler.scrollLeft);t.visualElement.classList.remove("visible");var a=this;i.animate({source:t.visualElement,properties:{name:"left",from:o,to:u,unitType:"px"},onFinished:function(){n.isDragging=!1,t.$visualElement.remove(),a.setColumnProperty(n.index,"visibility",""),delete n.newIndex}}),e.stopPropagation()},h.prototype.columnHeaderResizeBegin=function(e,t){var n=f.findParent(e.currentTarget,".column-header"),r=this.columnCollectionView.findByProperty("element",n);t.updateVisual=!1,t.visualElement=n,t.columnWidth=r.sourceItem.width,e.stopImmediatePropagation()},h.prototype.columnHeaderResizeUpdate=function(e,t){var n=f.findParent(e.currentTarget,".column-header"),r=this.columnCollectionView.findByProperty("element",n),i=t.columnWidth+t.mousePosition.x-t.initialPosition.x;this.resizeColumn(r,i),e.stopImmediatePropagation()},h.prototype.columnHeaderResizeEnd=function(e,t){e.stopImmediatePropagation(),t.currentEvent.preventDefault(),t.currentEvent.stopImmediatePropagation()},h.prototype.columnHeaderResizerDoubleClick=function(e){var t=f.findParent(e.currentTarget,".column-header"),n=this.columnCollectionView.findByProperty("element",t);return this.resizeColumnToFit(n),!1},h.prototype.getNextColumn=function(e,t){var n=this.columnCollectionView.getItems();if(e)return n[Math.min(n.length-1,e.index+t)];if(this.options.useCheckboxSelection&&this.masterCheckboxCell===document.activeElement){this.setCheckboxFocus();return}return n[0]},h.prototype.getPreviousColumn=function(e,t){if(e){var n=e.index-t;if(!(this.options.useCheckboxSelection&&n<0)){var r=this.columnCollectionView.getItems();return r[Math.max(0,e.index-t)]}this.setCheckboxFocus()}},h.prototype.animateColumn=function(e,t,n){var r=e.newIndex;r>=e.index&&r++;var s=this.columnCollectionView.items[r];if(s){s.animation&&s.animation.finish();var o=parseFloat(s.element.style[t])||0;if(o===n)return;s.animation=i.animate({source:{},properties:{name:t,from:o,to:n,unitType:"px"},onUpdate:this.throttleUpdate.bind(this),onFinished:function(){delete s.animation}}),s.animation.on("update",function(){this.setColumnProperty(s.index,t,s.animation.source[t])},this)}},h.prototype.getFormattedColumn=function(e,t){var n=t.sourceItem.name,r=[t.sourceItem.createColumnHeader,this.options.createColumnHeader],i=[n,t],s=f.getContentElement(n,r,i);s&&(s.classList.add("column-header-content"),e.appendChild(s))},h.prototype.getFormattedCell=function(e,t,n){var r=n.sourceItem[t.sourceItem.propertyName],i=[t.sourceItem.createCellContent,this.options.createCellContent],s=[r,t,n],o=f.getContentElement(r,i,s);o&&(o.classList.add("cell-content"),e.appendChild(o))},h.prototype.onColumnClick=function(e,t){this.sortByColumn(t),this.onColumnFocusChanged(e,t)},h.prototype.onColumnFocusChanged=function(e,t){t&&(this.scrollToColumn(t),t.element&&((!e.sourceEvent||e.sourceEvent.type==="click")&&t.element.setAttribute("data-focus-hidden",""),t.element.focus(),this.options.useCheckboxSelection&&(this.masterCheckboxCell.tabIndex=-1)))},h.prototype.onColumnSpacebar=function(e,t){this.sortByColumn(t),this.onColumnFocusChanged(e,t)},h.prototype.moveColumn=function(e,t){var n=this.columnCollectionView.items;for(var r=0;r<n.length;r++)n[r].previousIndex=r;var i=n[e],s=e<t?t+1:t,o=n[s],u=o&&o.element||null;this.columnHeaderPanel.insertBefore(i.element,u),n.splice(t,0,n.splice(i.index,1)[0]),this.columnCollectionView.reIndexItems();var a;for(var f=this.panel.firstItem;f<=this.panel.lastItem;f++){var l=this.collectionView.items[f],c=l.childElements[i.previousIndex];l.element.insertBefore(c,l.childElements[s]||null);var h={};for(r=0;r<n.length;r++)a=n[r],l.childElements[a.previousIndex]&&(h[a.index]=l.childElements[a.previousIndex]);l.childElements=h}var p=0;for(r=0;r<n.length;r++)a=n[r],a.left=p,p+=a.sourceItem.width,delete a.previousIndex},h.prototype.resizeColumn=function(e,t){e&&e.element&&(e.sourceItem.width=a.clamp(e.sourceItem.minWidth,e.sourceItem.maxWidth,t),this.setColumnProperty(e.index,"width",e.sourceItem.width+"px"),this.trigger("change:columnSize",{},e),this.throttleUpdate())},h.prototype.setCheckboxFocus=function(){this.masterCheckboxCell.tabIndex=0,this.masterCheckboxCell.focus();var e=this.getFocusedColumn();e&&e.element&&(e.element.tabIndex=-1)},h.prototype.toggleColumnHeaderCheckbox=function(){this.masterCheckboxElement.checked?this.inputHandler.deselectAll():this.inputHandler.selectAll()},h.prototype.initializeRows=function(){this.panel.$element.on("click",".cell-content",this.onRowSpanClick.bind(this)).on("click",".checkbox-cell",this.onRowCheckboxCellClick.bind(this)),a.proxy(this.inputHandler,this,[{from:"deselect",to:"deselectRow"},{from:"getFocused",to:"getFocusedRow"},{from:"getSelected",to:"getSelectedRows"},{from:"focus",to:"focusRow"},{from:"select",to:"selectRow"}],[{from:"contextmenu:item",to:"contextmenu:row"}]),this.inputHandler.on({"change:selection":this.onRowSelectionChanged,"dblclick:item":this.invokeOpenRow,"enter:item":this.invokeOpenRow},this)},h.prototype.onRowCheckboxCellClick=function(e){var t=f.findParent(e.currentTarget,".row"),n=this.collectionView.findByProperty("element",t);n&&(e.shiftKey?this.inputHandler.selectTo(n,!0):this.inputHandler.toggleSelection(n),this.onFocusChanged(e,n),t.setAttribute("data-focus-hidden","")),e.stopImmediatePropagation()},h.prototype.onRowSpanClick=function(e){var t=f.findParent(e.currentTarget,".row"),n=this.collectionView.findByProperty("element",t);n&&this.invokeOpenRow({sourceEvent:e},n)},h.prototype.onRowSelectionChanged=function(e,t){if(this.options.useCheckboxSelection){for(var n=0;n<t.length;n++){var r=t[n];r.element&&(r.element.querySelector(".row-checkbox").checked=r.isSelected)}this.options.useCheckboxSelection&&(this.inputHandler.selectionModel.isSelectionFull()?(this.masterCheckboxElement.checked=!0,this.masterCheckboxElement.indeterminate=!1):this.inputHandler.selectionModel.getSelected().length>0?(this.masterCheckboxElement.checked=!1,this.masterCheckboxElement.indeterminate=!0):(this.masterCheckboxElement.checked=!1,this.masterCheckboxElement.indeterminate=!1))}},h.prototype.createColumnHeader=function(e){this.columnHeaderTemplate||(this.columnHeaderTemplate=document.createElement("div"),this.columnHeaderTemplate.className="column-header",this.columnHeaderTemplate.setAttribute("role","column-header"),this.columnHeaderTemplate.tabIndex=-1);var t=e.sourceItem,n=this.columnHeaderTemplate.cloneNode(!1);t.className&&f.addClass(n,t.className),t.width&&(n.style.width=t.width+"px"),this.getFormattedColumn(n,e),this.options.allowColumnReorder&&t.isReorderable&&n.setAttribute("data-draggable",!0);if(t.isResizable){var r=document.createElement("div");r.className="resize-grip resize-grip-column",r.setAttribute("data-draggable",!0),n.appendChild(r)}if(t.isSortable)if(e.sortDescription!=null){var i=document.createElement("span");e.sortDescription.isAscending?(i.className="sort-indicator ascending",n.setAttribute("aria-sort","ascending")):(i.className="sort-indicator descending",n.setAttribute("aria-sort","descending")),n.classList.add("sorted"),n.appendChild(i)}else n.setAttribute("aria-sort","none");return n},h.prototype.createItemContainer=function(t){var n={},r=this.rowTemplate.cloneNode(!0);t.sourceItem.className&&f.addClass(r,t.sourceItem.className);var i=this.columnCollectionView.items,s=this.options.useCheckboxSelection?1:0;for(var o=0;o<i.length;o++){var u=i[o],a=r.children[o+s];n[o]=a,this.getFormattedCell(a,u,t),u.sourceItem.className&&f.addClass(a,u.sourceItem.className),u.isDragging&&(a.style.visibility="hidden")}return this.options.useCheckboxSelection&&t.isSelected&&(r.querySelector(".row-checkbox").checked=!0),t.childElements=n,t.$element=e(r),r},h.prototype.getColumnHeaderWidth=function(e){var t=e.element;t?(t=t.cloneNode(!0),t.style.width=""):(t=document.createElement("div"),t.className="column-header",this.getFormattedColumn(t,e)),t.style.visibility="hidden",this.columnHeaderPanel.appendChild(t);var n=t.offsetWidth+1;return this.columnHeaderPanel.removeChild(t),a.clamp(e.sourceItem.minWidth,e.sourceItem.maxWidth,n)},h.prototype.invokeOpenRow=function(e,t){Array.isArray(t)||(t=[t]),this.trigger("open:row",e,t)},h.prototype.removeItemElement=function(e){e.childElements=null,l.prototype.removeItemElement.call(this,e)},h.prototype.scrollToColumn=function(e){var t=e.left;if(t<this.scrollHandler.scrollLeft)return this.rowViewport.scrollLeft=t,!0;var n=this.scrollHandler.clientWidth;this.scrollHandler.isVerticalScrollbarVisible()&&(n-=f.getScrollbarSize().width);var r=t+e.sourceItem.width;return r>this.scrollHandler.scrollLeft+n?(this.rowViewport.scrollLeft=r-n,!0):!1},h.prototype.setColumnProperty=function(e,t,n){var r=this.columnCollectionView.items[e];if(r&&r.element&&r.element.style[t]!==n){r.element.style[t]=n;for(var i=this.panel.firstItem;i<=this.panel.lastItem;i++){var s=this.collectionView.items[i];s&&s.childElements&&s.childElements[e]&&(s.childElements[e].style[t]=n)}}},h.prototype.updateCheckboxColumn=function(){var e=this.scrollHandler.scrollLeft+"px";this.masterCheckboxCell&&(this.masterCheckboxCell.style.left=e);var t=this.collectionView.items;for(var n=this.panel.firstItem;n<=this.panel.lastItem;n++){var r=t[n].element;r&&(r.firstChild.style.left=e)}},h.prototype.updateColumns=function(){var t=this.columnCollectionView.items,n=document.createDocumentFragment(),r;for(var i=0;i<t.length;i++){var s=t[i];s.element===document.activeElement&&(r=s);var o=s.element&&s.element.hasAttribute("data-focus-hidden"),u=s.tabIndex===0;s.$element&&s.$element.remove(),s.element=this.createColumnHeader(s),s.element.setAttribute("aria-posinset",i+1),s.element.setAttribute("aria-setsize",t.length),o&&s.element.setAttribute("data-focus-hidden",""),u&&(s.element.tabIndex=0),s.$element=e(s.element),n.appendChild(s.element)}var a=this.columnHeaderPanel.lastChild;while(a){if(a.classList&&a.classList.contains("checkbox-cell"))break;this.columnHeaderPanel.removeChild(a),a=this.columnHeaderPanel.lastChild}this.columnHeaderPanel.appendChild(n),r&&r.element.focus(),this.focusedColumn&&this.focusedColumn.element&&(this.focusedColumn.element.tabIndex=0,this.focusedColumn=null)},h.prototype.updateItems=function(e){if(!this.panel.isReady())for(var t=0;t<this.columnCollectionView.items.length;t++){var n=this.columnCollectionView.items[t];n.sourceItem.width==null&&(n.sourceItem.width=this.getColumnHeaderWidth(n))}this.columnHeaderViewport.scrollLeft=this.rowViewport.scrollLeft,this.redrawColumns&&(this.redrawColumns=!1,this.updateColumns()),this.updateRowTemplate(),l.prototype.updateItems.call(this,e),f.toggleClass(this.element,"vertically-scrolled",this.scrollHandler.scrollTop>0),this.options.useCheckboxSelection&&this.updateCheckboxColumn()},h.prototype.updatePanelSize=function(){if(!this.panel.isReady())return;var e=0;this.options.useCheckboxSelection&&(this.masterCheckboxSize||(this.masterCheckboxSize=this.masterCheckboxCell.offsetWidth),e+=this.masterCheckboxSize);for(var t=0;t<this.columnCollectionView.items.length;t++){var n=this.columnCollectionView.items[t];n.left=e,e+=n.sourceItem.width}var r=e;this.scrollHandler.isVerticalScrollbarVisible()&&(r+=f.getScrollbarSize().width),this.rowPanelSize!==e&&(this.rowPanelSize=e,this.viewportElement.style.width=this.rowPanelSize+"px"),this.columnPanelSize!==r&&(this.columnPanelSize=r,this.columnHeaderPanel.style.width=this.columnPanelSize+"px")},h.prototype.updateRowTemplate=function(){this.rowTemplate||(this.rowTemplate=document.createElement("div"),this.rowTemplate.tabIndex=-1,this.rowTemplate.className="row",this.rowTemplate.setAttribute("role","row")),this.rowTemplate.setAttribute("aria-setsize",this.collectionView.items.length);var e=0,t=this.columnCollectionView.items,n=this.rowTemplate.firstChild,r=n&&n.classList.contains("checkbox-cell");if(this.options.useCheckboxSelection){e=1;if(!r){n=document.createElement("div"),n.className="checkbox-cell";var i=document.createElement("input");i.className="row-checkbox",i.type="checkbox",i.tabIndex=-1,n.appendChild(i),this.rowTemplate.insertBefore(n,this.rowTemplate.firstChild||null)}}else r&&this.rowTemplate.removeChild(n);while(this.rowTemplate.children.length<t.length+e){var s=document.createElement("div");s.className="cell",s.setAttribute("role","gridcell"),this.rowTemplate.appendChild(s)}while(this.rowTemplate.children.length>t.length+e)this.rowTemplate.removeChild(this.rowTemplate.lastChild);for(var o=0;o<t.length;o++)this.rowTemplate.children[o+e].style.width=t[o].sourceItem.width+"px"},h.prototype.getColumnCollectionView=function(){return this.columnCollectionView},h.prototype.getRowCollectionView=function(){return this.collectionView},h.prototype.invalidate=function(e){this.redrawColumns=!0,this.columnInputHandler&&(this.focusedColumn=this.columnInputHandler.getLastFocused()),l.prototype.invalidate.call(this,e)},h.prototype.resizeColumnToFit=function(e){var t=a.resolveArrayItems(this.columnCollectionView.items,e);if(t){var n=this.getColumnHeaderWidth(t),r=this.collectionView.items;if(r.length>0){var i=document.createElement("div");i.className="row",i.style.visibility="hidden";var s=t.sourceItem.propertyName;for(var o=this.panel.firstVisibleItem;o<=this.panel.lastVisibleItem;o++){var u=r[o];if(u.childElements&&u.sourceItem[s]){var f=u.childElements[t.index].cloneNode(!0);f.style.width="auto",i.appendChild(f)}}this.panel.element.appendChild(i);for(o=0;o<i.children.length;o++){var l=i.children[o].offsetWidth+1;l>n&&(n=l)}this.panel.element.removeChild(i)}this.resizeColumn(t,n)}},h.prototype.scrollTo=function(e,t){var n=a.resolveArrayItems(this.columnCollectionView.items,t);n&&this.scrollToColumn(n);var r=a.resolveArrayItems(this.collectionView.items,e);r&&l.prototype.scrollTo.call(this,r)},h.prototype.setOptions=function(e){l.prototype.setOptions.call(this,e),this.options.useCheckboxSelection?this.element.classList.add("has-checkboxes"):this.element.classList.contains("has-checkboxes")&&(this.element.classList.remove("has-checkboxes"),this.collectionView.setProperty("checkbox",null))},h.prototype.sortByColumn=function(e,t){var n=a.resolveArrayItems(this.columnCollectionView.items,e);if(n&&n.sourceItem.isSortable){var r=n.sortDescription;r?t!=null?r.isAscending=t:r.isAscending=!r.isAscending:(this.columnCollectionView.setProperty("sortDescription",null),r={column:n,isAscending:t!=null?t:!0,property:"sourceItem."+n.sourceItem.propertyName,method:n.sourceItem.customSort});var i={sortDescription:r};this.trigger("change:columnSort",i,n),i.cancel||(n.sortDescription=i.sortDescription,this.collectionView.sortHandler.setDescriptions(i.sortDescription),this.collectionView.invalidate())}},n.Events.enableFor(h.prototype),h}),define("packages/controls/src/js/grid/gridControlMobile",["jquery","core","../layout/accordionPanel","../core/collectionView","../core/utility","../core/domUtility"],function(e,t,n,r,i,s){function o(t,o,u,a){a=e.extend({},a),a.handleInput=!1,a.createCollapsedElement=this.createCollapsedElement.bind(this),a.createExpandedElement=this.createExpandedElement.bind(this),n.call(this,t,u,a),this.panel.$element.on("click",".panel-item",this.onRowClick.bind(this)),this.columnCollectionView=new r(o,["name"]),this.columnCollectionView.on({ready:this.onColumnCollectionReady,"add:item":this.onColumnChanged,"change:item":this.onColumnChanged,"insert:item":this.onColumnChanged,"move:item":this.onColumnChanged,"remove:item":this.onColumnChanged},this),i.proxy(this,this,[{from:"collapseItem",to:"collapseRow"},{from:"expandItem",to:"expandRow"},{from:"getCollectionView",to:"getRowCollectionView"}],[{from:"collapse:item",to:"collapse:row"},{from:"expand:item",to:"expand:row"}]),s.disableBrowserSelection(this.$viewportElement)}return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.createContentElement=function(e,t,n){var r,i,o;n?(r=n.sourceItem[t.sourceItem.propertyName],i=[r,t,n],o=[t.sourceItem.createMobileCellContent,t.sourceItem.createCellContent,this.options.createMobileCellContent,this.options.createCellContent]):(r=t.sourceItem.name,i=[r,t],o=[t.sourceItem.createMobileColumnHeader,t.sourceItem.createColumnHeader,this.options.createMobileColumnHeader,this.options.createColumnHeader]);var u=s.getContentElement(r,o,i);u&&e.appendChild(u),t.sourceItem.className&&s.addClass(e,t.sourceItem.className)},o.prototype.createCollapsedElement=function(e){var t=this.getCollapsedElement(),n=this.columnCollectionView.items;for(var r=0;r<2&&r<n.length;r++)this.createContentElement(t.children[r],n[r],e);return t},o.prototype.createExpandedElement=function(e){var t=this.getExpandedElement(),n=this.columnCollectionView.items;for(var r=0;r<n.length;r++){var i=r*2,s=t.children[i],o=t.children[i+1],u=n[r];this.createContentElement(s,u),this.createContentElement(o,u,e)}return t},o.prototype.getCollapsedElement=function(){if(!this.collapsedElementTemplate){this.collapsedElementTemplate=document.createElement("div");var e=document.createElement("span");e.className="cell-content first",this.collapsedElementTemplate.appendChild(e),e=document.createElement("span"),e.className="cell-content",this.collapsedElementTemplate.appendChild(e)}return this.collapsedElementTemplate.cloneNode(!0)},o.prototype.getExpandedElement=function(){if(!this.expandedElementTemplate){this.expandedElementTemplate=document.createElement("div");for(var e=0;e<this.columnCollectionView.items.length;e++){var t=document.createElement("span"),n=document.createElement("span");e===0?(t.className="column-header-content first",n.className="cell-content first"):(t.className="column-header-content",n.className="cell-content"),this.expandedElementTemplate.appendChild(t),this.expandedElementTemplate.appendChild(n)}}return this.expandedElementTemplate.cloneNode(!0)},o.prototype.onColumnChanged=function(){var e,t=this.collectionView.getItems();for(var n=0;n<t.length;n++){var r=t[n];r.isExpanded&&(this.removeItemElement(r),e=!0)}e&&this.throttleUpdate()},o.prototype.onColumnCollectionReady=function(){this.isLoaded=!1,this.collapsedElementTemplate=null,this.expandedElementTemplate=null;var e=this.columnCollectionView.getItems();this.collectionView.setBoundProperties(e.map(function(e){return e.sourceItem.propertyName})),this.invalidate()},o.prototype.onRowClick=function(e){var t=this.collectionView.findByProperty("element",e.currentTarget);this.trigger("open:row",{sourceEvent:e},[t])},o.prototype.getColumnCollectionView=function(){return this.columnCollectionView},t.Events.enableFor(o.prototype),o}),define("packages_controls_src_content_templates_itemContainer_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="item-container">\n    <div class="item-content"></div>\n</div>'}}),define("packages/controls/src/js/virtualPanels/tilePanel",["jquery","../core/positioning"],function(e,t){function n(t,n){this.element=t||document.createElement("div"),this.element.classList.add("item-panel"),this.$element=e(this.element),this.viewportElement=this.element,this.collectionView=n,this.spacers=[]}return n.prototype.calculateHeight=function(e){var t,n;if(!this.areSizesValid){this.itemWidth=0,this.itemHeight=0,this.element.removeAttribute("data-columns");for(t=0;t<e.length;t++){n=e[t];if(n.containerElement){this.itemWidth=n.containerElement.offsetWidth,this.itemHeight=n.containerElement.offsetHeight,this.itemWidth&&this.itemHeight&&(this.areSizesValid=!0);break}}}if(this.areSizesValid&&this.scrollHandler.clientHeight){this.visibleItems=0;for(t=0;t<e.length;t++)n=e[t],n.element&&!n.isInvalid&&this.visibleItems++;var r=this.columnCount;this.columnCount=Math.floor(this.scrollHandler.clientWidth/this.itemWidth)||1,this.rowCount=Math.ceil(e.length/this.columnCount),this.totalHeight=this.rowCount*this.itemHeight,this.areAllItemsRendered=this.visibleItems===e.length,this.justifyContent&&this.columnCount!==r&&this.element.setAttribute("data-columns",Math.min(6,this.columnCount))}},n.prototype.calculateItemTop=function(e,t){return this.isReady()?this.itemHeight*Math.floor(t/this.columnCount):0},n.prototype.calculateVisibleItems=function(e,t){if(this.isReady()){var n=this.itemHeight*Math.ceil(t/this.columnCount);if(n<this.totalHeight){var r=n/2,i=this.scrollHandler.scrollTop+this.scrollHandler.clientHeight/2,s=i-r,o=i+r;s<0?(s=0,o=n):o>this.totalHeight&&(o=this.totalHeight,s=o-n),this.firstItem=this.columnCount*Math.floor(s/this.itemHeight),this.firstVisibleItem=this.columnCount*Math.floor(this.scrollHandler.scrollTop/this.itemHeight),this.lastVisibleItem=this.columnCount*Math.floor(this.scrollHandler.viewportBottom/this.itemHeight)+this.columnCount-1,this.lastItem=this.columnCount*Math.floor(o/this.itemHeight)+this.columnCount-1;return}}this.firstItem=0,this.firstVisibleItem=0,this.lastVisibleItem=e.length-1,this.lastItem=this.lastVisibleItem},n.prototype.fillGaps=function(){},n.prototype.getPageAmount=function(){if(this.isReady())return(Math.floor(this.scrollHandler.clientHeight/this.itemHeight)-1)*this.columnCount},n.prototype.getRowAmount=function(){if(this.isReady())return this.columnCount},n.prototype.isReady=function(){return this.scrollHandler.clientHeight&&this.itemHeight&&this.itemWidth},n.prototype.reset=function(){this.itemWidth=0,this.itemHeight=0,this.columnCount=null,this.areSizesValid=!1},n.prototype.scrollTo=function(e,n,r){var i=e[n];i&&i.containerElement&&(t.scrollIntoView(i.containerElement,this.viewportElement),r&&r())},n.prototype.update=function(e,t){this.calculateHeight(e),this.calculateVisibleItems(e,t)},n}),define("packages/controls/src/js/layout/tileLayoutControl",["jquery","core","template!../../content/templates/itemContainer.html","../virtualPanels/tilePanel","../core/domUtility","../layout/virtualizedPanel"],function(e,t,n,r,i,s){function o(t,n,i){i=e.extend({},i),i.elementProperty="contentElement",i.handleHover=!1,i.itemSelector=".item-content",i.visualProperties=["className","name"];var o;i.displayType==="list"?(o="list-panel",i.scrollElementProperty="containerElement"):(i.PanelType=r,i.selectionDirection="both",o=i.displayType==="card"?"card-panel":"thumbnail-panel"),s.call(this,t,n,i),this.viewportElement.classList.add(o),i.displayType==="card"&&(this.panel.justifyContent=!0)}return o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.createItemContainer=function(e){var t=e.sourceItem;t.className&&i.addClass(e.containerElement,t.className);var n=i.getContentElement(t.name,[this.options.createItem],[e]);return n&&e.contentElement.appendChild(n),n},o.prototype.createVisualElements=function(t,r){this.itemTemplate||(this.itemTemplate=i.renderTemplate(n));var s,o;for(var u=0;u<t.length;u++){var a=t[u],f=o;o=a.group?a.group.containerElement:this.panel.element,s&&f!==o&&(f.appendChild(s),s=null),a.containerElement&&o.contains(a.containerElement)?s&&(o.insertBefore(s,a.containerElement),s=null):(a.containerElement||(a.containerElement=this.itemTemplate.cloneNode(!0),a.contentElement=a.containerElement.firstElementChild,a.contentElement.setAttribute("aria-selected",a.isSelected===!0),a.contentElement.setAttribute("aria-posinset",u+1),a.contentElement.setAttribute("aria-setsize",t.length)),s||(s=document.createDocumentFragment()),s.appendChild(a.containerElement)),r[u]&&(a.isInvalid=!1,this.removeItemElement(a),a.element=this.createItemContainer(a),a.$element=e(a.element))}s&&o.appendChild(s)},o.prototype.onItemRemoved=function(e,t){i.detachElement(t.containerElement),this.removeItemElement(t)},o}),define("packages/controls/src/js/grid/gridTileView",["core","../layout/tileLayoutControl","../core/collectionView","../core/utility"],function(e,t,n,r){function i(e,i,s,o){t.call(this,e,s,o);var u;switch(this.options.displayType){case"card":u=this.options.createCardItem;break;case"list":u=this.options.createListItem;break;case"thumbnail":u=this.options.createThumbnailItem}u&&(this.options.createItem=u),this.columnCollectionView=new n(i,["name"]),this.columnCollectionView.on("ready",this.onColumnsReady,this),this.columnCollectionView.on("change:item",this.onColumnChanged,this),this.onColumnsReady(),this.getRowCollectionView=this.getCollectionView,this.deselectRow=this.deselect,this.focusRow=this.focus,this.getFocusedRow=this.getFocused,this.getSelectedRows=this.getSelected,this.selectRow=this.select,this.inputHandler.on({"dblclick:item":this.invokeOpenRow,"enter:item":this.invokeOpenRow},this),r.proxy(this.inputHandler,this,null,[{from:"contextmenu:item",to:"contextmenu:row"}])}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.getColumnCollectionView=function(){return this.columnCollectionView},i.prototype.invokeOpenRow=function(e,t){Array.isArray(t)||(t=[t]),this.trigger("open:row",e,t)},i.prototype.onColumnChanged=function(){this.invalidate()},i.prototype.onColumnsReady=function(){var e=this.columnCollectionView.getItems();this.collectionView.setBoundProperties(e.map(function(e){return e.sourceItem.propertyName})),this.invalidate()},i}),define("packages/controls/src/js/grid/grid",["jquery","core","./gridControl","./gridControlMobile","./gridTileView","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o){function u(t,n,r,i){this.options=e.extend({},i),this.$element=o.getElement(t).addClass("grid"),this.createControl(n,r,this.options,this.getDisplayType(this.options))}return u.prototype.createControl=function(e,t,n,r){this.displayType=r;var i=this.getControlType(r),o=document.createElement("div");o.className="grid-content-container",this.$element.empty().append(o),this.$element.toggleClass("no-container",r!=="grid"&&r!=="list"),this.gridControl=new i(o,e,t,n),s.proxy(this.gridControl,this,["collapseRow","deselectRow","focusColumn","focusRow","expandRow","getColumnCollectionView","getFocusedColumn","getFocusedRow","getRowCollectionView","getSelectedRows","invalidate","onLoaded","resizeColumnToFit","scrollTo","selectRow","sortByColumn"],[{from:"change:visibleItems",to:"change:visibleRows"},{from:"render:items",to:"render:rows"}]),this.gridControl.inputHandler&&s.proxy(this.gridControl.inputHandler,this,[],[{from:"click:item",to:"click:row"},{from:"dblclick:item",to:"dblclick:row"},{from:"enter:item",to:"enter:row"},{from:"keydown:item",to:"keydown:row"}]),this.gridControl.on("all",function(){this.trigger.apply(this,arguments)},this)},u.prototype.getControlType=function(e){switch(e){case"card":case"list":case"thumbnail":return i;case"grid":return n;case"mobileGrid":return r}},u.prototype.getDisplayType=function(e){var n=e&&e.displayType;switch(n){case"card":case"grid":case"mobileGrid":case"list":case"thumbnail":return n;default:return t.PlatformDetector.type()==="phone"?"mobileGrid":"grid"}},u.prototype.setOptions=function(t){e.extend(this.options,t);var n=this.getDisplayType(t);if(n!==this.displayType){var r=this.gridControl.getRowCollectionView(),i=r.getDataOrganizers(),s;this.gridControl.getSelected&&(s=this.gridControl.getSelected());var o=this.gridControl.getColumnCollectionView().getSourceItems();this.createControl(o,r.getSourceItems(),this.options,n);var u=this.gridControl.getRowCollectionView();u.setDataOrganizers(i),i.length&&u.invalidate();if(s&&s.length){var a=[];for(var f=0;f<s.length;f++){var l=u.findByProperty("sourceItem",s[f].sourceItem);l&&a.push(l)}this.gridControl.selectRow(a)}}else this.gridControl.setOptions(t)},t.Events.enableFor(u.prototype),u}),define("packages/controls/src/js/dataOrganizers/groupHandler",["core","./dataOrganizer"],function(e,t){function n(){t.apply(this,arguments)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.organizeData=function(t,n){var r=[],i={},s=[],o;for(var u=0;u<this.descriptions.length;u++){var a=this.descriptions[u];if(!a.method&&!a.property)continue;var f=a.method,l=a.property&&a.property.split(".");for(var c=0;c<t.length;c++){var h=t[c],p=h;if(l)for(var d=0;p&&d<l.length;d++)p=p[l[d]];f&&(p=f(p)),p!=null?(o=i[p],o||(o={name:p,items:[]},r.push(o),i[p]=o),o.items.push(h)):s.push(h)}}r.length&&s.length&&r.push({name:e.Strings.translate("controls.unstructuredItems"),items:s}),n(t,r.length?r:null)},n}),define("packages/controls/src/js/dataOrganizers/hierarchicalDataOrganizer",["./dataOrganizer"],function(e){function t(t,n){e.apply(this),this.handler=t,this.rootItem=n}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.organizeData=function(e,t){this.handler.setDescriptions(this.descriptions);var n={childIndex:0,item:this.rootItem};while(n){var r=n.item,i=r.children?r.children.length:0;for(var s=n.childIndex;s<i;s++){var o=r.children[s];if(o.children&&o.children.length){n.childIndex=s+1,n={childIndex:0,item:o,previous:n};break}}s>=i&&(this.handler.apply(r.children),n=n.previous)}t(e)},t}),define("packages/controls/src/js/core/hierarchicalCollectionView",["./collectionView","../dataOrganizers/filterHandler","../dataOrganizers/hierarchicalDataOrganizer","../dataOrganizers/sortHandler"],function(e,t,n,r){function i(t,n){this.rootItem={children:[],sourceItem:{},isExpanded:!0,isVisible:!0},e.call(this,t,n)}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.getLastChildOf=function(e){while(e.children&&e.children.length)e=e.children[e.children.length-1];return e},i.prototype.getOrganizableArray=function(){return this.rootItem.children},i.prototype.hasChildren=function(e){return e&&e.children&&e.children.length},i.prototype.isChildOf=function(e,t){t==null&&(t=this.rootItem);while(e!=null){if(e.parent===t)return!0;e=e.parent}return!1},i.prototype.reIndexItems=function(){this.items.length=0;var e={childIndex:0,item:this.rootItem,previous:null};while(e){var t=e.item,n=t.children?t.children.length:0;for(var r=e.childIndex;r<n;r++){var i=t.children[r];i.childIndex=r,i.index=this.items.length,this.items.push(i);if(i.children&&i.children.length){e.childIndex=r+1,e={childIndex:0,item:i,previous:e};break}}r>=n&&(e=e.previous)}},i.prototype.setSourceItems=function(e){this.items.length=0,this.rootItem.children.length=0,this.sourceItems=e!=null?e.slice():[],this.rootItem.sourceItem.children=this.sourceItems;var t={childIndex:0,previous:null,viewItem:this.rootItem,item:this.rootItem.sourceItem};while(t){var n=t.item,r=t.viewItem,i=n.children?n.children.length:0;for(var s=t.childIndex;s<i;s++){var o=n.children[s];o.parent=n;var u=this.createViewItem(o,this.items.length,s);u.parent=r,u.childIndex=s,this.items.push(u),u.isVisible=(r.isExpanded&&r.isVisible)===!0,r.children.push(u);if(o.children&&o.children.length){u.children=[],t.childIndex=s+1,t={childIndex:0,item:o,viewItem:u,previous:t};break}}s>=i&&(t=t.previous)}},i.prototype.updateChildIndices=function(e){var t=e.parent.children;for(var n=0;n<t.length;n++)t[n].childIndex=n},i.prototype.updateIndices=function(e,t){for(var n=0;n<this.items.length;n++){var r=this.items[n];r!==e&&r.index>=e.index&&(r.index+=t)}},i.prototype.updateSourceIndices=function(e,t){var n=e.parent.children;for(var r=0;r<n.length;r++){var i=n[r];i!==e&&i.sourceIndex>=e.sourceIndex&&(i.sourceIndex+=t)}},i.prototype.add=function(e,t){if(e){var n;if(t){t.children||(t.children=[]),t.sourceItem.children||(t.sourceItem.children=[]);var r=this.getLastChildOf(t);n=this.createViewItem(e,r.index+1,t.sourceItem.children.length),this.updateIndices(n,1)}else t=this.rootItem,n=this.createViewItem(e,this.items.length,t.sourceItem.children.length);return n.isVisible=(t.isExpanded&&t.isVisible)===!0,n.childIndex=t.children.length,n.parent=t,e.parent=t.sourceItem,t.children.push(n),t.sourceItem.children.push(e),this.items.splice(n.index,0,n),this.trigger("add:item",{},n),this.pendInvalidation(),n}},i.prototype.getRoot=function(){return this.rootItem},i.prototype.insert=function(e,t,n){if(e&&t){var r=t.children[n];if(r){var i=this.createViewItem(e,r.index,r.sourceIndex);return i.isVisible=(t.isExpanded&&t.isVisible)===!0,i.childIndex=n,t.children.splice(i.childIndex,0,i),t.sourceItem.children.splice(i.sourceIndex,0,e),i.parent=t,e.parent=t.sourceItem,i.index=r.index,this.items.splice(i.index,0,i),this.updateIndices(i,1),this.updateChildIndices(i),this.updateSourceIndices(i,1),this.trigger("insert:item",{},i),this.pendInvalidation(),i}return this.add(e,t)}},i.prototype.move=function(e,t,n){if(e){var r={oldChildIndex:e.childIndex,oldParent:e.parent,newParent:t};e.parent.children.splice(e.childIndex,1),e.parent.sourceItem.children.splice(e.sourceIndex,1),this.updateSourceIndices(e,-1);var i=t.children[n];return i?e.sourceIndex=i.sourceIndex:e.sourceIndex=0,e.parent=t,e.sourceItem.parent=t.sourceItem,t.children.splice(n,0,e),t.sourceItem.children.splice(e.sourceIndex,0,e.sourceItem),this.reIndexItems(),this.updateSourceIndices(e,1),r.newChildIndex=e.childIndex,this.trigger("move:item",r,e),this.pendInvalidation(),e}},i.prototype.remove=function(e){if(e)return this.items.splice(e.index,1),e.parent.children.splice(e.childIndex,1),e.parent.sourceItem.children.splice(e.sourceIndex,1),this.updateIndices(e,-1),this.updateChildIndices(e),this.updateSourceIndices(e,-1),this.trigger("remove:item",{},e),this.pendInvalidation(),e},i.prototype.setFilterHandler=function(r){e.prototype.setFilterHandler.call(this,r||new n(new t,this.rootItem))},i.prototype.setSortHandler=function(t){e.prototype.setSortHandler.call(this,t||new n(new r,this.rootItem))},i}),define("packages_controls_src_content_templates_listItem_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="list-item" tabindex="-1" role="listitem" aria-selected="false">\r\n    <div class="list-item-container">\r\n        <div class="list-item-checkbox-container">\r\n            <input type="checkbox" class="list-item-checkbox"/>\r\n        </div>\r\n        <span class="icon" aria-hidden="true"></span>\r\n        <div class="list-item-content-container"></div>\r\n    </div>\r\n</div>'}}),define("packages/controls/src/js/list/listControl",["jquery","core","template!../../content/templates/listItem.html","../popups/tooltip","../core/domUtility","../layout/virtualizedPanel"],function(e,t,n,r,i,s){function o(t,n,i){i=e.extend({},i),i.handleHover=!1,i.itemSelector=".list-item",i.visualProperties=["className","iconClass","isDisabled","name"],s.call(this,t,n,i),this.viewportElement.classList.add("list"),this.viewportElement.setAttribute("role","list"),this.panel.$element.on("click",".list-item-checkbox-container",this.onItemCheckboxCellClick.bind(this)),this.inputHandler.on({"click:item":this.onItemClick,"dblclick:item":this.onItemDoubleClick,"enter:item":this.invokeOpenItem},this),this.on("change:selection",this.onSelectionChanged,this),r.registerForAutoTooltip(this.panel.element,".list-item-content-container")}return o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.createItemContainer=function(e){this.itemTemplate||(this.itemTemplate=i.renderTemplate(n),i.removeWhitespaceElements(this.itemTemplate));var t=e.sourceItem,r=this.itemTemplate.cloneNode(!0);t.className&&i.addClass(r,t.className),t.iconClass&&i.addClass(r.querySelector(".icon"),t.iconClass),e.isSelected&&this.options.useCheckboxSelection&&(r.querySelector("input").checked=!0),t.isDisabled&&r.setAttribute("aria-disabled",!0);var s=i.getContentElement(t.name,[this.options.createItem],[e]);s&&r.querySelector(".list-item-content-container").appendChild(s);if(this.options.createItemIndicator){var o=i.getHTMLElement(this.options.createItemIndicator(e));if(o){var u=document.createElement("div");u.className="list-item-indicator",u.appendChild(o),r.querySelector(".list-item-container").appendChild(u)}}return r},o.prototype.invokeOpenItem=function(e,t){t&&t.length&&this.trigger("open:item",e,t)},o.prototype.onItemCheckboxCellClick=function(e){var t=i.findParent(e.currentTarget,".list-item"),n=this.collectionView.findByProperty("element",t);e.shiftKey?this.inputHandler.selectTo(n,!0):this.inputHandler.toggleSelection(n),t.setAttribute("data-focus-hidden",""),t.focus(),e.stopImmediatePropagation()},o.prototype.onItemClick=function(e,t){var n=e.ctrlKey||e.metaKey||e.shiftKey;this.options.openOnClick&&!n&&this.invokeOpenItem(e,[t])},o.prototype.onItemDoubleClick=function(e,t){this.invokeOpenItem(e,[t])},o.prototype.onSelectionChanged=function(e,t){if(this.options.useCheckboxSelection)for(var n=0;n<t.length;n++){var r=t[n];if(r.element){var i=r.element.querySelector(".list-item-checkbox");i.checked=r.isSelected}}},o.prototype.invalidate=function(e){i.toggleClass(this.panel.element,"show-icons",this.collectionView.hasProperty("iconClass")),i.toggleClass(this.panel.element,"show-checkboxes",this.options.useCheckboxSelection===!0),s.prototype.invalidate.call(this,e)},o}),define("packages/controls/src/js/buttons/menuButton",["core","../popups/menu","../core/utility","../core/domUtility"],function(e,t,n,r){function i(e,t,i){this.$element=r.getElement(e).on("click",this.onButtonClick.bind(this)),this.options=n.mergeProperties({direction:"bottom",modifyButtonState:!0},i),this.items=t||[],this.element=this.$element[0],this.element.setAttribute("aria-pressed",!1),this.element.setAttribute("aria-haspopup",!0)}return i.prototype.forwardEvents=function(e,t,n){this.trigger(e,t,n),!t.cancel&&e==="close"&&(this.options.modifyButtonState&&(this.menu.sourceElement.classList.remove("selected"),this.menu.sourceElement.setAttribute("aria-pressed",!1)),this.menu=null)},i.prototype.onButtonClick=function(e){if(this.menu)this.menu.close();else{var n=e.currentTarget;this.options.modifyButtonState&&(n.classList.add("selected"),n.setAttribute("aria-pressed",!0)),this.menu=t.show(n,this.items,this.options),this.menu.on("all",this.forwardEvents,this)}},i.prototype.getItems=function(){return this.items},i.prototype.getMenu=function(){return this.menu},i.prototype.isOpen=function(){return this.menu!=null},i.prototype.setItems=function(e){this.items=e||[]},e.Events.enableFor(i.prototype),i}),define("packages/controls/src/js/animation/expander",["jquery","../animation/animator","../core/domUtility"],function(e,t,n){return{animateElement:function(n,r){if(n){var i,s;r?(s=n.scrollHeight,i=n.offsetHeight,e(n).trigger("expand"),n.classList.remove("collapsed")):(s=0,i=n.offsetHeight),t.animate({source:n,properties:{name:"maxHeight",unitType:"px",from:i,to:s},onFinished:function(){r?n.style.maxHeight="":(e(n).trigger("collapse"),n.classList.add("collapsed"))}})}},collapseElement:function(e){e.classList.add("collapsed"),this.animateElement(this.findTargetElement(e),!1)},expandElement:function(e){e.classList.remove("collapsed"),this.animateElement(this.findTargetElement(e),!0)},findTargetElement:function(e){var t,n=e.getAttribute("data-expand-target");if(n){var r=e;while(!t&&r&&r.querySelector)t=r.querySelector(n),r=r.parentNode}return t||e.nextElementSibling},toggleElement:function(e){e.classList.contains("collapsed")?this.expandElement(e):this.collapseElement(e)}}}),define("packages_controls_src_content_templates_navigationItemHeader_html",[],function(){return function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<h3 class="nav-header" data-expander>',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</h3>",s}}),define("packages_controls_src_content_templates_navigationItem_html",[],function(){return function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+='\n    <span class="icon icon-16 ',(s=n.iconClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconClass,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'" aria-hidden="true"></span>\n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<li class="nav-item ',(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" tabindex="-1">\n    <div class="expand-indicator">\n        <span aria-hidden="true"></span>\n    </div>\n    ',o=n["if"].call(t,t&&t.iconClass,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+='\n    <span class="item-content">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</span>\n</li>",s}}),define("packages/controls/src/js/layout/navigation",["jquery","core","../animation/animationFrame","../animation/expander","../dataOrganizers/groupHandler","../core/hierarchicalCollectionView","../core/inputHandler","../core/positioning","../popups/tooltip","../core/utility","../core/domUtility","template!../../content/templates/navigationItemHeader.html","template!../../content/templates/navigationItem.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(n,r,u){this.$element=l.getElement(n),this.element=this.$element[0],this.options=e.extend({indentationSize:23,openOnClick:!0,flattenHierarchy:t.PlatformDetector.type()==="phone"},u),this.element.classList.add("navigation"),this.options.flattenHierarchy&&this.element.classList.add("flattened"),this.$element.on("click",".expand-indicator",this.onExpanderClick.bind(this)),this.collectionView=new s(r,["className","groupName","iconClass","isDisabled","name"]),this.groupHandler=new i,this.collectionView.getDataOrganizers().push(this.groupHandler),this.collectionView.on({ready:this.onCollectionBuilt,"add:item":this.throttleUpdate,"change:item":this.onItemChanged,"insert:item":this.throttleUpdate,"move:item":this.throttleUpdate,"remove:item":this.throttleUpdate},this),this.inputHandler=new o(this.element,{handleDoubleClick:!1,handleHover:!1,itemSelector:".nav-item",selectionMode:"single"}),this.inputHandler.on({"click:item":this.onItemClick,"enter:item":this.invokeOpenItem,"left:item":this.onLeftKeyDown,"right:item":this.onRightKeyDown,"change:focus":this.onFocusChanged},this),f.proxy(this.inputHandler,this,["deselect","focus","getFocused","getSelected","select"],["change:selection","contextmenu:item"]),a.registerForAutoTooltip(this.element,".item-content"),this.onCollectionBuilt(),this.setOptions()}return p.prototype.calculateVisibility=function(){for(var e=0;e<this.collectionView.items.length;e++){var t=this.collectionView.items[e];t.isVisible=(t.parent.isExpanded&&t.parent.isVisible)===!0}},p.prototype.createGroup=function(e,t,n){var r,i=document.createElement("ul");i.className="expandable";if(n){r=t.children,t.childContainer=i,i.setAttribute("role","group");if(!this.options.flattenHierarchy){var s=t.element.querySelector(".expand-indicator span");s.className=t.isExpanded?"icon-arrow_south":"icon-arrow_east",t.element.setAttribute("aria-expanded",t.isExpanded===!0),t.isExpanded||(i.style.maxHeight="0px")}}else r=t.items,t.name&&e.appendChild(this.createGroupHeader(t));var o=n*this.options.indentationSize+"px";for(var u=0;u<r.length;u++){var a=r[u];a.element=this.createItemElement(a),i.appendChild(a.element),n&&(a.element.style.paddingLeft=o),a.children&&a.children.length&&this.createGroup(i,a,n+1)}e.appendChild(i)},p.prototype.createGroupHeader=function(e){var t;return this.options.createGroupHeader&&(t=l.getHTMLElement(this.options.createGroupHeader(e))),t||l.renderTemplate(c,e)},p.prototype.createItemElement=function(e){var t=l.renderTemplate(h,e);l.removeWhitespaceElements(t),t.setAttribute("aria-selected",e.isSelected===!0),e.isDisabled&&t.setAttribute("aria-disabled",!0);if(this.options.createItem){var n=l.getContentElement(e.name,[this.options.createItem],[e]);n&&this.element.replaceChild(n,t.querySelector(".item-content"))}if(this.options.createItemIndicator){var r=l.getHTMLElement(this.options.createItemIndicator(e));r&&t.appendChild(r)}return t},p.prototype.findGroupHeader=function(e){var t=this.collectionView.getGroups();if(t&&t.length){var n=e.element;while(n){if(n.classList.contains("expandable"))return n.previousElementSibling;n=n.parentNode}}},p.prototype.onCollectionBuilt=function(){var e=this.collectionView.getItems();this.inputHandler&&(this.focusedItem=e[0],this.inputHandler.setItems(e),this.inputHandler.lastFocusedItem=this.focusedItem),this.calculateVisibility(),this.invalidate()},p.prototype.onExpanderClick=function(e){var t=l.findParent(e.currentTarget,".nav-item"),n=this.collectionView.findByProperty("element",t);this.collectionView.hasChildren(n)&&(this.setItemExpansion(n,!n.isExpanded),t.setAttribute("data-focus-hidden",""),t.focus(),e.stopPropagation())},p.prototype.onFocusChanged=function(e,t){t&&t.element&&(this.focusedItem=null,this.scrollToItem(t),t.element.tabIndex=0,t.element.focus(),(!e.sourceEvent||e.sourceEvent.type==="click")&&t.element.setAttribute("data-focus-hidden","")),this.trigger("change:focus",e,t)},p.prototype.onItemChanged=function(e,t){if(t.element){var n=this.createItemElement(t),r=t.element.parentNode;r.replaceChild(n,t.element),t.element=n}},p.prototype.onItemClick=function(e,t){var n=e.ctrlKey||e.metaKey||e.shiftKey;t&&this.options.openOnClick&&!n&&this.trigger("open:item",e,t)},p.prototype.onLeftKeyDown=function(e,t){this.collapse(t)},p.prototype.onRightKeyDown=function(e,t){this.expand(t)},p.prototype.scrollToItem=function(e){var t=this.findGroupHeader(e);t&&t.classList.contains("collapsed")&&r.expandElement(t);var n=e.parent;while(n&&n.parent)n.isExpanded||this.expand(n),n=n.parent;u.scrollIntoView(e.element,this.element)},p.prototype.setItemExpansion=function(e,t){e.isExpanded=t,r.animateElement(e.childContainer,t),e.element.setAttribute("aria-expanded",t===!0),e.element.querySelector(".expand-indicator span").className=t?"icon-arrow_south":"icon-arrow_east",this.calculateVisibility()},p.prototype.update=function(){this.$element.empty();var e=this.collectionView.getGroups();l.toggleClass(this.element,"grouped",e);if(e){var t=document.createDocumentFragment();for(var n=0;n<e.length;n++)this.createGroup(t,e[n],0);this.element.appendChild(t)}else this.createGroup(this.element,{items:this.collectionView.getRoot().children},0);this.trigger("render",{},this)},p.prototype.collapse=function(e){this.collectionView.hasChildren(e)&&!this.options.flattenHierarchy&&this.setItemExpansion(e,!1)},p.prototype.expand=function(e){this.collectionView.hasChildren(e)&&!this.options.flattenHierarchy&&this.setItemExpansion(e,!0)},p.prototype.getCollectionView=function(){return this.collectionView},p.prototype.getElement=function(){return this.$element},p.prototype.invalidate=function(){this.inputHandler&&(this.focusedItem=this.inputHandler.getLastFocused()),l.toggleClass(this.element,"show-icons",this.collectionView.hasProperty("iconClass")),l.toggleClass(this.element,"show-expanders",this.collectionView.hasProperty("children")),n.throttleByFrame({context:this,method:this.update})},p.prototype.scrollTo=function(e){var t=this.collectionView.items,n=f.resolveArrayItems(t,e);n&&this.scrollToItem(n)},p.prototype.setOptions=function(t){e.extend(this.options,t),this.options.groupBy?this.groupHandler.setDescriptions({property:"sourceItem."+this.options.groupBy}):this.groupHandler.setDescriptions(),this.collectionView.invalidate()},t.Events.enableFor(p.prototype),p}),define("packages/controls/src/js/core/measuredElement",[],function(){function e(e){this.element=e}return e.prototype.calculateBoxSizes=function(){if(!this.boxSizes){var e=window.getComputedStyle(this.element,null);if(!e)return;var t=parseFloat(e.borderTopWidth)||0,n=parseFloat(e.borderBottomWidth)||0,r=parseFloat(e.borderLeftWidth)||0,i=parseFloat(e.borderRightWidth)||0,s=parseFloat(e.marginTop)||0,o=parseFloat(e.marginBottom)||0,u=parseFloat(e.marginLeft)||0,a=parseFloat(e.marginRight)||0,f=parseFloat(e.paddingTop)||0,l=parseFloat(e.paddingBottom)||0,c=parseFloat(e.paddingLeft)||0,h=parseFloat(e.paddingRight)||0;this.boxSizes={horizontalBorder:r+i,horizontalPadding:c+h,horizontalMargin:u+a,verticalBorder:t+n,verticalPadding:f+l,verticalMargin:s+o}}return!0},e.prototype.invalidate=function(){this.boxSizes=null},e.prototype.getWidth=function(){return this.calculateBoxSizes()?this.element.offsetWidth-this.boxSizes.horizontalPadding-this.boxSizes.horizontalBorder:0},e.prototype.getHeight=function(){return this.calculateBoxSizes()?this.element.offsetHeight-this.boxSizes.verticalPadding-this.boxSizes.verticalBorder:0},e.prototype.getOuterWidth=function(e){return this.calculateBoxSizes()?e?this.element.offsetWidth+this.boxSizes.horizontalMargin:this.element.offsetWidth:0},e.prototype.getOuterHeight=function(e){return this.calculateBoxSizes()?e?this.element.offsetHeight+this.boxSizes.verticalMargin:this.element.offsetHeight:0},e.prototype.setWidth=function(e){this.calculateBoxSizes()&&(this.element.style.width=e+this.boxSizes.horizontalBorder+this.boxSizes.horizontalPadding+"px")},e.prototype.setHeight=function(e){this.calculateBoxSizes()&&(this.element.style.height=e+this.boxSizes.verticalBorder+this.boxSizes.verticalPadding+"px")},e.prototype.setOuterWidth=function(e,t){this.calculateBoxSizes()&&(t?this.element.style.width=e-this.boxSizes.horizontalMargin+"px":this.element.style.width=e+"px")},e.prototype.setOuterHeight=function(e,t){this.calculateBoxSizes()&&(t?this.element.style.height=e-this.boxSizes.verticalMargin+"px":this.element.style.height=e+"px")},e}),define("packages/controls/src/js/layout/pane",["jquery","core","../animation/animator","../core/domUtility"],function(e,t,n,r){function i(e,t){this.$element=r.getElement(e),this.element=this.$element[0],this.element.classList.add("pane"),this.element.setAttribute("data-resizer",""),this.layoutOptions={},this.paneOptions={dockType:"center",isDraggable:!0,isResizable:!0,isVisible:!0,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,priority:0},this.setOptions(t),this.resolveOptions()}return i.prototype.animate=function(e,t){if(this.options.dockType==="center"){t&&t();return}var r,i,s;if(this.options.dockType==="floating")r=this.element,i={name:"opacity",from:e?0:1,to:e?1:0};else{r=this,s=function(){this.trigger("animating",{},this)}.bind(this),e?(this.width=this.shownWidth,this.height=this.shownHeight):(this.shownWidth=this.width,this.shownHeight=this.height);var o;this.isVertical()?(o="width",this.calculateWidth()):(o="height",this.calculateHeight()),i={name:o,from:e?0:this[o],to:e?this[o]:0}}this.animation=n.animate({source:r,properties:i,onFinished:function(){this.animation=null,this.trigger("animationComplete",{},this),t&&t()}.bind(this)}),this.animation.on("update",s)},i.prototype.calculateHeight=function(e){if(this.isAnimatingHeight())return;var t;this.isVertical()?t=this.regionHeight:this.isHorizontal()&&(e||!this.options.height?(this.element.style.width=this.regionWidth+"px",this.element.style.height="auto",t=this.element.offsetHeight):t=this.options.height),this.setHeight(t)},i.prototype.calculateWidth=function(e){if(this.isAnimatingWidth())return;var t;this.isVertical()?e||!this.options.width?(this.element.style.height=this.regionHeight+"px",this.element.style.width="auto",t=this.element.offsetWidth):t=this.options.width:this.isHorizontal()&&(t=this.regionWidth),this.setWidth(t)},i.prototype.constrainSize=function(){this.setWidth(this.width),this.setHeight(this.height)},i.prototype.getID=function(){return this.options.id||this.element.id},i.prototype.isAnimatingHeight=function(){return this.animation&&this.animation.properties[0].name==="height"},i.prototype.isAnimatingWidth=function(){return this.animation&&this.animation.properties[0].name==="width"},i.prototype.isHorizontal=function(){return this.options.dockType==="top"||this.options.dockType==="bottom"},i.prototype.isVertical=function(){return this.options.dockType==="left"||this.options.dockType==="right"},i.prototype.resolveOptions=function(){this.options=e.extend({},this.paneOptions,this.layoutOptions),this.options.dockType=this.options.dockType.toLowerCase(),this.options.dockType==="center"?this.options.isResizable=!0:this.options.isFixed&&(this.options.isResizable=!1),r.toggleClass(this.element,"pane-floating",this.options.dockType==="floating"),r.toggleAttribute(this.element,"data-draggable",this.options.dockType==="floating"&&this.options.isDraggable),this.setVisibility(this.options.isVisible)},i.prototype.setHeight=function(e){if(this.isAnimatingHeight()||!e&&e!==0)return;e<this.options.minHeight?this.height=this.options.minHeight:e>this.options.maxHeight?this.height=this.options.maxHeight:this.height=e},i.prototype.setLayoutOptions=function(t){this.layoutOptions=e.extend({},t),this.resolveOptions()},i.prototype.setWidth=function(e){if(this.isAnimatingWidth()||!e&&e!==0)return;e<this.options.minWidth?this.width=this.options.minWidth:e>this.options.maxWidth?this.width=this.options.maxWidth:this.width=e},i.prototype.updateOptionsSize=function(){this.isHorizontal()||(this.options.width=this.width),this.isVertical()||(this.options.height=this.height)},i.prototype.hide=function(e){this.animation&&this.animation.finish(),this.isVisible&&this.animate(!1,function(){this.setVisibility(!1),e&&e()}.bind(this))},i.prototype.setOptions=function(t){e.extend(this.paneOptions,t),this.resolveOptions(),this.trigger("change:options",{},this)},i.prototype.setVisibility=function(e){this.isVisible!==e&&(this.isVisible=e,this.visibilityChanged=!0,this.element.style.display=e?"":"none",this.trigger("change:visibility",{},this))},i.prototype.show=function(e){this.animation&&this.animation.finish(),this.isVisible||(this.setVisibility(!0),this.animate(!0,e))},t.Events.enableFor(i.prototype),i}),define("packages_controls_src_content_templates_popover_html",[],function(){return function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+="\r\n    <button class='popover-close-button containerless' aria-label=\""+f((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"controls.closeButtonLabel",s):a.call(e,"i18n","controls.closeButtonLabel",s)))+'" type="button" >\r\n        <span class=\'icon-close\' aria-hidden="true"></span>\r\n    </button>\r\n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function",c=this;s+='<div class="popover ',(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===l?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" tabindex="0">\r\n    <iframe class="iframe-fix-element" aria-hidden="true"></iframe>\r\n    <div class="popover-content ',(u=n.containerClass)?o=u.call(t,{hash:{},data:i}):(u=t&&t.containerClass,o=typeof u===l?u.call(t,{hash:{},data:i}):u),s+=f(o)+'"></div>\r\n    ',o=n["if"].call(t,t&&t.showCloseButton,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;return s+="\r\n</div>",s}}),define("packages/controls/src/js/popups/popover",["jquery","core","./popup","template!../../content/templates/popover.html","./tooltip","../core/utility","../core/domUtility","../rendering/visualItemFactory"],function(e,t,n,r,i,s,o,u){function a(t,r){n.call(this,t,e.extend({centerVertically:!0,closeOnBackgroundClick:!0,closeOnEscape:!0,showCloseButton:!1,showPointer:!0,sourcePadding:3},r)),this.options.isInteractive||this.$sourceElement.on("mousemove.popover",this.onMouseMove.bind(this)).on("mouseleave.popover",this.onMouseLeave.bind(this))}return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.close=function(e){if(!this.isClosing){var t={sourceEvent:e,cancel:!1};this.trigger("close",t,this),t.cancel||(n.prototype.close.call(this),this.$sourceElement.off("mousemove.popover").off("mouseleave.popover"))}},a.prototype.onMouseMove=function(e){this.options.mouseLeft=e.pageX,this.options.mouseTop=e.pageY},a.prototype.onMouseLeave=function(){this.close()},a.prototype.onShown=function(){this.$sourceElement.off("mousemove.popover"),i.close(),this.options.source=this.getEffectiveValue("source","data-popover-source")||"element",this.options.direction=this.getEffectiveValue("direction","data-popover-direction")||"top",this.options.source!=="element"&&(this.options.showPointer=!1);var t=this.options.isInteractive&&this.options.showCloseButton;this.element=o.renderTemplate(r,{className:this.options.className,containerClass:this.options.containerClass,showCloseButton:t}),this.$element=e(this.element),this.container=this.element.querySelector(".popover-content"),this.container.appendChild(u.createItem(this.options.content).element),this.options.isInteractive&&(t&&this.element.classList.add("interactive"),this.$element.on("click",".popover-close-button",this.close.bind(this)),this.$sourceElement.off("mouseleave.popover"),this.options.closeOnBackgroundClick&&this.handleBackgroundClick(),this.options.closeOnEscape&&this.handleEscapeKeyDown()),n.prototype.onShown.call(this),this.trigger("show",{},this),this.options.focus!==!1&&this.element.focus()},a.prototype.show=function(){this.$sourceElement.trigger("show:popover",this),this.options.content&&n.prototype.show.call(this)},a.prototype.verifySource=function(){return this.options.isInteractive||this.sourceElement===document.body||o.matches(this.sourceElement,":hover")?n.prototype.verifySource.call(this):!1},{popovers:[],onPopoverClosed:function(e,t){s.removeFromArray(this.popovers,t)},cancelShowOnHover:function(t){e(t).off("mouseenter.popover")},close:function(){for(var e=this.popovers.length-1;e>=0;e--){var t=this.popovers[e];t.options.isInteractive||t.close()}},show:function(e,t){if(e){var n=o.getElement(e),r;for(var i=0;i<this.popovers.length;i++){r=this.popovers[i];if(r.options.isInteractive&&r.sourceElement===n[0])return}return this.close(),r=new a(n,t),r.on("close",this.onPopoverClosed,this),r.show(),this.popovers.push(r),r}},showOnHover:function(t,n){if(t){var r=this;o.getElement(t,!0).on("mouseenter.popover",function(){r.show(this,e.extend({},n))})}}}}),define("packages/controls/src/js/popups/popoverMenu",["jquery","core","./menuItem","./popover","../core/domUtility"],function(e,t,n,r,i){function o(t){this.options=e.extend({},s,t),this.element=document.createElement("div"),this.element.className=this.options.containerClass,this.$element=e(this.element).append(this.options.content),this.options.content=this.$element;var r=this.element.children;for(var i=0;i<r.length;i++)r[i].classList.add("popover-menu-item");if(this.options.items&&this.options.items.length){var o=document.createElement("ul");o.className="menu-item-panel",this.items=[];for(i=0;i<this.options.items.length;i++){var u=new n(this.options.items[i],this.options.createItemIndicator);o.appendChild(u.element),u.element.tabIndex=0,this.items.push(u)}this.element.appendChild(o),this.$element.on("click",".menu-item",this.onMenuItemClick.bind(this))}this.$element.on("change",".popover-menu-item",this.close.bind(this)).on("click",".popover-menu-item",this.onItemClick.bind(this))}var s={containerClass:"content-container",isInteractive:!0};return o.prototype.onClose=function(e){this.trigger("close",e,this.$element),e.cancel||(this.popover.sourceElement.classList.remove("selected"),this.popover.sourceElement.focus())},o.prototype.onItemClick=function(e){var t=e.target;while(t&&!i.matches(t,i.buttonSelector)){t=t.parentNode;if(t===this.element)return}t&&!t.getAttribute("aria-haspopup")&&this.close()},o.prototype.onMenuItemClick=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.element===e.currentTarget){n.onClick&&n.onClick(e,n),this.trigger("click:item",{sourceEvent:e},n),this.popover.close();break}}},o.prototype.onKeyDown=function(e){e.which===37?(i.focusPreviousElement(this.element),e.preventDefault()):e.which===39&&(i.focusNextElement(this.element),e.preventDefault())},o.prototype.onShow=function(e){this.popover.sourceElement.classList.add("selected"),this.popover.$element.on("keydown",this.onKeyDown.bind(this)),this.trigger("show",e,this.$element)},o.prototype.show=function(e){this.popover=r.show(e,this.options),this.popover&&this.popover.on({show:this.onShow,close:this.onClose},this)},o.prototype.close=function(){this.popover&&this.popover.close()},o.show=function(e,t){var n=new o(t);return n.show(e),n},t.Events.enableFor(o.prototype),o}),define("packages/controls/src/js/layout/overflowControl",["jquery","core","../animation/animationFrame","../core/measuredElement","../popups/popoverMenu","../dataOrganizers/sortHandler","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o,u){function l(t,n){this.options=e.extend({},f,n),this.options.orientation!=="vertical"&&(this.options.orientation="horizontal"),this.collapsableItems=[],this.overflow={children:[]},this.$parentElement=t.on("resize",this.onResize.bind(this)).on("keydown",this.onKeyDown.bind(this)).on("focusin",this.onFocusIn.bind(this)).on("click",".overflow-button",this.onOverflowButtonClick.bind(this)),this.parentElement=t[0],this.parentElement.setAttribute("data-resizable",""),this.measuredParentElement=new r(this.parentElement),this.initializeElements(),this.invalidate()}function c(e){if(e.lastChild){var t=document.createDocumentFragment();while(e.lastChild)t.appendChild(e.lastChild);e.appendChild(t)}}var a=6,f={isReversed:!1,isTransformed:!1,maxVisible:Infinity,overflowContainerClass:"overflow-container",scaleToViewport:!1};return l.prototype.calculateCenterSectionSize=function(e){var t=0;for(var n=0;n<this.collapsableItems.length;n++){var r=this.collapsableItems[n];r.section===this.centerSectionElement&&r.element.style.display!=="none"&&(t+=r.measuredElement[e](!0))}return t},l.prototype.calculateOverflowOrder=function(){var e;for(var t=0;t<this.collapsableItems.length;t++)e=this.collapsableItems[t].element,e.style.width="",e.style.height="",e.style.display="";this.collapsableItems.length=0,this.overflow.children.length=0,this.overflow.element.classList.remove("has-overflow"),this.correctTabIndices(this.panelElement),e=this.panelElement.querySelector("[tabindex]"),e&&(e.tabIndex=0),this.calculateSectionOverflowOrder(this.leftSectionElement,this.leftSectionElement,0),this.calculateSectionOverflowOrder(this.centerSectionElement,this.centerSectionElement,0),this.calculateSectionOverflowOrder(this.rightSectionElement,this.rightSectionElement,0)},l.prototype.calculateSectionOverflowOrder=function(t,n,i){for(var s=0;s<n.children.length;s++){var o=n.children[s];if(o.style.display==="none")continue;var u=i+(parseInt(o.getAttribute("data-collapse-priority"),10)||0);o.classList.contains("toolbar-group")?this.calculateSectionOverflowOrder(t,o,u):this.collapsableItems.push({element:o,$element:e(o),measuredElement:new r(o),priority:u,section:t,visualOrder:this.collapsableItems.length})}},l.prototype.closeOverflowPopup=function(){this.popoverMenu&&(this.popoverMenu.close(),this.popoverMenu=null)},l.prototype.collapseItem=function(e,t){e.element.style.display="none",e.isCollapsed=!0,t.children.length||t.element.classList.add("has-overflow"),t.children.push(e),this.closeOverflowPopup()},l.prototype.collapsePanel=function(e,t){for(var n=this.collapsableItems.length-1;n>=0;n--){var r=this.collapsableItems[n];if(r.isCollapsed)continue;var i=this.getOverflowForItem(r);if(i){r.size=r.measuredElement[t](!0),e+=r.size,this.collapseItem(r,i),i.children.length===1&&(e-=i.measuredElement[t](!0));if(e>=a)break}}},l.prototype.collapseSort=function(e,t){return e.priority===t.priority?e.visualOrder-t.visualOrder:this.options.isReversed?e.priority-t.priority:t.priority-e.priority},l.prototype.correctTabIndices=function(e){var t=u.createTreeWalker(e),n=t.currentNode;while(n)!n.getAttribute("tabIndex")&&u.isFocusable(n)&&(n.tabIndex=-1),n=t.nextNode()},l.prototype.createOverflowButton=function(){var e,n;return this.options.overflowButton?this.options.overflowButton==="more"?(e=document.createElement("div"),e.className="tab-item overflow-button",e.setAttribute("role","button"),n=document.createElement("span"),n.className="icon-dots_horizontal multi-line-icon",e.appendChild(n),n=document.createElement("span"),n.textContent=t.Strings.translate("controls.overflowLabel"),e.appendChild(n)):e=u.getHTMLElement(this.options.overflowButton):(e=document.createElement("button"),e.className="overflow-button containerless",e.type="button",e.tabIndex=-1,n=document.createElement("span"),n.className="icon-arrow_south",n.setAttribute("aria-hidden",!0),e.appendChild(n)),e},l.prototype.expandItem=function(e,t){o.removeFromArray(t.children,e),this.closeOverflowPopup(),t.children.length||t.element.classList.remove("has-overflow"),e.isCollapsed=!1,e.element.style.display=""},l.prototype.expandPanel=function(e,t){for(var n=0;n<this.collapsableItems.length;n++){var r=this.collapsableItems[n];if(!r.isCollapsed)continue;var i=this.getOverflowForItem(r);if(i){i.children.length===1&&(e+=i.measuredElement[t](!0));if(r.size>e-a)break;this.expandItem(r,i),e-=r.size}}},l.prototype.getOverflowElements=function(e){return this.prepareItemsForOverflow(e.children)},l.prototype.getOverflowForItem=function(){return this.overflow},l.prototype.getSectionElement=function(e){switch(e){case"right":return this.rightSectionElement;case"middle":return this.centerSectionElement;default:return this.leftSectionElement}},l.prototype.initializeElements=function(){this.panelElement=document.createElement("div"),this.panelElement.className="overflow-panel "+this.options.orientation,this.leftSectionElement=this.parentElement.querySelector(".section-left")||document.createElement("div"),this.centerSectionElement=this.parentElement.querySelector(".section-center")||document.createElement("div"),this.rightSectionElement=this.parentElement.querySelector(".section-right")||document.createElement("div"),this.leftSectionElement.className="section section-left",this.centerSectionElement.className="section section-center",this.rightSectionElement.className="section section-right";for(var e=this.parentElement.children.length-1;e>=0;e--){var t=this.parentElement.children[e];t!==this.leftSectionElement&&t!==this.centerSectionElement&&t!==this.rightSectionElement&&this.leftSectionElement.insertBefore(t,this.leftSectionElement.firstElementChild)}this.panelElement.appendChild(this.leftSectionElement),this.panelElement.appendChild(this.centerSectionElement),this.panelElement.appendChild(this.rightSectionElement),this.overflowSectionElement=document.createElement("div"),this.overflowSectionElement.className="section section-overflow",this.overflow.element=this.createOverflowButton(),this.overflow.element.setAttribute("aria-pressed",!1),this.overflow.element.setAttribute("aria-haspopup",!0),this.overflow.measuredElement=new r(this.overflow.element),this.overflowSectionElement.appendChild(this.overflow.element),this.panelElement.appendChild(this.overflowSectionElement),this.parentElement.appendChild(this.panelElement)},l.prototype.layoutItems=function(e,t){t?(e-=this.leftSectionElement.offsetHeight,e-=this.calculateCenterSectionSize("getOuterHeight"),e-=this.rightSectionElement.offsetHeight):(e-=this.leftSectionElement.offsetWidth,e-=this.calculateCenterSectionSize("getOuterWidth"),e-=this.rightSectionElement.offsetWidth);var n=t?"getOuterHeight":"getOuterWidth";this.overflow.children.length&&(e-=this.overflow.measuredElement[n](!0)),e<0?this.collapsePanel(e,n):this.expandPanel(e,n)},l.prototype.layoutItemsToFit=function(e,t){var n=Math.min(this.collapsableItems.length,this.options.maxVisible),r=e/n,i=t?"setOuterHeight":"setOuterWidth";n<this.collapsableItems.length&&(n--,t?this.overflow.measuredElement[i](r,!0):this.overflow.measuredElement[i](r,!0));for(var s=0;s<this.collapsableItems.length;s++){var o=this.collapsableItems[s];s<n?(o.measuredElement[i](r,!0),o.isCollapsed&&this.expandItem(o,this.overflow)):o.isCollapsed||this.collapseItem(o,this.overflow)}},l.prototype.onFocusIn=function(e){this.lastFocusedElement&&(this.lastFocusedElement.tabIndex=-1),this.lastFocusedElement=e.target,this.lastFocusedElement.tabIndex=0},l.prototype.onKeyDown=function(e){switch(e.which){case 37:this.options.orientation==="horizontal"&&u.focusPreviousElement(this.panelElement),e.preventDefault();break;case 38:this.options.orientation==="vertical"&&u.focusPreviousElement(this.panelElement),e.preventDefault();break;case 39:this.options.orientation==="horizontal"&&u.focusNextElement(this.panelElement),e.preventDefault();break;case 40:this.options.orientation==="vertical"&&u.focusNextElement(this.panelElement),e.preventDefault()}},l.prototype.onOverflowButtonClick=function(){this.showOverflowMenu(this.overflow)},l.prototype.onResize=function(){n.throttleByFrame({method:this.updateLayout,context:this})},l.prototype.prepareItemsForOverflow=function(e){(new s({isAscending:!this.options.isReversed,property:"visualOrder"})).apply(e);var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(r.element.classList.contains("divider")){var i=t[t.length-1];if(i&&!i.classList.contains("divider")){var o=r.element.cloneNode(!1);o.style.display="",t.push(o)}}else{var a={};this.trigger("create:overflowElement",a,r.$element);var f=a.element;f&&(f=u.getHTMLElement(a.element)),f||(f=r.$element.clone(!0)[0],f.style.display="",f.style.height="",f.style.width=""),t.push(f)}}while(t.length&&t[t.length-1].classList.contains("divider"))t.pop();return t},l.prototype.reverseElements=function(){c(this.panelElement),c(this.leftSectionElement),c(this.centerSectionElement),c(this.rightSectionElement),this.invalidate()},l.prototype.showOverflowMenu=function(e){var t=u.findParent(e.element,".overflow-button,.anchor");if(!t||this.popoverMenu&&t===this.popoverMenu.popover.sourceElement){this.closeOverflowPopup();return}this.closeOverflowPopup(),t.setAttribute("aria-pressed",!0);var n=this.options.orientation==="horizontal"?"bottom":"right",r=document.createDocumentFragment(),s=this.getOverflowElements(e);for(var a=0;a<s.length;a++)r.appendChild(s[a]);this.popoverMenu=i.show(t,{containerClass:this.options.overflowContainerClass,content:r,delay:0,direction:n}),this.popoverMenu.on("close",function(e,n){this.popoverMenu=null,t.setAttribute("aria-pressed",!1),this.trigger("close:overflow",e,n)},this),o.proxy(this.popoverMenu,this,null,{from:"show",to:"open:overflow"})},l.prototype.updateLayout=function(){if(!document.body.contains(this.parentElement))return;this.isCollapseOrderValid||(this.isCollapseOrderValid=!0,this.calculateOverflowOrder()),this.isSorted||(this.isSorted=!0,(new s({isAscending:!this.options.isReversed,method:this.collapseSort.bind(this)})).apply(this.collapsableItems));var e,t;this.options.orientation==="horizontal"?e=this.measuredParentElement.getWidth():(e=this.measuredParentElement.getHeight(),this.options.isTransformed?this.panelElement.style.width=e+"px":t=!0),this.options.scaleToViewport?this.layoutItemsToFit(e,t):this.layoutItems(e,t),this.options.isTransformed&&this.updateTransformation()},l.prototype.updateTransformation=function(){var e=this.panelElement.offsetWidth,t=this.panelElement.offsetHeight,n=e/2-t/2,r;this.options.isReversed?r="matrix(0, -1, 1, 0, "+ -n+", "+n+")":r="matrix(0, 1, -1, 0, "+ -n+", "+n+")",this.panelElement.style.webkitTransform=r,this.panelElement.style.msTransform=r,this.panelElement.style.transform=r},l.prototype.addElement=function(e,t){e=u.getHTMLElement(e);if(e){var n=this.getSectionElement(t);this.options.isReversed?n.insertBefore(e,n.firstChild||null):n.appendChild(e),this.invalidate()}},l.prototype.clear=function(){e(this.rightSectionElement).empty(),e(this.centerSectionElement).empty(),e(this.leftSectionElement).empty(),this.collapsableItems.length=0,this.overflow.children.length=0},l.prototype.invalidate=function(){this.isSorted=!1,this.isCollapseOrderValid=!1,this.closeOverflowPopup(),this.measuredParentElement.invalidate(),n.throttleByFrame({method:this.updateLayout,context:this})},l.prototype.removeElement=function(t){t=u.getHTMLElement(t);if(t){var n=o.removeFromArrayByProperty(this.collapsableItems,"element",t);n?n.$element.remove():this.parentElement.contains(t)&&e(t).remove(),this.invalidate()}},l.prototype.setOptions=function(t){var n=this.options.isReversed;e.extend(this.options,t),n!==this.options.isReversed&&this.reverseElements(),this.options.isTransformed||(this.panelElement.style.webkitTransform="none",this.panelElement.style.msTransform="none",this.panelElement.style.transform="none"),this.options.orientation==="vertical"?this.parentElement.setAttribute("aria-orientation","vertical"):this.parentElement.setAttribute("aria-orientation","horizontal"),this.panelElement.style.width="",this.invalidate()},l.prototype.setPriority=function(e,t){e=u.getHTMLElement(e);if(e){var r=o.findByProperty(this.collapsableItems,"element",e);r&&(r.priority=t||0),this.isSorted=!1,e.setAttribute("data-collapse-priority",t||0),n.throttleByFrame({method:this.updateLayout,context:this})}},t.Events.enableFor(l.prototype),l}),define("packages_controls_src_content_templates_tabItem_html",[],function(){return function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\r\n    <span class="icon ',(s=n.iconClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconClass,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+" ",(s=n.multiLine)?i=s.call(e,{hash:{},data:t}):(s=e&&e.multiLine,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'" aria-hidden="true"></span>\r\n    ',r}function p(e,t){var r="",i,s;return r+='\r\n    <span class="close-button icon-error" role="button" title="'+f((i=n.i18n||e&&e.i18n,s={hash:{},data:t},i?i.call(e,"controls.closeTabTooltip",s):l.call(e,"i18n","controls.closeTabTooltip",s)))+'"></span>\r\n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<div class="tab-item ',(u=n.className)?o=u.call(t,{hash:{},data:i}):(u=t&&t.className,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" aria-selected="false" tabindex="-1">\r\n    ',o=n["if"].call(t,t&&t.showIcon,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;s+="\r\n    ",o=n["if"].call(t,t&&t.showCloseButton,{hash:{},inverse:c.noop,fn:c.program(3,p,i),data:i});if(o||o===0)s+=o;return s+='\r\n    <div class="tab-item-content-container">\r\n    	<div class="tab-item-overlay"></div>\r\n    </div>\r\n</div>',s}}),define("packages/controls/src/js/tabs/tabHeader",["jquery","core","../animation/animationFrame","../core/collectionView","../popups/menu","../layout/overflowControl","../popups/tooltip","../core/domUtility","template!../../content/templates/tabItem.html"],function(e,t,n,r,i,s,o,u,a){function f(n,i){this.$element=u.getElement(n),this.element=this.$element[0],this.element.classList.add("tab-header"),this.options=e.extend({closableTabs:!1,headerAlignment:"top",inlineIcons:!0,scaleToViewport:!0},i),this.collectionView=new r(null,["className","iconClass","isDisabled","name"]),this.collectionView.on({ready:this.onCollectionReady,"change:item":this.onItemChanged,"add:item":this.update,"insert:item":this.update,"move:item":this.update,"remove:item":this.onItemRemoved},this),this.overflowControl=new s(this.$element,this.options),this.isPhone=t.PlatformDetector.type()==="phone",this.isTouchDevice=this.isPhone||t.PlatformDetector.type()==="tablet",this.setOptions(i),this.$element.on("contextmenu",this.onContextMenu.bind(this)).on("focus",".tab-item",this.onTabItemFocus.bind(this)),o.registerForAutoTooltip(this.element,{source:".tab-item",target:".tab-item-content-container"})}return f.prototype.createTabItemElement=function(t){var n=t.sourceItem,r=!this.isTouchDevice&&(n.isClosable||this.options.closableTabs&&n.isClosable==null),i=u.renderTemplate(a,{className:n.className,iconClass:n.iconClass,multiLine:this.options.inlineIcons?"":"multi-line-icon",showCloseButton:r,showIcon:n.iconClass||this.isPhone}),s=i.querySelector(".tab-item-content-container"),o=u.getContentElement(n.name,[this.options.createItem],[t]);o&&(o.classList.add("tab-item-content"),s.insertBefore(o,s.firstElementChild));if(this.options.createItemIndicator){var f=u.getHTMLElement(this.options.createItemIndicator(t));f&&(f.classList.add("tab-item-indicator"),i.insertBefore(f,i.firstElementChild))}t.isSelected&&(i.tabIndex=0,i.setAttribute("aria-selected",!0)),n.isDisabled&&(i.removeAttribute("tabindex"),i.setAttribute("aria-disabled",!0)),t.element=i,t.$element=e(i).on("click",this.onTabItemClick.bind(this)).on("click",".close-button",this.onTabCloseButtonClick.bind(this)).on("contextmenu",this.onTabItemContextMenu.bind(this))},f.prototype.onCollectionReady=function(){var e=this.collectionView.getItems(),t=e[0],n=document.createDocumentFragment();for(var r=0;r<e.length;r++){var i=e[r];i.isSelected&&(t=i),this.createTabItemElement(i),i.element.setAttribute("data-index",i.index),n.appendChild(i.element)}this.overflowControl.clear(),this.overflowControl.addElement(n),this.trigger("render",{},this),this.select(t),this.selectedItem=t},f.prototype.onContextMenu=function(e){i.triggerContextMenuEvent(e,this,"contextmenu",{},this)},f.prototype.onItemChanged=function(e,t){e.property==="isDisabled"?t.element&&u.toggleAttribute(t.element,"aria-disabled",t.isDisabled):(t.element=null,this.update())},f.prototype.onItemRemoved=function(e,t){t.$content&&(t.$content.remove(),t.$content=null),this.update()},f.prototype.onTabCloseButtonClick=function(e){var t=u.findParent(e.currentTarget,".tab-item"),n=this.collectionView.findByProperty("element",t);if(n){var r={sourceEvent:e,cancel:!1};this.trigger("close:item",r,n),r.cancel||(this.collectionView.remove(n),e.stopPropagation())}},f.prototype.onTabItemClick=function(e){var t=e.currentTarget.getAttribute("data-index");this.select(this.collectionView.getItems()[t])},f.prototype.onTabItemContextMenu=function(e){var t=e.currentTarget.getAttribute("data-index"),n=this.collectionView.getItems()[t];return n&&!n.isDisabled&&i.triggerContextMenuEvent(e,this,"contextmenu:item",{},n),!1},f.prototype.onTabItemFocus=function(e){var t=e.currentTarget.getAttribute("data-index");this.select(this.collectionView.getItems()[t])},f.prototype.select=function(e){if(!e||e.isDisabled||this.selectedItem===e)return;var t={cancel:!1};this.trigger("change:selection",t,e),t.cancel||(this.selectedItem&&(this.selectedItem.isSelected=!1,this.selectedItem.element&&(this.selectedItem.element.tabIndex=-1,this.selectedItem.element.setAttribute("aria-selected",!1),this.overflowControl.setPriority(this.selectedItem.element))),e.isSelected=!0,e.element&&(e.element.tabIndex=0,e.element.setAttribute("aria-selected",!0)),this.selectedItem=e,this.overflowControl.setPriority(e.element,1))},f.prototype.setOptions=function(t){e.extend(this.options,t),this.options.isTransformed=!1,this.options.isReversed=this.options.headerAlignment==="left";switch(this.options.headerAlignment){case"bottom":this.element.classList.add("tab-header-bottom"),this.options.orientation="horizontal";break;case"left":this.options.isTransformed=!0,this.element.classList.add("tab-header-left"),this.options.orientation="vertical";break;case"right":this.options.isTransformed=!0,this.element.classList.add("tab-header-right"),this.options.orientation="vertical";break;default:this.element.classList.add("tab-header-top"),this.options.orientation="horizontal",this.options.headerAlignment="top"}this.onCollectionReady(),this.overflowControl.setOptions(this.options)},f.prototype.update=function(){n.throttleByFrame({context:this,method:this.onCollectionReady})},t.Events.enableFor(f.prototype),f}),define("packages/controls/src/js/layout/paneContainer",["jquery","core","../animation/animationFrame","../core/measuredElement","./pane","../dragDrop/resizer","../tabs/tabHeader","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o,u,a){function f(e){this.$element=a.getElement(e),this.element=this.$element[0],this.panes=[],this.layouts=[],this.hasInvalidLayout=!0,this.measuredElement=new r(this.element),this.element.classList.add("pane-container"),this.element.setAttribute("data-resizable",""),this.$element.on("resize",this.onResize.bind(this)).on({"resize:begin":this.onPaneResize.bind(this),"resize:update":this.onPaneResize.bind(this),"resize:end":this.onPaneResize.bind(this),"drag:end":this.onPaneDragEnd.bind(this)},".pane"),this.isMobile=/phone|tablet/.test(t.PlatformDetector.type()),t.PlatformDetector.type()==="phone"&&this.createTabPane()}return f.prototype.adjustLayout=function(e,t){this.layoutRoot.pane&&(this.setRegionWidth(this.layoutRoot,e),this.setRegionHeight(this.layoutRoot,t),this.positionLayout(this.layoutRoot,0,0));for(var n=0;n<this.panes.length;n++){var r=this.panes[n];r.isVisible&&r.options.dockType==="floating"&&(r.width=u.clamp(r.options.minWidth,r.options.maxWidth,r.width),r.height=u.clamp(r.options.minHeight,r.options.maxHeight,r.height),r.left=u.clamp(0,r.left,this.layoutRoot.width-r.width),r.top=u.clamp(0,r.top,this.layoutRoot.height-r.height),r.element.style.top=r.top+"px",r.element.style.left=r.left+"px",r.element.style.width=r.width+"px",r.element.style.height=r.height+"px")}},f.prototype.adjustLayoutFromPane=function(e,t,n){var r=this.findRegionByPane(e);if(!r)return;if(r.child){var i=t;r.pane.isHorizontal()||(i=r.width-t);var s=n;r.pane.isVertical()||(s=r.height-n),this.setRegionWidth(r.child,i),r.pane.isHorizontal()||e.setWidth(r.width-r.child.width),this.setRegionHeight(r.child,s),r.pane.isVertical()||e.setHeight(r.height-r.child.height)}else this.setRegionWidth(r,t),this.setRegionHeight(r,n);this.positionLayout(this.layoutRoot,0,0)},f.prototype.applyLayout=function(e,t){if(!e||this.activeLayout===e)return;this.activeLayout=e;for(var n=0;n<e.panes.length;n++){var r=e.panes[n];r.pane&&(r.pane.isInLayout=!0,r.pane.setLayoutOptions(r.options))}if(this.tabHeader){var i=this.tabHeader.collectionView;i.items.length>1&&(this.tabPane.isInLayout=!0,t&&this.tabHeader.select(i.findByProperty("sourceItem",this.activeLayout)))}for(n=0;n<this.panes.length;n++){var s=this.panes[n];s.setVisibility(s.isInLayout),s.isInLayout=undefined}this.layoutChanged=!0,this.invalidate()},f.prototype.createTabPane=function(){this.tabPane=this.addPane(document.createElement("div"),{id:"tab-pane",dockType:"bottom",isResizable:!1,isVisible:!1,priority:Infinity});var e=document.createElement("div");e.className="pane-tab-header",this.tabHeader=new o(e,{maxVisible:5,inlineIcons:!1,scaleToViewport:!0,headerAlignment:"bottom",overflowButton:"more"}),this.tabHeader.on("change:selection",this.onPaneTabSelectionChanged,this),this.tabPane.element.appendChild(this.tabHeader.element),this.tabPane.element.style.bottom="0px"},f.prototype.findRegionByPane=function(e){var t=this.layoutRoot;while(t&&t.pane!==e)t=t.child;return t},f.prototype.onPaneDragEnd=function(e){var t=u.findByProperty(this.panes,"element",e.target);t&&t.options.dockType==="floating"&&(t.left=parseInt(t.element.style.left,10)||0,t.top=parseInt(t.element.style.top,10)||0)},f.prototype.onPaneResize=function(e){var t=u.findByProperty(this.panes,"element",e.target);if(t){var n=t.element.offsetWidth,r=t.element.offsetHeight;t.options.dockType==="floating"?(t.width=n,t.height=r):this.adjustLayoutFromPane(t,n,r),t.updateOptionsSize()}},f.prototype.onPaneResizerDoubleClick=function(e){var t=a.findParent(e.target,".pane"),n=u.findByProperty(this.panes,"element",t);if(n){var r=this.findRegionByPane(n);r&&(n.calculateWidth(!0),n.calculateHeight(!0),this.adjustLayoutFromPane(n,n.width,n.height),n.updateOptionsSize())}},f.prototype.onPaneTabSelectionChanged=function(e,t){this.applyLayout(t.sourceItem)},f.prototype.onResize=function(){if(this.actionPane&&this.isMobile){var e=window.innerWidth>window.innerHeight?"right":"bottom";this.actionPane.options.dockType!==e&&this.actionPane.setOptions({dockType:e})}this.updateWhenLoaded()},f.prototype.positionLayout=function(e,t,n){var r=e.pane,i=r.visibilityChanged||r.height!==r.previousHeight||r.width!==r.previousWidth;i&&(r.visibilityChanged=!1,r.previousHeight=r.height,r.previousWidth=r.width);var s=t,o=n,u=e.width,f=e.height;if(e.child&&this.filledPane!==r)switch(r.options.dockType){case"top":f=r.height,t+=f;break;case"bottom":s+=e.height-r.height,f=r.height;break;case"left":u=r.width,n+=u;break;case"right":o+=e.width-r.width,u=r.width}r.element.style.top=s+"px",r.element.style.left=o+"px",r.element.style.width=u+"px",r.element.style.height=f+"px",e.child&&this.positionLayout(e.child,t,n),setTimeout(function(){r.$element.triggerHandler("resize"),a.invokeResize(r.element)},0)},f.prototype.setLayoutDisabledState=function(e,t){if(e)if(this.tabHeader&&e.isSmallForm){var n=this.tabHeader.collectionView.findByProperty("sourceItem",e);n&&(n.isDisabled=t)}else e.isDisabled=t},f.prototype.setRegionHeight=function(e,t){var n=e.pane;n.calculateHeight(!1);if(e.child&&n.isHorizontal()){var r=t-n.height;this.setRegionHeight(e.child,r);var i=r-e.child.height;i&&!n.options.isFixed&&n.setHeight(n.height+i),e.height=n.height+e.child.height}else if(n.options.isResizable||n.isVertical())n.setHeight(t),e.child&&(this.setRegionHeight(e.child,n.height),n.height!==e.child.height&&n.setHeight(e.child.height)),e.height=n.height;n.regionHeight=e.height},f.prototype.setRegionWidth=function(e,t){var n=e.pane;n.calculateWidth(!1);if(e.child&&n.isVertical()){var r=t-n.width;this.setRegionWidth(e.child,r);var i=r-e.child.width;i&&!n.options.isFixed&&n.setWidth(n.width+i),e.width=n.width+e.child.width}else if(n.options.isResizable||n.isHorizontal())n.setWidth(t),e.child&&(this.setRegionWidth(e.child,n.width),n.width!==e.child.width&&n.setWidth(e.child.width)),e.width=n.width;n.regionWidth=e.width},f.prototype.sortPanes=function(e,t){if(e.options.dockType!==t.options.dockType){if(e.options.dockType==="floating")return 1;if(t.options.dockType==="floating")return-1;if(e.options.dockType==="center")return 1;if(t.options.dockType==="center")return-1}return t.options.priority-e.options.priority},f.prototype.setResizeOptions=function(e){s.clearResizable(e.element);if(e.options.isResizable&&this.filledPane!==e){var t;switch(e.options.dockType){case"top":t=s.Grips.bottom;break;case"bottom":t=s.Grips.top;break;case"left":t=s.Grips.right;break;case"right":t=s.Grips.left;break;case"floating":t=s.Grips.all;break;default:return}s.setResizable(e.element,{grips:t,minHeight:e.options.minHeight,minWidth:e.options.minWidth,maxHeight:e.options.maxHeight,maxWidth:e.options.maxWidth}),e.options.dockType!=="floating"&&e.$element.children(".resize-grip").on("dblclick",this.onPaneResizerDoubleClick.bind(this))}},f.prototype.update=function(){var e=this.measuredElement.getWidth(),t=this.measuredElement.getHeight();if(this.hasInvalidLayout){this.hasInvalidLayout=!1;var n;this.panes.sort(this.sortPanes),this.filledPane=null;for(var r=this.panes.length-1;r>=0;r--){n=this.panes[r];if(n.isVisible&&n.options.dockType!=="floating"){this.filledPane=n;break}}this.layoutRoot={width:e,height:t};var i=this.layoutRoot;for(r=0;r<this.panes.length;r++){n=this.panes[r];if(!n.isVisible)continue;this.setResizeOptions(n);if(n.options.dockType==="floating")n.left==null&&(n.left=parseInt(n.element.style.left,10)||n.options.left||0),n.top==null&&(n.top=parseInt(n.element.style.top,10)||n.options.top||0),n.width==null&&(n.width=n.options.width||n.element.offsetWidth,n.options.width=n.width),n.height==null&&(n.height=n.options.height||n.element.offsetHeight,n.options.height=n.height),n.constrainSize();else{i.pane=n;if(r<this.panes.length-1){var s={parent:i};i.child=s,i=s}}}!i.pane&&i.parent&&(i.parent.child=null)}this.tabPane&&this.tabPane.isVisible&&(this.tabPane.element.style.bottom=""),this.adjustLayout(e,t),this.isLoaded=!0;if(this.onLoadedHandlers){for(var o=0;o<this.onLoadedHandlers.length;o++)this.onLoadedHandlers[o].call(this);this.onLoadedHandlers=null}this.layoutChanged&&(this.layoutChanged=!1,setTimeout(function(){this.trigger("change:layout",{},this.activeLayout)}.bind(this),0))},f.prototype.updateWhenLoaded=function(){n.throttleByFrame({context:this,method:this.update,canExecute:function(){return document.body.contains(this.element)}})},f.prototype.addPane=function(e,t){if(e){var n=(new i(e,t)).on({animating:this.updateWhenLoaded,"change:options":this.invalidate,"change:visibility":this.invalidate},this);return this.panes.push(n),this.element.appendChild(n.element),this.invalidate(),n}},f.prototype.getPane=function(e){if(typeof e=="string")for(var t=0;t<this.panes.length;t++){var n=this.panes[t];if(n.getID()===e)return n}else if(e instanceof i)return e},f.prototype.hideActionPane=function(e){this.actionPane&&this.actionPane.hide(function(){this.removePane(this.actionPane),this.actionPane=null,e&&e()}.bind(this))},f.prototype.removePane=function(e){var t=this.getPane(e);if(t&&u.removeFromArray(this.panes,t))return t.$element.remove(),this.invalidate(),t},f.prototype.showActionPane=function(t,n,r){if(t){if(this.actionPane)this.actionPane.$element.empty(),this.actionPane.$element.append(t);else{var i=this.isMobile&&window.innerWidth>window.innerHeight?"right":"bottom";this.actionPane=this.addPane(document.createElement("div"),e.extend({id:"action-pane",isResizable:!1,dockType:i,isVisible:!1,priority:5},n)),this.actionPane.element.classList.add("action-pane"),this.actionPane.$element.append(t)}this.actionPane.show(r)}},f.prototype.defineLayout=function(t){if(t){var n=e.extend({id:t.name},t);n.panes=u.resolveParameters(n.panes)||[];for(var r=0;r<n.panes.length;r++){var s=n.panes[r];s instanceof i&&(n.panes[r]={pane:s})}this.layouts.push(n);if(this.tabHeader&&n.isSmallForm){var o=this.tabHeader.collectionView;o.add(n),!this.tabPane.isVisible&&o.items.length>1&&this.tabPane.setVisibility(!0)}return n}},f.prototype.disableLayout=function(e){this.setLayoutDisabledState(this.getLayout(e),!0)},f.prototype.enableLayout=function(e){this.setLayoutDisabledState(this.getLayout(e),!1)},f.prototype.getLayout=function(e){if(e){if(typeof e=="string")return u.findByProperty(this.layouts,"id",e);if(e.panes)return e}},f.prototype.removeLayout=function(e){var t=this.getLayout(e);if(t&&u.removeFromArray(this.layouts,t)){if(this.tabHeader&&t.isSmallForm){var n=this.tabHeader.collectionView,r=n.findByProperty("sourceItem",t);n.remove(r),n.items.length<=1&&this.tabPane.setVisibility(!1)}return t}},f.prototype.setActiveLayout=function(e){this.applyLayout(this.getLayout(e),!0)},f.prototype.invalidate=function(){this.hasInvalidLayout=!0,this.updateWhenLoaded()},f.prototype.onLoaded=function(e){e&&(this.isLoaded?e.call(this):this.onLoadedHandlers?this.onLoadedHandlers.push(e):this.onLoadedHandlers=[e])},t.Events.enableFor(f.prototype),f}),define("packages/controls/src/js/core/gestures",["jquery","core","./domUtility"],function(e,t,n){function i(t,n,i){this.$touchSource=e(t||document.body),this.options=e.extend({},r,i),this.selector=n,this.movements=[],this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.$touchSource.on("touchstart",this.selector,this.onTouchStart)}var r={handleHorizontalSwipe:!0,handleVerticalSwipe:!0};return i.prototype.getSwipeDirection=function(e,t,n){var r,i,s,o=0,u=0;for(var a=this.movements.length-1;a>=0;a--){var f=this.movements[a];if(n-f.timeStamp>t)continue;f.x&&(o+=f.x,r==null&&(r=f.x)),f.y&&(u+=f.y,i==null&&(i=f.y))}var l=this.options.handleHorizontalSwipe;if(this.options.handleHorizontalSwipe&&this.options.handleVerticalSwipe){var c=Math.abs(o)||1e-4,h=Math.abs(u)||1e-4;l=c/(c+h)>=.5}if(l)return o||(o=r),o?o<0?"left":"right":(s=window.innerWidth/2,e.pageX<s?"left":"right");if(this.options.handleVerticalSwipe)return u||(u=i),u?u<0?"up":"down":(s=window.innerHeight/2,e.pageY<s?"up":"down")},i.prototype.onGestureEnd=function(){e(document.body).off("touchmove",this.onTouchMove).off("touchend",this.onTouchEnd).off("touchcancel",this.onTouchCancel),this.initialTouch=null,this.previousTouch=null,this.isSwiping=!1},i.prototype.onTouchStart=function(t){var r=n.getTouchFromEvent(t,"targetTouches");r&&(t.preventDefault(),this.isSwiping&&this.onGestureEnd(),this.initialTouch={identifier:r.identifier,pageX:r.pageX,pageY:r.pageY},this.previousTouch=this.initialTouch,e(document.body).on("touchmove",this.onTouchMove).on("touchend",this.onTouchEnd).on("touchcancel",this.onTouchCancel))},i.prototype.onTouchMove=function(e){var t=n.getTouchById(e,"changedTouches",this.initialTouch);if(t){!this.isSwiping&&n.hasTouchMoved(this.initialTouch,t)&&(this.isSwiping=!0,this.trigger("swipe:begin",this.initialTouch));if(this.isSwiping){var r=t.pageX-this.previousTouch.pageX,i=t.pageY-this.previousTouch.pageY;this.movements.push({x:r,y:i,timeStamp:e.originalEvent.timeStamp});while(this.movements.length>3)this.movements.shift();this.previousTouch=t,this.trigger("swipe:move",this.initialTouch,t)}e.preventDefault()}},i.prototype.onTouchEnd=function(t){var r=n.getTouchById(t,"changedTouches",this.initialTouch);if(r){if(this.isSwiping){var i=this.getSwipeDirection(r,250,t.originalEvent.timeStamp);this.movements.length=0;switch(i){case"left":this.trigger("swipe:left");break;case"right":this.trigger("swipe:right");break;case"up":this.trigger("swipe:up");break;case"down":this.trigger("swipe:down")}t.preventDefault()}else r.target&&!n.findParent(r.target,n.buttonSelector)&&e(r.target).click();this.onGestureEnd()}},i.prototype.onTouchCancel=function(e){var t=n.getTouchById(e,"changedTouches",this.initialTouch);t&&(this.isSwiping&&this.trigger("swipe:cancel"),this.onGestureEnd())},i.prototype.remove=function(){this.$touchSource.off("touchstart",this.selector,this.onTouchStart)},i.prototype.setOptions=function(t){e.extend(this.options,t)},t.Events.enableFor(i.prototype),i}),define("packages_controls_src_content_templates_shade_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="content-container">\n    <div class="content"></div>\n    <div class="list"></div>\n</div>'}}),define("packages/controls/src/js/basement/shade",["jquery","core","../animation/animator","../core/gestures","../list/listControl","template!../../content/templates/shade.html","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o,u){function a(t,n,a){var f=u.getElement(t);this.element=f[0],this.element.setAttribute("data-resizable",!0),this.element.classList.add("shade"),this.element.classList.add("collapsed"),this.element.insertAdjacentHTML("afterbegin",s.render()),this.contentContainer=this.element.querySelector(".content-container"),this.contentElement=this.contentContainer.querySelector(".content"),this.list=new i(this.contentContainer.querySelector(".list"),n),this.bodyOverlayElement=document.createElement("div"),this.headerOverlayElement=document.createElement("div"),this.headerGripElement=document.createElement("div"),this.bodyOverlayElement.className="shade-overlay",this.headerOverlayElement.className="shade-header-overlay",this.headerGripElement.className="shade-header-grip",this.gestureHandler=new r(this.element,".shade-header",{handleHorizontalSwipe:!1}),this.gestureHandler.on({"swipe:begin":this.onSwipeBegin,"swipe:move":this.onSwipeMove,"swipe:down":this.onSwipeDown,"swipe:up":this.onSwipeUp},this),f.on("resize",this.onResize.bind(this)).on("click",".shade-header-overlay",this.onSwipeUp.bind(this)),o.proxy(this.list,this,["getCollectionView","invalidate"]),this.list.on("open:item",this.onItemClick,this),this.setOptions(e.extend({focusItems:!1,openOnClick:!0,useMultiSelection:!1},a))}return a.prototype.animateTo=function(e){this.animation&&this.animation.finish();var t=parseInt(this.element.style.height,10)||0;this.animation=n.animate({source:{},properties:{name:"height",from:t,to:e},onFinished:this.onAnimationComplete.bind(this)}),this.animation.on("update",this.onUpdate,this);var r=this.headerGripElement.classList.contains("top");r!==this.isAnimatingDown&&n.animate({duration:100,source:this.headerGripElement,properties:{name:"opacity",from:1,to:0},onFinished:function(){u.toggleClass(this.headerGripElement,"top",this.isAnimatingDown),n.animate({duration:100,source:this.headerGripElement,properties:{name:"opacity",from:0,to:1}})}.bind(this)})},a.prototype.onAnimationComplete=function(){this.animation=null,!this.isAnimatingDown&&this.isOpen&&(this.isOpen=!1,this.element.classList.add("collapsed"),document.body.removeChild(this.bodyOverlayElement),this.headerElement.removeChild(this.headerOverlayElement))},a.prototype.onHeightChanged=function(e){this.element.style.height=e+"px",this.bodyOverlayElement.style.height=this.maxHeight-e+"px";var t=(e-this.minHeight)/(this.maxHeight-this.minHeight);this.bodyOverlayElement.style.opacity=t*.9,this.headerOverlayElement.style.opacity=t*.85;var n=Math.min(1,t*2)*8;this.element.style.boxShadow="0 0 "+n+"px 0 #000"},a.prototype.onItemClick=function(e,t){if(t&&t.length===1){var n=t[0];this.list.select(n),n.sourceItem.onClick&&n.sourceItem.onClick(e,n.sourceItem),this.trigger("click:item",{sourceEvent:e},n.sourceItem),this.onSwipeUp()}},a.prototype.onResize=function(){this.animation&&this.animation.finish();var e=window.innerHeight;this.isOpen&&(this.element.style.height=e+"px"),this.maxHeight=e},a.prototype.onSwipeBegin=function(e){if(this.isDisabled)return;this.isOpen=!0,this.element.classList.remove("collapsed"),this.maxHeight=window.innerHeight,this.minHeight=this.headerElement.offsetHeight,this.contentContainer.style.bottom=this.minHeight+"px",e&&(this.touchOffset=e.pageY-(parseInt(this.element.style.height,10)||0)),this.headerElement.contains(this.headerOverlayElement)||this.headerElement.appendChild(this.headerOverlayElement),document.body.contains(this.bodyOverlayElement)||document.body.appendChild(this.bodyOverlayElement)},a.prototype.onSwipeMove=function(e,t){this.isDisabled||this.onHeightChanged(o.clamp(this.minHeight,this.maxHeight,t.pageY-this.touchOffset))},a.prototype.onSwipeUp=function(){this.isDisabled||(this.isAnimatingDown=!1,this.animateTo(this.minHeight))},a.prototype.onSwipeDown=function(){this.isDisabled||(this.isAnimatingDown=!0,this.animateTo(this.maxHeight))},a.prototype.onUpdate=function(){this.animation&&this.onHeightChanged(this.animation.source.height)},a.prototype.close=function(){this.headerElement&&this.isOpen&&this.onSwipeUp()},a.prototype.deselect=function(e){var t=this.list.getCollectionView().findByProperty("sourceItem",e);this.list.deselect(t||e)},a.prototype.disable=function(){this.isDisabled||(this.close(),this.isDisabled=!0,this.element.classList.add("disabled"))},a.prototype.enable=function(){this.isDisabled&&(this.isDisabled=!1,this.element.classList.remove("disabled"))},a.prototype.getItems=function(){return this.list.getCollectionView().getSourceItems()},a.prototype.select=function(e){var t=this.list.getCollectionView().findByProperty("sourceItem",e);this.list.select(t||e)},a.prototype.setContent=function(t){this.$contentElement&&this.$contentElement.remove(),this.$contentElement=e(t).prependTo(this.contentElement)},a.prototype.setItems=function(e){this.list.getCollectionView().setItems(e)},a.prototype.setOptions=function(e){this.list.setOptions(e),this.list.options.headerElement&&(this.headerElement=u.getHTMLElement(this.list.options.headerElement),this.headerElement.classList.add("shade-header"),this.element.contains(this.headerGripElement)||this.element.appendChild(this.headerGripElement))},a.prototype.show=function(){this.headerElement&&!this.isOpen&&(this.onSwipeBegin(),this.onSwipeDown())},t.Events.enableFor(a.prototype),a}),define("packages_controls_src_content_templates_tabControl_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<nav></nav>\r\n<div class="tab-content-container">\r\n    <div class="tab-content" data-resizer="true" data-resizable></div>\r\n</div>'}}),define("packages/controls/src/js/tabs/tabControl",["jquery","core","../animation/animationFrame","./tabHeader","../core/utility","../core/domUtility","template!../../content/templates/tabControl.html"],function(e,t,n,r,i,s,o){function u(t,n,u){this.$element=s.getElement(t),this.element=this.$element[0],this.element.innerHTML=o.render(),this.element.classList.add("tab-control"),this.tabContent=this.element.querySelector(".tab-content"),this.tabContentContainer=this.element.querySelector(".tab-content-container"),this.$tabContent=e(this.tabContent),this.tabHeader=new r(this.element.querySelector("nav"),u),this.tabHeader.on("change:selection",this.onTabSelectionChanged,this),this.tabHeader.collectionView.on("set",this.clearContents,this),this.$tabContent.on("resize",this.onContentResize.bind(this)),i.proxy(this.tabHeader,this,["select"],["close:item","contextmenu","contextmenu:item","render"]),this.tabHeader.collectionView.setItems(n),this.throttleUpdate()}return u.prototype.clearContents=function(){this.$tabContent.empty()},u.prototype.configureLayout=function(e){this.tabHeader.element.style.width="",this.tabContentContainer.style.width="",this.tabContentContainer.style.padding="",this.tabHeader.element.classList.remove("tab-header-"+this.tabHeader.options.headerAlignment);var t=this.tabHeader.element.offsetHeight+"px";this.tabHeader.setOptions(e);switch(this.tabHeader.options.headerAlignment){case"left":this.tabHeader.element.style.width=t,this.tabContentContainer.style.paddingLeft=t;break;case"right":this.tabHeader.element.style.width=t,this.tabContentContainer.style.paddingRight=t;break;case"bottom":this.tabContentContainer.style.paddingBottom=t;break;default:this.tabContentContainer.style.paddingTop=t}},u.prototype.onContentResize=function(){s.invokeResize(this.tabContent)},u.prototype.onTabSelectionChanged=function(t,n){this.trigger("change:selection",t,n);if(!t.cancel){var r=this.tabHeader.selectedItem;r&&r.$content&&r.$content.css("display","none");if(!n.$content){var s=i.resolveFunction(n.sourceItem.content);s&&(n.$content=e(s))}n.$content&&(n.$content.css("display",""),this.$tabContent.append(n.$content),this.onContentResize())}},u.prototype.throttleUpdate=function(e){n.throttleByFrame({context:this,method:this.configureLayout,parameters:[e],canExecute:function(){return document.body.contains(this.element)}})},u.prototype.getCollectionView=function(){return this.tabHeader.collectionView},u.prototype.getItems=function(){return this.tabHeader.collectionView.items},u.prototype.getSelected=function(){return this.tabHeader.selectedItem},u.prototype.invalidate=function(){this.throttleUpdate()},u.prototype.setOptions=function(e){this.throttleUpdate(e)},t.Events.enableFor(u.prototype),u}),define("packages/controls/src/js/layout/toolbarControl",["jquery","core","../core/measuredElement","../popups/popover","./overflowControl","../core/domUtility"],function(e,t,n,r,i,s){function u(t,n){this.collapsableGroups=[],i.call(this,s.getElement(t),e.extend({},o,n)),this.parentElement.setAttribute("role","toolbar"),this.$parentElement.on("click",".anchor",this.onAnchorClick.bind(this))}var o={overflowContainerClass:"toolbar-overflow-container"};return u.prototype=Object.create(i.prototype),u.prototype.constructor=u,u.prototype.calculateOverflowOrder=function(){var e;for(var t=0;t<this.collapsableGroups.length;t++){e=this.collapsableGroups[t];if(e.anchor){var r=e.anchor.element;r.classList.remove("anchor"),r.removeAttribute("aria-pressed"),r.removeAttribute("aria-haspopup"),r.removeChild(e.element)}}i.prototype.calculateOverflowOrder.call(this),this.collapsableGroups.length=0;for(t=0;t<this.collapsableItems.length;t++){var s=this.collapsableItems[t];e=this.getGroup(s),s.group=e,e&&!e.anchor&&s.element.getAttribute("data-anchor")?(e.anchor=s,e.element=document.createElement("span"),e.element.className="anchor-icon icon-arrow_south",e.element.setAttribute("aria-hidden",!0),e.measuredElement=new n(e.element),s.isAnchor=!0,s.element.classList.add("anchor"),s.element.setAttribute("aria-pressed",!1),s.element.setAttribute("aria-haspopup",!0),s.element.appendChild(e.element)):s.isAnchor=!1}},u.prototype.collapseSort=function(e,t){return(e.isAnchor||t.isAnchor)&&e.isAnchor!==t.isAnchor?e.isAnchor?-1:1:e.priority===t.priority?e.visualOrder-t.visualOrder:this.options.isReversed?e.priority-t.priority:t.priority-e.priority},u.prototype.getGroup=function(e){var t=s.findParent(e.element,"[data-collapsable-group]");if(t){var n;for(var r=0;r<this.collapsableGroups.length;r++){n=this.collapsableGroups[r];if(n.parentElement===t)return n}return n={parentElement:t,children:[]},this.collapsableGroups.push(n),n}},u.prototype.getOverflowElements=function(e){var t,n,r;if(e.anchor)n=[e.anchor].concat(e.children),r=!0;else{n=e.children.slice();for(t=0;t<e.children.length;t++){var i=e.children[t];i.isAnchor&&(r=!0,n=n.concat(i.group.children))}}var s=this.prepareItemsForOverflow(n);if(r)for(t=0;t<s.length;t++){var o=s[t],u=o.querySelector(".anchor-icon");u&&(o.removeChild(u),o.removeAttribute("aria-haspopup"))}return s},u.prototype.getOverflowForItem=function(e){return e.group&&e.group.anchor&&!e.isAnchor?e.group:this.overflow},u.prototype.initializeElements=function(){i.prototype.initializeElements.call(this),this.parentElement.classList.add("toolbar-control"),s.removeWhitespaceElements(this.parentElement)},u.prototype.onAnchorClick=function(e){for(var t=0;t<this.collapsableGroups.length;t++){var n=this.collapsableGroups[t];if(n.anchor&&n.anchor.element===e.currentTarget)return this.showOverflowMenu(n),!1}},u}),define("packages/controls/src/js/layout/transitionalContentContainer",["jquery","core","../animation/animator","../core/domUtility"],function(e,t,n,r){function s(e){this.$element=r.getElement(e),this.element=this.$element[0],this.element.classList.add("transitional-content-container"),this.currentFrame=-1,this.frameStack=[]}var i={fade:!0,vertical:!0,horizontal:!0};return s.prototype.fadeContent=function(e,t){e.properties={name:"opacity",from:0,to:1},this.animation=n.animate(e),t.properties={name:"opacity",from:1,to:0},n.animate(t)},s.prototype.slideContent=function(e,t,r){var i=r.isMovingForward?100:-100,s=r.transition==="vertical"?"top":"left";e.properties={name:s,from:i,to:0,unitType:"%"},this.animation=n.animate(e),t.properties={name:s,from:0,to:-i,unitType:"%"},n.animate(t)},s.prototype.onTransitionFinished=function(e,t){r.detachElement(t),this.trigger("transition:end",{},e),e.content&&r.invokeResize(e.content)},s.prototype.performTransition=function(e,t,n){this.animation&&this.animation.finish(),this.element.scrollTop=0,this.trigger("transition:begin",{},e);var s,o;e&&(s=e.content,o=t&&t.content,this.element.appendChild(s),r.invokeResize(s),s===o&&(o=o.cloneNode(!0),this.element.appendChild(o)));if(i[n.transition]){this.element.classList.add("animating");var u={source:o},a={source:s,onFinished:function(){this.animation=null,this.element.classList.remove("animating"),this.onTransitionFinished(e,o)}.bind(this)};n.transition==="fade"?this.fadeContent(a,u):this.slideContent(a,u,n)}else this.onTransitionFinished(e,o)},s.prototype.setContent=function(e,t){var n=this.frameStack[this.currentFrame];this.performTransition(e,n,{transition:t?e.transition:n.transition,isMovingForward:t})},s.prototype.clear=function(){this.$element.empty(),this.currentFrame=-1,this.frameStack.length=0},s.prototype.pushContent=function(t,n){if(!t)return;var i=e.extend({transition:"none"},n);i.$content=r.getElement(t),i.content=i.$content[0],i.content.classList.add("transitional-content"),!i.transitionImmediately&&i.transitionImmediately!==undefined?this.frameStack.push(i):(this.setContent(i,!0),this.currentFrame++,this.frameStack[this.currentFrame]=i,this.frameStack.length=this.currentFrame+1)},s.prototype.transition=function(e,t,n){if(e&&t){n=n||{};var i={$content:r.getElement(e)},s={$content:r.getElement(t)};i.content=i.$content[0],i.content.classList.add("transitional-content"),s.content=s.$content[0],s.content.classList.add("transitional-content"),this.performTransition(s,i,{isMovingForward:n.isMovingForward!==!1,transition:n.transition||"none"})}},s.prototype.transitionBackward=function(){this.currentFrame>0&&(this.setContent(this.frameStack[this.currentFrame-1],!1),this.currentFrame--)},s.prototype.transitionForward=function(){this.currentFrame<this.frameStack.length-1&&(this.setContent(this.frameStack[this.currentFrame+1],!0),this.currentFrame++)},s.prototype.transitionToContent=function(e,t){for(var n=0;n<this.frameStack.length;n++)if(this.frameStack[n].$content.is(e)){this.transitionToFrame(n);return}this.pushContent(e,t)},s.prototype.transitionToFrame=function(e){if(e==null||e<0||e>=this.frameStack.length||e===this.currentFrame)return;this.setContent(this.frameStack[e],e>this.currentFrame),this.currentFrame=e},s.prototype.trimStack=function(){this.currentFrame>=0&&(this.frameStack.length=this.currentFrame+1)},t.Events.enableFor(s.prototype),s}),define("packages/controls/src/js/virtualPanels/hierarchicalVerticalPanel",["jquery","./verticalPanel","../core/domUtility"],function(e,t,n){function r(e,n){t.call(this,e),this.collectionView=n}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.appendToParent=function(e,t){if(t&&e.containerElement)e.containerElement.insertBefore(t,e.containerElement.firstElementChild||null);else{var n=e.parent;t||(t=e.containerElement);var r;for(var i=e.childIndex+1;!r&&i<n.children.length;i++)r=n.children[i].containerElement;if(r)r.parentNode.insertBefore(t,r);else{var s=n.containerElement||this.element;s.appendChild(t)}}},r.prototype.createSpacers=function(e){for(var t=0;t<e.children.length;t++){var n=e.children[t],r;if(!n.containerElement)if(n.isExpanded){var i=this.collectionView.getLastChildOf(n);r=this.calculateHeightRange(this.collectionView.getItems(),n.index,i.index)}else r=n.height||this.averageHeight;else n.isExpanded&&this.createSpacers(n),n.element||(r=n.height||this.averageHeight);if(r){var s=document.createElement("div");s.style.height=r+"px",r=0,this.spacers.push(s),this.appendToParent(n,s)}}},r.prototype.fillGaps=function(){if(!this.isReady())return;for(var e=0;e<this.spacers.length;e++)n.detachElement(this.spacers[e]);this.spacers.length=0,this.createSpacers(this.collectionView.getRoot())},r}),define("packages_controls_src_content_templates_treeItem_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="tree-node" role="group">\r\n    <div class="tree-node-container" role="treeitem" tabindex="-1" aria-selected="false">\r\n        <div class="expand-indicator">\r\n            <span class="expander-icon" aria-hidden="true"></span>\r\n        </div>\r\n        <div class="checkbox-container">\r\n            <input type="checkbox" class="tree-node-checkbox"/>\r\n        </div>\r\n        <span class="icon" aria-hidden="true"></span>\r\n    </div>\r\n</div>'}}),define("packages/controls/src/js/tree/treeControl",["jquery","../animation/animationFrame","../animation/animator","../core/hierarchicalCollectionView","../virtualPanels/hierarchicalVerticalPanel","../core/inputHandler","template!../../content/templates/treeItem.html","../popups/menu","../popups/tooltip","../layout/virtualizedPanel","../core/domUtility"],function(e,t,n,r,i,s,o,u,a,f,l){function c(t,n,s){s=e.extend({indentationSize:14,useMultiSelection:!1},s),s.CollectionType=r,s.hoverClass="tree-node-hover",s.isHierarchical=!0,s.itemSelector=".tree-node-container",s.PanelType=i,s.visualProperties=["className","iconClass","name"],f.call(this,t,n,s),this.viewportElement.classList.add("show-expanders"),this.viewportElement.setAttribute("role","tree"),this.$viewportElement.on("click",".tree-node .checkbox-container",this.onItemCheckboxCellClick.bind(this)),this.$viewportElement.on({mouseenter:this.onExpanderMouseEnter.bind(this),mouseleave:this.onExpanderMouseLeave.bind(this),click:this.onExpanderClick.bind(this)},".expand-indicator"),this.inputHandler.on({"click:item":this.onItemClick,"enter:item":this.onEnterKeyDown,"left:item":this.onLeftKeyDown,"right:item":this.onRightKeyDown},this),this.on("change:selection",this.onSelectionChanged,this),a.registerForAutoTooltip(this.viewportElement,".tree-node-container")}return c.prototype=Object.create(f.prototype),c.prototype.constructor=c,c.prototype.onEnterKeyDown=function(e,t){this.trigger("open:item",e,t)},c.prototype.onExpanderClick=function(e){var t=l.findParent(e.currentTarget,".tree-node-container"),n=this.collectionView.findByProperty("element",t);this.collectionView.hasChildren(n)&&(n.isExpanded?this.collapse(n):this.expand(n)),t.setAttribute("data-focus-hidden",""),t.focus(),e.stopPropagation()},c.prototype.onExpanderMouseEnter=function(e){var t=l.findParent(e.currentTarget,".tree-node-container"),n=this.collectionView.findByProperty("element",t);this.collectionView.hasChildren(n)&&(t.classList.remove("tree-node-hover"),e.stopPropagation())},c.prototype.onExpanderMouseLeave=function(e){var t=l.findParent(e.currentTarget,".tree-node-container"),n=this.collectionView.findByProperty("element",t);this.collectionView.hasChildren(n)&&t.classList.add("tree-node-hover")},c.prototype.onItemCheckboxCellClick=function(e){var t=l.findParent(e.currentTarget,".tree-node-container"),n=this.collectionView.findByProperty("element",t);e.shiftKey?this.inputHandler.selectTo(n,!0):this.inputHandler.toggleSelection(n),t.setAttribute("data-focus-hidden",""),t.focus(),e.stopImmediatePropagation()},c.prototype.onItemClick=function(e,t){this.options.expandOnClick&&(t.isExpanded?this.collapse(t):this.expand(t));var n=e.ctrlKey||e.metaKey||e.shiftKey;n||this.trigger("open:item",e,[t])},c.prototype.onLeftKeyDown=function(e,t){this.collapse(t)},c.prototype.onRightKeyDown=function(e,t){this.expand(t)},c.prototype.onSelectionChanged=function(){if(this.options.useCheckboxSelection){var e=this.collectionView.getItems();for(var t=0;t<e.length;t++){var n=e[t];n.checkbox&&this.setItemCheckbox(n)}}},c.prototype.calculateRenderableItems=function(e){var t=Math.floor((this.panel.firstVisibleItem+this.panel.lastVisibleItem)/2);this.panel.isReady()||(t=0);var n=t+1,r=t,i,s={},o=0;while(o<=this.maxBatchSize&&(r>=this.panel.firstItem||n<=this.panel.lastItem)){if(r>=this.panel.firstItem){i=e[r--];while(i&&!i.isVisible)i=e[r--];i&&!i.element&&(o++,s[i.index]=!0)}if(n<=this.panel.lastItem){i=e[n++];while(i&&!i.isVisible)i=e[n++];i&&!i.element&&(o++,s[i.index]=!0)}}for(var u in s){var a=e[u].parent;while(a&&a.parent)a.element||(s[a.index]=!0),a=a.parent}return s},c.prototype.calculateVisibility=function(){var e=this.inputHandler.getFocused();for(var t=0;t<this.collectionView.items.length;t++){var n=this.collectionView.items[t];n.isVisible=(n.parent.isExpanded&&n.parent.isVisible)===!0,n.isVisible||(n.isSelected&&!this.options.useCheckboxSelection&&this.inputHandler.deselect(n),e===n&&this.focus(null))}},c.prototype.createItemContainer=function(e){this.itemTemplate||(this.itemTemplate=l.renderTemplate(o),l.removeWhitespaceElements(this.itemTemplate));var t=e.sourceItem,n=this.itemTemplate.cloneNode(!0);e.element=n.querySelector(".tree-node-container"),e.checkbox=n.querySelector(".tree-node-checkbox"),t.className&&l.addClass(e.element,t.className);if(e.children&&e.children.length){n.setAttribute("role","group"),e.element.setAttribute("aria-expanded",e.isExpanded===!0);var r=e.element.querySelector(".expander-icon");r.className=e.isExpanded?"icon-arrow_south":"icon-arrow_east"}t.iconClass&&l.addClass(e.element.querySelector(".icon"),t.iconClass),this.options.useCheckboxSelection&&this.setItemCheckbox(e);var i=l.getContentElement(t.name,[this.options.createItem],[e]);i&&(i.classList.add("tree-node-header"),e.element.appendChild(i));if(this.options.createItemIndicator){var s=l.getHTMLElement(this.options.createItemIndicator(e));s&&(s.classList.add("tree-node-indicator"),e.element.appendChild(s))}return n},c.prototype.createVisualElement=function(e,t,n){for(var r=0;r<e.children.length;r++){var i=e.children[r];if(!i.isVisible)continue;if(t[i.index]){var s=this.createItemContainer(i);i.containerElement?i.containerElement.insertBefore(i.element,i.containerElement.firstElementChild||null):i.containerElement=s,i.isInvalid=!1,i.element.setAttribute("aria-selected",i.isSelected===!0),i.element.setAttribute("aria-posinset",i.childIndex+1),i.element.setAttribute("aria-setsize",i.parent.children.length),n&&(i.element.style.paddingLeft=n+"px"),this.panel.appendToParent(i)}i.containerElement&&i.isExpanded&&this.createVisualElement(i,t,n+this.options.indentationSize)}},c.prototype.createVisualElements=function(e,t){this.createVisualElement(this.collectionView.getRoot(),t,0)},c.prototype.onAnimationComplete=function(e){e.isExpanded||(this.calculateVisibility(),this.updateExpanderIcon(e)),this.throttleUpdate()},c.prototype.removeElements=function(){return this.removeInvalidChildren(this.collectionView.getRoot())},c.prototype.removeInvalidChildren=function(e,t){var n;for(var r=0;r<e.children.length;r++){var i=e.children[r],s=i.isVisible;if(s){s=i.index>=this.panel.firstItem&&i.index<=this.panel.lastItem;if(!s){var o=this.collectionView.getLastChildOf(i);i!==o&&(s=o.index>=this.panel.firstItem&&o.index<=this.panel.lastItem||i.index<this.panel.firstItem&&o.index>this.panel.lastItem)}}if(s){i.element&&i.isInvalid&&this.removeItemElement(i);var u;i.children&&i.children.length&&(u=this.removeInvalidChildren(i,t));if(!i.element||u)n=!0}else this.removeHierarchy(i)}return n},c.prototype.removeHierarchy=function(e){l.detachElement(e.containerElement);var t=this.collectionView.getItems(),n=this.collectionView.getLastChildOf(e);for(var r=e.index;r<=n.index;r++){var i=t[r];i.containerElement=null,i.element=null,i.checkbox=null}},c.prototype.removeItemElement=function(e){e.element&&(l.detachElement(e.element),e.element=null,e.checkbox=null)},c.prototype.setHierarchyExpansion=function(e,t){var n,r,i=this.collectionView.getItems();e?(n=e.index,r=this.collectionView.getLastChildOf(e).index):(n=0,r=i.length-1);var s=this.inputHandler.getFocused();for(var o=n;o<=r;o++){var u=i[o];u.isExpanded!==t&&(!t||this.collectionView.hasChildren(u))&&(u.isExpanded=t,this.updateExpanderIcon(u)),u.isVisible=(u.parent.isExpanded&&u.parent.isVisible)===!0,u.isVisible||(u.isSelected&&!this.options.useCheckboxSelection&&this.inputHandler.deselect(u),s===u&&this.focus(null))}this.throttleUpdate()},c.prototype.setItemCheckbox=function(e){e.isSelected?(e.checkbox.checked=!0,e.checkbox.indeterminate=!1):e.isPartiallySelected?(e.checkbox.checked=!1,e.checkbox.indeterminate=!0):(e.checkbox.checked=!1,e.checkbox.indeterminate=!1)},c.prototype.setItemExpansion=function(e,t){if(e&&e.isExpanded!==t){if(!this.collectionView.isChildOf(e)||!this.collectionView.hasChildren(e))return;var r={cancel:!1};this.trigger(t?"expand:item":"collapse:item",r,e);if(r.cancel)return;e.isExpanded=t,t&&(this.calculateVisibility(),this.updateExpanderIcon(e)),e.animation&&(e.animation.finish(),e.animation=null);if(!e.containerElement){this.onAnimationComplete(e);return}var i,s;if(t){i=e.height;var o=this.collectionView.getLastChildOf(e);s=this.panel.calculateHeightRange(this.collectionView.items,e.index,o.index),this.throttleUpdate()}else s=e.height,i=e.containerElement.offsetHeight;e.containerElement.style.height=i+"px",e.animation=n.animate({source:e.containerElement,properties:{name:"height",unitType:"px",from:i,to:s},onFinished:function(){e.animation=null,e.containerElement.style.height="",this.onAnimationComplete(e)}.bind(this)})}},c.prototype.updateExpanderIcon=function(e){if(e.element){var t=e.element.querySelector(".expand-indicator span");this.collectionView.hasChildren(e)?e.isExpanded?(t.className="icon-arrow_south",e.element.setAttribute("aria-expanded",!0)):(t.className="icon-arrow_east",e.element.setAttribute("aria-expanded",!1)):(t.className="",e.element.removeAttribute("aria-expanded"))}},c.prototype.collapse=function(e){this.setItemExpansion(e,!1)},c.prototype.collapseAll=function(e){this.setHierarchyExpansion(e,!1)},c.prototype.expand=function(e){this.setItemExpansion(e,!0)},c.prototype.expandAll=function(e){this.setHierarchyExpansion(e,!0)},c.prototype.invalidate=function(e){l.toggleClass(this.viewportElement,"show-expanders",this.collectionView.hasProperty("children")),f.prototype.invalidate.call(this,e)},c.prototype.scrollTo=function(e){if(!this.collectionView.isChildOf(e))return;if(!e.isVisible){var t=e.parent;while(t)t.isExpanded=!0,t=t.parent;this.calculateVisibility(),this.throttleUpdate()}this.panel.scrollTo(this.collectionView.items,e.index)},c.prototype.setOptions=function(e){f.prototype.setOptions.call(this,e);var t=this.options.useCheckboxSelection===!0;l.toggleClass(this.viewportElement,"show-checkboxes",t),this.inputHandler.selectionModel.useLeafSelection=t,this.inputHandler.options.toggleOnClick=t},c}),define("packages_controls_src_content_templates_treeControlMobile_html",[],function(){return function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="tree-header">\r\n    <span class="tree-header-label"></span>\r\n    <button class="tree-header-button containerless" type="button">\r\n        <span class="icon-16 icon-back" aria-hidden="true"></span>\r\n    </button>\r\n</div>\r\n<div class="list-container">\r\n    <div class="list"></div>\r\n</div>'}}),define("packages/controls/src/js/tree/treeControlMobile",["jquery","core","../core/hierarchicalCollectionView","../list/listControl","../core/domUtility","template!../../content/templates/treeControlMobile.html","../layout/transitionalContentContainer"],function(e,t,n,r,i,s,o){function u(t,i,u){this.$element=t,this.element=this.$element[0],this.element.innerHTML=s.render(),u=e.extend({navigationIcons:"children",openOnClick:!0,showBackButton:!0,showHeader:!0},u),u.CollectionType=n,u.createItemIndicator=this.createItemIndicator.bind(this),u.isHierarchical=!0,this.headerElement=this.element.querySelector(".tree-header"),this.headerLabel=this.element.querySelector(".tree-header-label"),this.backButton=this.element.querySelector(".tree-header-button"),e(this.backButton).on("click",this.onBackButtonClick.bind(this)),r.call(this,this.element.querySelector(".list"),i,u),this.contentTransitioner=new o(this.element),this.contentTransitioner.pushContent(this.element.querySelector(".list-container")),this.onCollectionSet()}return u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.prototype.createItemIndicator=function(e){var t=e.sourceItem.children&&e.sourceItem.children.length;if(this.options.navigationIcons==="always"||this.options.navigationIcons==="children"&&t){var n=document.createElement("span");return n.className="icon-disclosure_right_triangle",n}},u.prototype.invokeOpenItem=function(e,t){if(!t||!t.length)return;var n=t[0];this.collectionView.hasChildren(n)&&this.expand(n),this.trigger("open:item",e,t)},u.prototype.onBackButtonClick=function(){this.currentNode.parent&&this.expand(this.currentNode.parent)},u.prototype.onCollectionSet=function(){this.expand(this.collectionView.getRoot())},u.prototype.scrollToItem=function(e,t,n){var r=e[t],i=this.currentNode.children;r===i[r.childIndex]&&this.panel.scrollTo(i,r.childIndex,n)},u.prototype.setHeader=function(){var e=this.currentNode===this.collectionView.getRoot(),t=e?this.options.title:this.currentNode.sourceItem.name,n=this.options.showBackButton&&this.currentNode.parent;this.options.showHeader&&(t||n)?(this.element.classList.add("has-header"),this.headerLabel.textContent=t||"",this.backButton.style.display=n?"":"none"):this.element.classList.remove("has-header")},u.prototype.updateItems=function(){this.currentNode.children&&r.prototype.updateItems.call(this,this.currentNode.children),i.toggleClass(this.element,"vertically-scrolled",this.scrollHandler.scrollTop>0)},u.prototype.expand=function(e){e&&e!==this.currentNode&&(this.currentNode&&(this.currentNode.parent===e?this.contentTransitioner.transitionBackward():e.parent===this.currentNode&&this.contentTransitioner.pushContent(this.element.querySelector(".list-container"),{transition:"horizontal"})),this.currentNode=e,this.setHeader(),this.invalidate(!0),this.trigger("expand:item",{},e))},u.prototype.getCollectionView=function(){return this.collectionView},u.prototype.getCurrentItem=function(){return this.currentNode},u.prototype.setOptions=function(e){r.prototype.setOptions.call(this,e),this.currentNode&&this.setHeader()},t.Events.enableFor(u.prototype),u}),define("packages/controls/src/js/tree/tree",["jquery","core","./treeControl","./treeControlMobile","../core/utility","../core/domUtility"],function(e,t,n,r,i,s){function o(e,o,u){this.$element=s.getElement(e).addClass("tree"),t.PlatformDetector.type()==="phone"?this.treeControl=new r(this.$element,o,u):this.treeControl=new n(this.$element,o,u),i.proxy(this.treeControl,this,["collapse","collapseAll","deselect","expand","expandAll","focus","getCollectionView","getCurrentItem","getFocused","getSelected","invalidate","onLoaded","scrollTo","select","setOptions"]),this.treeControl.on("all",function(e,t,n){this.trigger(e,t,n)},this)}return t.Events.enableFor(o.prototype),o}),define("packages/controls/src/exports",["core","./js/layout/accordionPanel","./js/dialogs/actionDialog","./js/dialogs/actionSheet","./js/alert/alert","./js/alert/alertContainer","./js/dialogs/alertDialog","./js/animation/animator","./js/canvas/canvasControl","./js/core/collectionView","./js/dataOrganizers/dataOrganizer","./js/dataOrganizers/filterHandler","./js/grid/grid","./js/dataOrganizers/groupHandler","./js/core/hierarchicalCollectionView","./js/list/listControl","./js/popups/menu","./js/buttons/menuButton","./js/dialogs/modalDialog","./js/selectionModels/multiSelectionModel","./js/layout/navigation","./js/layout/paneContainer","./js/popups/popover","./js/popups/popoverMenu","./js/core/positioning","./js/popups/progressIndicator","./js/dragDrop/resizer","./js/basement/shade","./js/selectionModels/singleSelectionModel","./js/dataOrganizers/sortHandler","./js/tabs/tabControl","./js/layout/toolbarControl","./js/popups/tooltip","./js/layout/transitionalContentContainer","./js/tree/tree"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P){var H=e.TypeWrapper,B={AccordionPanel:H.wrap(t,{methods:["addToSelection","collapseItem","deselect","expandItem","focus","getCollectionView","getFocused","getSelected","invalidate","onLoaded","scrollTo","select","setOptions","toggleSelection"],events:["change:focus","change:scroll","change:selection","collapse:item","contextmenu:item","expand:item","loadResults"]}),ActionDialog:H.wrap(n,{methods:["close","getButtons"],typeMethods:["show"],events:["click:button","close","show"]}),ActionSheet:H.wrap(r,{methods:["close","getElement"],typeMethods:["show"],events:["cancel","close","show","submit"]}),Alert:H.wrap(i,{methods:["close","getButtons","getElement","getShowAgain","show"],events:["click:button","click:undo","close","close:dialog","show:dialog"]}),AlertContainer:H.wrap(s,{methods:["clear","findAlertByProperty","getAlerts","showAlert"],events:["click:button","close","close:dialog","show:dialog"]}),AlertDialog:H.wrap(o,{methods:["close","getButtons","getContent","getFooter","getTitle","invalidate","setContent","setFooter","setTitle","setOptions"],typeMethods:["show"],events:["click:button","close","show"]}),Animator:H.wrap(u,{typeMethods:["animate"]}),CanvasControl:H.wrap(a,{methods:["addItem","calculateTabOrder","clearItems","focusItem","get2DContext","getCanvas","getItemAt","getItemAtScreenPosition","getItemAtSurfacePosition","getItemByProperty","getItems","getNextTabItem","getPreviousTabItem","getIconFontProperties","isPointInCircle","isPointInConvexPolygon","isPointInRectangle","removeItem","removeItemByProperty","toScreenSpace","toSurfaceSpace"],events:["keydown:item","mousedown:item","mousemove:item","mouseup:item","mouseleave:item","mouseenter:item","click:item","dblclick:item","contextmenu:item","drag:begin","drag:update","drag:end","blur:item","focus:item"]}),CollectionView:H.wrap(f,{methods:["add","addBoundProperty","findByProperty","getBoundProperties","getDataOrganizers","getFilterHandler","getItems","getSortHandler","getSourceItems","insert","invalidate","invalidateItem","isWaiting","move","remove","removeByProperty","reset","setBoundProperties","setDataOrganizers","setFilterHandler","setItems","setSortHandler"],events:["add:item","change:item","insert:item","move:item","remove:item","ready","set"]}),DataOrganizer:l,FilterHandler:H.wrap(c,{methods:["addDescription","apply","getDescriptions","hasDescriptions","isWaiting","setDescriptions"],events:["update"]}),Grid:H.wrap(h,{methods:["collapseRow","deselectRow","expandRow","focusColumn","focusRow","getColumnCollectionView","getFocusedColumn","getFocusedRow","getRowCollectionView","getSelectedRows","invalidate","onLoaded","resizeColumnToFit","scrollTo","selectRow","setOptions","sortByColumn"],events:["change:columnOrder","change:columnSize","change:columnSort","change:scroll","change:selection","change:visibleRows","click:row","collapse:row","contextmenu:column","contextmenu:row","dblclick:row","enter:row","expand:row","keydown:row","loadResults","open:row","render:rows"]}),GroupHandler:H.wrap(p,{methods:["addDescription","apply","getDescriptions","hasDescriptions","isWaiting","setDescriptions"],events:["update"]}),HierarchicalCollectionView:H.wrap(d,{methods:["add","addBoundProperty","findByProperty","getBoundProperties","getDataOrganizers","getFilterHandler","getItems","getRoot","getSortHandler","getSourceItems","insert","invalidate","invalidateItem","isWaiting","move","remove","removeByProperty","reset","setBoundProperties","setDataOrganizers","setFilterHandler","setItems","setSortHandler"],events:["add:item","change:item","insert:item","move:item","remove:item","ready","set"]}),List:H.wrap(v,{methods:["deselect","focus","getCollectionView","getFocused","getSelected","invalidate","onLoaded","scrollTo","select","setOptions"],events:["change:focus","change:scroll","change:selection","change:visibleItems","contextmenu:item","loadResults","open:item","render:items"]}),Menu:H.wrap(m,{methods:["close"],typeMethods:["show"],events:["close","click:item","show"]}),MenuButton:H.wrap(g,{methods:["getItems","getMenu","isOpen","setItems"],events:["click:item","close","show"]}),ModalDialog:H.wrap(y,{methods:["close","getButtons","getContent","getFooter","getTitle","invalidate","setContent","setFooter","setTitle","setOptions"],typeMethods:["show"],events:["click:button","close","show"]}),MultiSelectionModel:H.wrap(b,{methods:["deselect","deselectAll","focus","getFocused","getSelected","isSelectionEmpty","isSelectionFull","onClick","onKeyDown","select","selectRangeTo","selectAll","setItems","toggleSelection"]}),Navigation:H.wrap(w,{methods:["collapse","expand","deselect","focus","getCollectionView","getElement","getFocused","getSelected","invalidate","scrollTo","select","setOptions"],events:["change:focus","change:selection","contextmenu:item","open:item","render"]}),PaneContainer:H.wrap(E,{methods:["addPane","defineLayout","disableLayout","enableLayout","getLayout","getPane","hideActionPane","invalidate","onLoaded","removeLayout","removePane","setActiveLayout","showActionPane"],events:["change:layout"]}),Popover:H.wrap(S,{methods:["close"],typeMethods:["cancelShowOnHover","close","show","showOnHover"],events:["close","show"]}),PopoverMenu:H.wrap(x,{methods:["close"],typeMethods:["show"],events:["close","click:item","show"]}),ProgressIndicator:H.wrap(N,{methods:["close","getElement","getOptions","getProgress","getValue","setOptions","setValue","start","stop"],typeMethods:["show"],events:["complete","update"]}),Resizer:H.wrap(C,{typeMethods:["clearResizable","setResizable"]}),Shade:H.wrap(k,{methods:["close","deselect","disable","enable","getItems","invalidate","select","setContent","setItems","setOptions","show"],events:["click:item"]}),SingleSelectionModel:H.wrap(L,{methods:["deselect","focus","getFocused","getSelected","isSelectionEmpty","isSelectionFull","onClick","onKeyDown","select","setItems","toggleSelection"]}),SortHandler:H.wrap(A,{methods:["addDescription","apply","getDescriptions","hasDescriptions","isWaiting","setDescriptions"],events:["update"]}),TabControl:H.wrap(O,{methods:["getCollectionView","getSelected","invalidate","select","setOptions"],events:["change:selection","close:item","contextmenu","contextmenu:item","render"]}),Toolbar:H.wrap(M,{methods:["addElement","clear","invalidate","removeElement","setOptions"],events:["create:overflowElement","close:overflow","open:overflow"]}),Tooltip:H.wrap(_,{typeMethods:["close","registerForAutoTooltip","show","unregisterFromAutoTooltip"]}),TransitionalContentContainer:H.wrap(D,{methods:["clear","pushContent","transition","transitionBackward","transitionForward","transitionToContent","transitionToFrame","trimStack"],events:["transition:begin","transition:end"]}),Tree:H.wrap(P,{methods:["collapse","collapseAll","deselect","expand","expandAll","focus","getCollectionView","getCurrentItem","getFocused","getSelected","invalidate","onLoaded","scrollTo","select","setOptions"],events:["change:scroll","change:selection","change:visibleItems","collapse:item","contextmenu:item","loadResults","open:item","expand:item","render:items"]}),Utility:{getScrollParent:T.getScrollParent,positionRelativeToElement:T.positionRelativeToElement,positionRelativeToPoint:T.positionRelativeToPoint,scrollIntoView:T.scrollIntoView}};return B.Resizer.Grips=Object.freeze(C.Grips),B.Resizer.Orientation=Object.freeze(C.Orientation),B}),define("packages/controls/src/js/dragDrop/dragDrop",["jquery","../core/positioning","../popups/tooltip","../core/utility","../core/domUtility"],function(e,t,n,r,i){return{handleDragDropEvents:function(){e(document.body).on("mousedown",'[data-draggable="true"]',this.onMouseDown.bind(this)).on("touchstart",'[data-draggable="true"]',this.onTouchStart.bind(this))},hasMovedEnough:function(e){var t=Math.abs(this.dragObj.initialPosition.x-e.pageX),n=Math.abs(this.dragObj.initialPosition.y-e.pageY);return t+n>=10},onMouseDown:function(e){if(e.which===1)return this.dragObj!=null&&this.stopMonitoringDrag(e),this.startMonitoringDrag(e),!1},onMouseMove:function(e){if(this.dragObj!=null){if(!this.dragObj.isDragging){if(!this.hasMovedEnough(e))return;this.startDrag(e)}if(this.dragObj)return this.updateDrag(e),!1}},onMouseUp:function(e){return this.stopMonitoringDrag(e),!1},onTouchStart:function(e){var t=i.getTouchFromEvent(e,"targetTouches");t&&(this.dragObj!=null&&this.stopMonitoringDrag(e),e.preventDefault(),this.startMonitoringDrag(e,t))},onTouchMove:function(e){var t=i.getTouchById(e,"changedTouches",this.dragObj);if(t){if(!this.dragObj.isDragging){if(!this.hasMovedEnough(t))return;this.startDrag(e,t)}this.dragObj&&(this.updateDrag(e,t),e.preventDefault())}},onTouchEnd:function(e){var t=i.getTouchById(e,"changedTouches",this.dragObj);t&&(this.dragObj.isDragging&&e.preventDefault(),this.stopMonitoringDrag(e,t))},onTouchCancel:function(e){i.getTouchById(e,"changedTouches",this.dragObj)&&this.stopMonitoringDrag()},startMonitoringDrag:function(t,n){var r=t.currentTarget.getBoundingClientRect();this.dragObj={element:t.currentTarget,$element:e(t.currentTarget),offset:r,initialEvent:t};var i=e(document.body).on("blur.dragDrop",this.stopMonitoringDrag.bind(this));n?(this.dragObj.initialPosition={x:n.pageX,y:n.pageY},this.dragObj.identifier=n.identifier,i.on("touchmove.dragDrop",this.onTouchMove.bind(this)).on("touchend.dragDrop",this.onTouchEnd.bind(this)).on("touchcancel.dragDrop",this.onTouchCancel.bind(this))):(this.dragObj.initialPosition={x:t.pageX,y:t.pageY},this.coverIFrames(),i.on("mousemove.dragDrop",this.onMouseMove.bind(this)).on("mouseup.dragDrop",this.onMouseUp.bind(this))),this.dragObj.mouseOffset={x:this.dragObj.initialPosition.x-r.left,y:this.dragObj.initialPosition.y-r.top}},stopMonitoringDrag:function(t,n){this.dragObj!=null&&(this.dragObj.isDragging?this.stopDrag(t,n||t):this.dragObj.identifier!=null&&this.dragObj.$element.trigger("click",t),this.dragObj=null,n||this.uncoverIFrames());var r=e(document.body).off("blur.dragDrop");n?r.off("touchmove.dragDrop").off("touchend.dragDrop").off("touchcancel.dragDrop"):r.off("mousemove.dragDrop").off("mouseup.dragDrop")},startDrag:function(e,t){var r=t||e;this.dragObj.mousePosition={x:r.pageX,y:r.pageY},this.dragObj.currentEvent=e,this.dragObj.isDragging=!0,this.dragObj.$element.trigger("drag:begin",this.dragObj);if(this.dragObj.cancel){this.stopMonitoringDrag(e,t);return}n.close(),this.createDragVisual(),this.dragObj.$visualElement.on("click.dragDrop",function(e){e.preventDefault(),e.stopImmediatePropagation()}),this.dragObj.visualElement.classList.add("dragging"),this.dragObj.cursor&&(this.previousCursor=document.body.style.cursor,document.body.style.cursor=this.dragObj.cursor)},updateDrag:function(e,t){var n=t||e;this.dragObj.mousePosition.x=n.pageX,this.dragObj.mousePosition.y=n.pageY,this.dragObj.currentEvent=e,this.dragObj.$element.trigger("drag:update",this.dragObj),this.dragObj.cancel?this.stopMonitoringDrag(e):(this.updateDragVisual(n),this.updateDropTarget(n))},stopDrag:function(e,t){t&&(t.pageX!=null||t.pageY!=null)&&(this.dragObj.mousePosition.x=t.pageX,this.dragObj.mousePosition.y=t.pageY),this.dragObj.currentEvent=e,this.dragObj.isDragging=!1,this.dragObj.$element.trigger("drag:end",this.dragObj),this.dragObj.visualElement.classList.remove("dragging"),this.dragObj.visualElement.classList.remove("drag-visual"),this.dragObj.dropTarget&&(this.dragObj.dropTarget.classList.remove("dropping"),this.dragObj.$dropTarget.trigger("drop",this.dragObj));if(this.dragObj.removeVisual)this.dragObj.$visualElement.remove();else if(this.dragObj.$visualElement){var n=this.dragObj.$visualElement;setTimeout(function(){n.off("click.dragDrop")},0)}this.dragObj=null,this.previousCursor!=null&&(document.body.style.cursor=this.previousCursor,this.previousCursor=null)},coverIFrames:function(){var t=document.getElementsByTagName("iframe");for(var n=0;n<t.length;n++){var r=t[n],i=e(r),s=i.position(),o=i.css("zIndex")||0,u=document.createElement("div");u.className="cover-element",u.style.zIndex=o+1,u.style.left=s.left+"px",u.style.top=s.top+"px",u.style.width=r.offsetWidth+"px",u.style.height=r.offsetHeight+"px",i.after(u)}},uncoverIFrames:function(){var e=document.querySelectorAll("iframe + div.cover-element");for(var t=0;t<e.length;t++)i.detachElement(e[t])},createDragVisual:function(){!this.dragObj.visualElement&&this.dragObj.cloneElement&&(this.dragObj.visualElement=this.dragObj.element.cloneNode(!0),this.dragObj.visualElement.style.position="absolute"),this.dragObj.visualElement?(this.dragObj.$visualElement=e(this.dragObj.visualElement),this.dragObj.visualElement=this.dragObj.$visualElement[0]):(this.dragObj.visualElement=this.dragObj.element,this.dragObj.$visualElement=this.dragObj.$element),this.dragObj.visualElement.classList.add("drag-visual");var n=i.getHTMLElement(this.dragObj.visualParent)||this.dragObj.visualElement.parentNode||this.dragObj.element.parentNode;n!==this.dragObj.visualElement.parentNode&&n.appendChild(this.dragObj.visualElement),this.dragObj.parentWidth=n.clientWidth,this.dragObj.parentHeight=n.clientHeight,this.dragObj.width=this.dragObj.visualElement.offsetWidth,this.dragObj.height=this.dragObj.visualElement.offsetHeight,this.dragObj.scrollParent=t.getScrollParent(this.dragObj.visualElement),this.dragObj.offsetParent=this.dragObj.visualElement.offsetParent,this.dragObj.parentOffset=this.getParentOffset()},getParentOffset:function(){var e;this.dragObj.offsetParent===document.body?e={top:0,left:0}:e=this.dragObj.offsetParent.getBoundingClientRect();var t=window.getComputedStyle(this.dragObj.offsetParent);return{x:e.left+(parseInt(t.borderLeftWidth,10)||0),y:e.top+(parseInt(t.borderTopWidth,10)||0)}},updateDropTarget:function(t){if(this.dragObj.isDroppable){var n=document.elementFromPoint(t.clientX,t.clientY);n===this.dragObj.element&&(this.dragObj.element.style.visibility="hidden",n=document.elementFromPoint(t.clientX,t.clientY),this.dragObj.element.style.visibility=""),n&&!n.hasAttribute("data-droppable")&&(n=null),this.dragObj.dropTarget!==n&&(this.dragObj.dropTarget&&(this.dragObj.dropTarget.classList.remove("dropping"),this.dragObj.$dropTarget=null),this.dragObj.dropTarget=n,n&&(n.classList.add("dropping"),this.dragObj.$dropTarget=e(n).trigger("drag:over",this.dragObj)))}},updateDragVisual:function(e){if(this.dragObj.updateVisual!==!1){this.dragObj.left=e.pageX-this.dragObj.parentOffset.x,this.dragObj.top=e.pageY-this.dragObj.parentOffset.y;var t=this.dragObj.scrollParent.scrollLeft+this.dragObj.left-this.dragObj.mouseOffset.x,n=this.dragObj.scrollParent.scrollTop+this.dragObj.top-this.dragObj.mouseOffset.y,i,s;this.dragObj.scrollParent!==this.dragObj.offsetParent&&this.dragObj.scrollParent.contains(this.dragObj.offsetParent)?(i=this.dragObj.parentWidth,s=this.dragObj.parentHeight):(i=this.dragObj.scrollParent.scrollWidth,s=this.dragObj.scrollParent.scrollHeight),t=r.clamp(0,i-this.dragObj.width,t),n=r.clamp(0,s-this.dragObj.height,n),this.dragObj.visualElement.style.top=n+"px",this.dragObj.visualElement.style.left=t+"px"}}}}),define("packages/controls/src/js/core/globalHandlers",["jquery","../animation/expander"],function(e,t){var n={click:{attribute:{name:"data-expander",method:"handleExpansion"},tagName:{name:"BUTTON",method:"handleButtonClick"}}};return{register:function(){window.addEventListener("click",this.onGlobalEvent.bind(this),!1),window.addEventListener("input",this.handleTextAreaModification.bind(this),!1),window.addEventListener("click",this.onClickFocus.bind(this),!1),window.addEventListener("blur",this.onBlur.bind(this),!0)},onBlur:function(e){var t=e.target;t&&t!==document.activeElement&&t.removeAttribute&&t.removeAttribute("data-focus-hidden")},onClickFocus:function(e){var t=e.target;while(t){if(t===document.activeElement){t!==document.body&&t.setAttribute("data-focus-hidden","");break}t=t.parentElement}},onGlobalEvent:function(e){var t=e.target,r=n[e.type];while(t){if(r.attribute&&t.hasAttribute(r.attribute.name)&&this[r.attribute.method](e,t))break;if(r.tagName&&t.tagName===r.tagName.name&&this[r.tagName.method](e,t))break;t=t.parentElement}},handleButtonClick:function(e,t){var n=t.parentNode;if(n.hasAttribute("data-button-group")){if(n.hasAttribute("data-toggle-button"))this.setToggleButtonState(t,!t.classList.contains("selected"));else if(!t.classList.contains("selected")){var r=n.getElementsByClassName("selected");while(r.length)this.setToggleButtonState(r[0],!1);this.setToggleButtonState(t,!0)}return!0}if(t.hasAttribute("data-toggle-button"))return this.setToggleButtonState(t,!t.classList.contains("selected")),!0},handleExpansion:function(e,n){return t.toggleElement(n),e.stopPropagation(),e.preventDefault(),!0},handleTextAreaModification:function(e){var t=e.target;if(t.tagName==="TEXTAREA"&&t.hasAttribute("data-size-to-content")){t.style.height="";var n=t.clientHeight,r=t.scrollHeight;return n<r&&(t.style.height=t.offsetHeight-n+r+"px"),!0}},setToggleButtonState:function(t,n){n?(t.classList.add("selected"),e(t).trigger("select")):(t.classList.remove("selected"),e(t).trigger("deselect"))}}}),define("packages/controls/src/js/buttons/touchButton",["jquery","../core/domUtility"],function(e,t){function n(e){e.preventDefault(),e.stopImmediatePropagation()}return{clearTarget:function(){this.target.element.classList.remove("pressed"),this.target.element.removeEventListener("click",n),this.target=null},handleTouchEvents:function(){e(document.body).on("touchstart.touchButton",t.buttonSelector,this.onTouchStart.bind(this)).on("touchmove.touchButton",this.onTouchMove.bind(this)).on("touchcancel.touchButton",this.onTouchCancel.bind(this)).on("touchend.touchButton",t.buttonSelector,this.onTouchEnd.bind(this))},onTouchStart:function(e){var r=t.getTouchFromEvent(e,"touches");if(r){var i=e.currentTarget;if(i.disabled||i.hasAttribute("aria-disabled")||i.classList.contains("disabled"))return;i.classList.add("pressed"),i.addEventListener("click",n),this.target={pageX:r.pageX,pageY:r.pageY,identifier:r.identifier,element:i}}},onTouchMove:function(e){var n=t.getTouchById(e,"touches",this.target);n&&t.hasTouchMoved(n,this.target)&&this.clearTarget()},onTouchCancel:function(){this.target&&this.clearTarget()},onTouchEnd:function(n){var r=t.getTouchById(n,"changedTouches",this.target);if(r){var i=this.target.element;this.clearTarget(),e(i).click(),n.preventDefault()}},unhandleTouchEvents:function(){e(document.body).off("touchstart.touchButton").off("touchmove.touchButton").off("touchcancel.touchButton").off("touchend.touchButton")}}}),define("packages/controls/src/controls",["jquery","core","./exports","./js/animation/animationFrame","./js/dragDrop/dragDrop","./js/core/globalHandlers","./js/core/inputHandler","./js/popups/menu","./js/popups/tooltip","./js/buttons/touchButton","./js/core/utility","./js/core/domUtility"],function(e,t,n,r,i,s,o,u,a,f,l,c){return l.proxy(u,o.prototype,"triggerContextMenuEvent"),s.register(),i.handleDragDropEvents(),e(window).on("resize moduleVisibilityChanged",function(){c.invokeResize()}),/phone|tablet/.test(t.PlatformDetector.type())||a.replaceBrowserTooltips(),c.isTouchEnabled&&f.handleTouchEvents(),r.start(),n}),define("packages/controls/src/js/layout/itemPanel",["jquery","core","../animation/animationFrame","../core/collectionView","../core/inputHandler","../core/positioning","../core/utility","../core/domUtility"],function(e,t,n,r,i,s,o,u){function a(n,s,a){this.$viewportElement=u.getElement(n).on("resize",this.throttleUpdate.bind(this)),this.viewportElement=this.$viewportElement[0],this.viewportElement.setAttribute("data-resizable",""),this.viewportElement.addEventListener("scroll",this.throttleUpdate.bind(this),!1),this.isMobile=/phone|tablet/.test(t.PlatformDetector.type()),this.options=e.extend({elementProperty:"element",handleInput:!0,maxBatchSize:50,maxMobileBatchSize:25,useMultiSelection:!0},a);var f=this.options.CollectionType||r;this.collectionView=new f(s,this.options.visualProperties),this.options.handleInput&&(this.inputHandler=new i(this.viewportElement,this.options),this.on("change:focus",this.onFocusChanged,this),o.proxy(this.inputHandler,this,["addToSelection","deselect","focus","getFocused","getSelected","select","toggleSelection"],["change:focus","change:selection","contextmenu:item"])),this.collectionView.on({set:this.onCollectionSet,ready:this.onCollectionBuilt,"add:item":this.throttleUpdate,"change:item":this.onItemChanged,"insert:item":this.throttleUpdate,"move:item":this.onItemMoved,"remove:item":this.onItemRemoved},this),this.onCollectionBuilt(),this.setOptions()}return a.prototype.createVisualElements=function(e){var t,n=0;for(var r=0;r<=e.length;r++){var i=e[r];if(i.element){if(!i.isInvalid){t&&(this.viewportElement.insertBefore(t,i.element),t=null);continue}this.removeItemElement(i)}if(n<this.maxBatchSize){var s=this.createItemContainer(i);s.setAttribute("aria-selected",i.isSelected===!0),t||(t=document.createDocumentFragment()),t.appendChild(s),i.element=s,i.isInvalid=!1,n++}}t&&this.viewportElement.appendChild(t),n.length&&this.trigger("render:items",{},n),n.length>=this.maxBatchSize&&this.throttleUpdate()},a.prototype.onCollectionBuilt=function(){var e=this.collectionView.getItems();this.inputHandler&&(this.inputHandler.setItems(e),this.focusedItem=e[0],this.inputHandler.lastFocusedItem=this.focusedItem),this.invalidate(!0)},a.prototype.onCollectionSet=function(){},a.prototype.onFocusChanged=function(e,t){if(t){this.focusedItem=null;var n=t[this.options.elementProperty];if(n){s.scrollIntoView(n,this.viewportElement),n.tabIndex=0;if(this.options.focusItems!==!1){if(n.setActive)try{n.setActive()}catch(e){}else n.focus();(!e.sourceEvent||e.sourceEvent.type==="click")&&n.setAttribute("data-focus-hidden","")}}}},a.prototype.onItemChanged=function(e,t){t.isInvalid=!0,this.throttleUpdate()},a.prototype.onItemMoved=function(e,t){t.isInvalid=!0,this.throttleUpdate()},a.prototype.onItemRemoved=function(e,t){this.removeItemElement(t)},a.prototype.removeItemElement=function(e){e.$element?(e.$element.remove(),e.$element=null):u.detachElement(e.element),e.element=null},a.prototype.throttleUpdate=function(){n.throttleByFrame({context:this,method:this.update})},a.prototype.update=function(){this.createVisualElements(this.collectionView.getItems());if(this.focusedItem){var e=this.focusedItem[this.options.elementProperty];e&&(e.tabIndex=0,this.focusedItem=null)}},a.prototype.getCollectionView=function(){return this.collectionView},a.prototype.invalidate=function(e){this.inputHandler&&(this.focusedItem=this.inputHandler.getLastFocused()),e&&(this.$viewportElement.empty(),this.collectionView.setProperty("element",null)),this.collectionView.setProperty("isInvalid",!0),this.throttleUpdate()},a.prototype.scrollTo=function(e){var t=this.collectionView.items,n=o.resolveArrayItems(t,e);n&&n.element&&s.scrollIntoView(n.element,this.viewportElement)},a.prototype.setOptions=function(t){e.extend(this.options,t),this.maxBatchSize=this.isMobile?this.options.maxMobileBatchSize:this.options.maxBatchSize,u.toggleAttribute(this.viewportElement,"aria-multiselectable",this.options.useMultiSelection),this.inputHandler&&this.inputHandler.setOptions({selectionMode:this.options.useMultiSelection?"multi":"single"}),this.invalidate()},t.Events.enableFor(a.prototype),a})