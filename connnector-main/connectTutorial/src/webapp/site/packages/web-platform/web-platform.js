// Â© 2014 Lexmark International, Inc. and Perceptive Software, LLC.  All rights reserved.
define("packages/web-platform/src/locale",["underscore"],function(e){var t={"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy","hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy","it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","en-IN":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy","de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy","wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy","fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd","xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"},n=[{so:-660,wo:-660,name:"Pacific/Midway"},{so:-600,wo:-600,name:"Pacific/Tahiti"},{so:-570,wo:-570,name:"Pacific/Marquesas"},{so:-540,wo:-600,name:"America/Adak"},{so:-540,wo:-540,name:"Pacific/Gambier"},{so:-480,wo:-540,name:"US/Alaska"},{so:-480,wo:-480,name:"Pacific/Pitcairn"},{so:-420,wo:-480,name:"US/Pacific"},{so:-420,wo:-420,name:"US/Arizona"},{so:-360,wo:-420,name:"US/Mountain"},{so:-360,wo:-360,name:"America/Guatemala"},{so:-360,wo:-300,name:"Pacific/Easter"},{so:-300,wo:-360,name:"US/Central"},{so:-300,wo:-300,name:"America/Bogota"},{so:-240,wo:-300,name:"US/Eastern"},{so:-240,wo:-240,name:"America/Caracas"},{so:-240,wo:-180,name:"America/Santiago"},{so:-180,wo:-240,name:"Canada/Atlantic"},{so:-180,wo:-180,name:"America/Montevideo"},{so:-180,wo:-120,name:"America/Sao_Paulo"},{so:-150,wo:-210,name:"America/St_Johns"},{so:-120,wo:-180,name:"America/Godthab"},{so:-120,wo:-120,name:"America/Noronha"},{so:-60,wo:-60,name:"Atlantic/Cape_Verde"},{so:0,wo:-60,name:"Atlantic/Azores"},{so:0,wo:0,name:"Africa/Casablanca"},{so:60,wo:0,name:"Europe/London"},{so:60,wo:60,name:"Africa/Algiers"},{so:60,wo:120,name:"Africa/Windhoek"},{so:120,wo:60,name:"Europe/Amsterdam"},{so:120,wo:120,name:"Africa/Harare"},{so:180,wo:120,name:"Europe/Athens"},{so:180,wo:180,name:"Africa/Nairobi"},{so:240,wo:180,name:"Europe/Moscow"},{so:240,wo:240,name:"Asia/Dubai"},{so:270,wo:210,name:"Asia/Tehran"},{so:270,wo:270,name:"Asia/Kabul"},{so:300,wo:240,name:"Asia/Baku"},{so:300,wo:300,name:"Asia/Karachi"},{so:330,wo:330,name:"Asia/Calcutta"},{so:345,wo:345,name:"Asia/Katmandu"},{so:360,wo:300,name:"Asia/Yekaterinburg"},{so:360,wo:360,name:"Asia/Colombo"},{so:390,wo:390,name:"Asia/Rangoon"},{so:420,wo:360,name:"Asia/Almaty"},{so:420,wo:420,name:"Asia/Bangkok"},{so:480,wo:420,name:"Asia/Krasnoyarsk"},{so:480,wo:480,name:"Australia/Perth"},{so:540,wo:480,name:"Asia/Irkutsk"},{so:540,wo:540,name:"Asia/Tokyo"},{so:570,wo:570,name:"Australia/Darwin"},{so:570,wo:630,name:"Australia/Adelaide"},{so:600,wo:540,name:"Asia/Yakutsk"},{so:600,wo:600,name:"Australia/Brisbane"},{so:600,wo:660,name:"Australia/Sydney"},{so:630,wo:660,name:"Australia/Lord_Howe"},{so:660,wo:600,name:"Asia/Vladivostok"},{so:660,wo:660,name:"Pacific/Guadalcanal"},{so:690,wo:690,name:"Pacific/Norfolk"},{so:720,wo:660,name:"Asia/Magadan"},{so:720,wo:720,name:"Pacific/Fiji"},{so:720,wo:780,name:"Pacific/Auckland"},{so:765,wo:825,name:"Pacific/Chatham"},{so:780,wo:780,name:"Pacific/Enderbury"},{so:840,wo:840,name:"Pacific/Kiritimati"}],r={getTimezoneOffsets:function(){var e=new Date(Date.UTC(2005,6,30,0,0,0,0)),t=-1*e.getTimezoneOffset(),n=new Date(Date.UTC(2005,12,30,0,0,0,0)),r=-1*n.getTimezoneOffset();return{so:t,wo:r}},getTimezoneName:function(){var t=this.getTimezoneOffsets(),r=e.find(n,function(e){return e.so===t.so&&e.wo===t.wo});return r?r.name:"US/Pacific"},getLocale:function(e){e=e||window.navigator;var t="en-US";return e.language?t=e.language:e.browserLanguage&&(t=e.browserLanguage),t},getDatePattern:function(){var e=this.getLocale(),n;for(n in t)if(n.toLowerCase()===e.toLowerCase())return t[n];for(n in t)if(n.toLowerCase().indexOf(e.toLowerCase())>-1)return t[n];return"yyyy-dd-MM HH:mm:ss"}};return r}),define("packages/web-platform/src/integrationServerConnectionBehavior",["core","underscore","jquery","./locale","logger"],function(Core,_,$,Locale){function WebBehavior(options){function isLoggedInInternal(){return cookies.get(SESSION_ATTR_KEY_CONNECTION_HASH)!=null||Core.App.session.getConnections().offline.isLoggedIn()}function clearSessionAttributes(){cookies.remove(SESSION_ATTR_KEY_CONNECTION_HASH),cookies.remove(SESSION_ATTR_KEY_SESSION_HASH),cookies.removeStartsWith(SESSION_ATTR_KEY_REQ_TOKEN_PREFIX)}function sessionKeepAliveWorker(){me.isLoggedIn()&&me.validateSession(),setTimeout(sessionKeepAliveWorker,Core.App.config.sessionKeepAliveHeartBeatInterval)}var me=this;options=options||{},options.config=options.config||Core.App.config;var session=options.session||Core.App.session,cookies=options.cookies||Core.Cookies,model=options.model||new Core.IntegrationServerModel,location=options.location||document.location,SESSION_ATTR_KEY_REQID="reqid",SESSION_ATTR_KEY_REQ_TOKEN_PREFIX="req_token_",SESSION_ATTR_KEY_CONNECTION_HASH="connectionHash",SESSION_ATTR_KEY_SESSION_HASH="sessionHash",SESSION_ATTR_KEY_USERNAME="username",SESSION_ATTR_KEY_LOCALE="locale",SESSION_ATTR_KEY_DATE_PATTERN="datePattern",SESSION_ATTR_KEY_TIMEZONE="timezone",INVALID_SESSION_LOGOUT_REASON=Core.Strings.translate("webContext.invalidSession"),ANONYMOUS_USERNAME="anonymous",WEB_CONNECTION_URL="/web/connection";model.url=function(){return WEB_CONNECTION_URL},this.logIn=function(e,t,n){n=n||{};var r=n.async!==!1;n.preserveSession!==!0&&clearSessionAttributes(),Core.IntegrationServerModel.containsUnicode(e)&&(e=Core.IntegrationServerModel.utf8encode(e)),e&&cookies.add(SESSION_ATTR_KEY_USERNAME,e),cookies.add(SESSION_ATTR_KEY_LOCALE,Locale.getLocale()),cookies.add(SESSION_ATTR_KEY_TIMEZONE,Locale.getTimezoneName()),cookies.add(SESSION_ATTR_KEY_DATE_PATTERN,Locale.getDatePattern()),t&&(n.headers=_.extend({},n.headers,{"X-IntegrationServer-Password":t})),model.sync("GET",model,_.extend({},n,{async:r,cache:!1,sessionRequired:!1,dataType:"text",success:function(e,t,r){var i=r.getResponseHeader(SESSION_ATTR_KEY_CONNECTION_HASH);cookies.add(SESSION_ATTR_KEY_CONNECTION_HASH,i),me.processResponseAttributes(r),n.success(e,t,r)},error:function(r){var i;cookies.remove(SESSION_ATTR_KEY_USERNAME);if(r.status===401){if(n.retryWithoutSession){me.logIn(e,t,_.extend(n,{preserveSession:!1,retryWithoutSession:!1}));return}i=r.responseText}else i=Core.Strings.translate("core.session.communicationError");n.error(i)}}))},this.validateClient=function(){return this.username&&this.username!==this.getUsername()&&isLoggedInInternal()?(location.reload.force=!0,location.reload(),!1):Core.App.session.getConnections().online===Core.App.IntegrationServerConnection&&!isLoggedInInternal()?(session.end({reason:INVALID_SESSION_LOGOUT_REASON}),!1):!0},this.logOut=function(e){var t=isLoggedInInternal();t?model.sync("DELETE",model,{async:!1,cache:!1,dataType:"text",type:"DELETE",ignore401:e.ignore401,complete:function(){me.isAnonymousUser()&&cookies.remove(SESSION_ATTR_KEY_USERNAME),e.success()}}):e.success(),clearSessionAttributes()},this.isLoggedIn=function(){return isLoggedInInternal()},this.getUsername=function(){var e=Core.IntegrationServerModel.utf8decode(cookies.get(SESSION_ATTR_KEY_USERNAME));return this.username=this.username||e,e},this.processResponseAttributes=function(e){e.responseProcessed||(this.solveClientPuzzle(e),e.responseProcessed=!0)},this.validateSession=function(){var e=!1;return model.sync("HEAD",model,{async:!1,cache:!1,dataType:"text",type:"HEAD",success:function(t,n,r){me.processResponseAttributes(r),e=!0},error:function(e){me.processResponseAttributes(e)}}),e},this.solveClientPuzzle=function(xhresp){var puzzleTokenName=xhresp.getResponseHeader(SESSION_ATTR_KEY_REQID);if(puzzleTokenName){var puzzleCode=xhresp.getResponseHeader(puzzleTokenName);if(puzzleCode){var reqTokenCookie=cookies.getKeyStartsWith(SESSION_ATTR_KEY_REQ_TOKEN_PREFIX);puzzleCode=atob(puzzleCode.replace(/ /g,""));try{eval(puzzleCode),reqTokenCookie&&cookies.remove(reqTokenCookie)}catch(e){}}}},this.isAnonymousUser=function(){return this.getUsername()&&this.getUsername().toLowerCase()===ANONYMOUS_USERNAME},this.startKeepAlive=function(){setTimeout(sessionKeepAliveWorker,Core.App.config.sessionKeepAliveHeartBeatInterval)}}return WebBehavior}),define("packages/web-platform/src/app-platform",["core","jquery","underscore","./integrationServerConnectionBehavior"],function(e,t,n,r){function i(e){e.__innerSync=e.prototype.sync,e.prototype.sync=function(){return e.__innerSync.apply(this,arguments)}}function o(t){return t?(t.indexOf("?")>-1?t+="&client-type=webclient":t+="?client-type=webclient",t):e.App.config.serverUrl}[e.IntegrationServerModel,e.IntegrationServerCollection].forEach(i);var s=e.Module.extend({loadPriority:-1e3,initialize:function(t){if(s.isDisabled)return;t=t||{},this.webBehavior=t.webBehavior||new r,this.integrationServerConnection=t.integrationServerConnection||e.IntegrationServerConnection;var n=t.dataSources||[e.IntegrationServerModel,e.IntegrationServerCollection];n.forEach(this.addWebSyncToDataSource,this),this.integrationServerConnection.setBehavior(this.webBehavior),this.webBehavior.startKeepAlive()},addWebSyncToDataSource:function(r){var s=this;r.__innerSync||i(r);var u=r.__innerSync;r.__innerSync=function(r,i,a){a=a||{},a.url=o(n.result(a,"url")||n.result(i,"url"));if(!a.el){if(a.sessionRequired!==!1){var h=a.beforeSend;a.beforeSend=function(){var e=s.webBehavior.validateClient();if(!e)return!1;if(h)return h.apply(this,arguments)}}var p=a.complete;return a.complete=function(e){var r=s.webBehavior.processResponseAttributes(e);r?t.isArray(r)||(r=[r]):r=[];var i;p&&(i=p(e));if(!i)i=[];else if(!t.isArray(i)){if(i===-1)return i;i=[i]}var o=n.union(r,i);return o},u.call(this,r,i,a)}var f=s.webBehavior.validateClient();if(f){a.el.error(function(){(s.webBehavior.validateSession()||!0)&&a.error&&(a.xhr={status:0},a.error())}),a.el.load(function(){a.success&&a.success()});if(a.el.prop("tagName").toLowerCase()==="iframe"||a.el.prop("tagName").toLowerCase()==="img")a.el.attr("src",e.App.config.serverUrl+o(a.url));else if(a.el.prop("tagName").toLowerCase()==="object"){var l=a.el.clone(),c=a.el.parent();a.el.remove(),l.attr("data",e.App.config.serverUrl+o(a.url)),c.append(l)}}}}});return s.disable=function(){s.isDisabled=!0},s}),define("packages/web-platform/src/exports",["./app-platform"],function(e){var t={PlatformModule:e};return t})