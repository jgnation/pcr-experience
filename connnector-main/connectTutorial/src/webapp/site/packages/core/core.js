// © 2014 Lexmark International, Inc. and Perceptive Software, LLC.  All rights reserved.
//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Backbone may be freely distributed under the MIT license.

/**
 * CLDR JavaScript Library v0.3.9
 * http://jquery.com/
 *
 * Copyright 2013 Rafael Xavier de Souza
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-10-14T21:16Z
 */

/*!
 * CLDR JavaScript Library v0.3.9 2014-10-14T21:16Z MIT license © Rafael Xavier
 * http://git.io/h4lmVg
 */

/*!
 * EventEmitter v4.2.7 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */

/*!
 * Globalize v1.0.0-alpha.9
 *
 * http://github.com/jquery/globalize
 *
 * Copyright 2010, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-10-10T13:35Z
 */

/*
 * Copyright (c) 2010 Nick Galbreath
 * http://code.google.com/p/stringencoders/source/browse/#svn/trunk/javascript
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
*/

/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.0.0
 */

/*
 * LESS - Leaner CSS v1.4.2
 * http://lesscss.org
 *
 * Copyright (c) 2009-2013, Alexis Sellier
 * Licensed under the Apache 2.0 License.
 *
 * @licence
 */

// Copyright (c) 2006-2009 Hampton Catlin, Nathan Weizenbaum, and Chris Eppstein

/**
 * cldrpluralparser.js
 * A parser engine for CLDR plural rules.
 *
 * Copyright 2012-2014 Santhosh Thottingal and other contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * @source https://github.com/santhoshtr/CLDRPluralRuleParser
 * @author Santhosh Thottingal <santhosh.thottingal@gmail.com>
 * @author Timo Tijhof
 * @author Amir Aharoni
 */

(function(e,t){if(typeof define=="function"&&define.amd)define("packages/core/src/lib/backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)})(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("packages/core/src/cookies",[],function(){function t(){this.isEnabled=function(){return this.add("_cookietest","true"),this.get("_cookietest")!=="true"?!1:(this.remove("_cookietest"),!0)},this.add=function(t,n,r,i){r||(r="/"),i||(i=new Date(Date.now()+e)),document.cookie=t+"="+encodeURIComponent(n)+"; expires="+i.toUTCString()+"; path="+r},this.remove=function(e,t){t||(t="/");var n=new Date;n.setTime(n.getTime()-1),document.cookie=e+"=; expires="+n.toGMTString()+"; path="+t},this.removeStartsWith=function(e,t){var n=this;t||(t="/"),document.cookie.split(";").map(function(e){return e.replace(/^\s+/,"")}).filter(function(t){return t.indexOf(e)===0}).forEach(function(e){n.remove(e,t)})},this.get=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?decodeURIComponent(t[2]):null},this.getKeyStartsWith=function(e){var t=document.cookie.match("(^|;) ?("+e+"[^=]*)");return t?t[2]:null}}var e=2592e6;return new t}),define("packages/core/src/logSystem",["underscore","./cookies"],function(e,t){function r(i){i=i||{},this.cookies=i.cookies||t,e.extend(this,{loggingLevel:this.cookies.get("loggingLevel")-0||i.loggingLevel||"WARNING",loggingMethod:n,defaultVerbosity:r.levels.INFO,category:r.categories.GENERAL,context:"core"},i),this.setLoggingLevel(this.loggingLevel)}var n={log:function(){throw"Logging method not set"}};return r.levels={NONE:0,VERBOSE:1,INFO:2,WARNING:3,ERROR:4,CRITICAL:5},r.categories={GENERAL:"General",PERFORMANCE:"Performance"},r.prototype.log=function(t,n,r,i){n=n||this.defaultVerbosity,r=r||this.category,n>=this.loggingLevel&&(e.isFunction(t)&&(t=t()),this.loggingMethod.log(t,n,r,i))},r.prototype.getLoggingLevel=function(){return this.loggingLevel},r.prototype.setLoggingLevel=function(t){e.isString(t)&&t.length>1&&(t=r.levels[t]),t-=0;if(e.isNaN(t)||!e.isNumber(t)||t<0||t>5)throw"Logging level cannot be set to "+t;this.cookies.add("loggingLevel",t,new Date("3000")),this.loggingLevel=t},r.prototype.canLaunchViewer=function(){return e.isFunction(this.loggingMethod.launchViewer)},r.prototype.launchViewer=function(){return e.result(this.loggingMethod,"launchViewer")},r.prototype.getBuffer=function(){return this.loggingMethod.getBuffer()},r.prototype.clearBuffer=function(){if(this.loggingMethod.clearBuffer)return this.loggingMethod.clearBuffer()},r}),define("packages/core/src/api/logger",["../logSystem"],function(e){function n(e){this.mainLogger=e.mainLogger}var t=function(e){var t=e.mainLogger;this.log=function(n,r,i){return t.log(n,r,i,e.context)}};return _.extend(t.prototype,e.levels,e.categories),n.prototype.resolveDependency=function(e){return e.mainLogger=this.mainLogger,new t(e)},n}),define("packages/core/src/indexedDBHandler",[],function(){function n(e,n){return e!==undefined&&n!==undefined?t.bound(e,n):e!==undefined?t.lowerBound(e):n!==undefined?t.upperBound(n):undefined}function r(e,t){Object.keys(t).forEach(function(n){var r=t[n];e.objectStoreNames.contains(n)&&e.deleteObjectStore(n);var i=r.name||n;r.name=undefined,r.keyPath=r.keyPath||"__id",e.createObjectStore(i,r)})}function i(e){if(!e)throw"Database is not in open state, make sure to call Database.open"}function s(e,t){return t=t||function(t){e.oncomplete=function(){t()}},{then:t}}function o(e){this.object=e.value,this.key=e.key,this.update=e.update,this.remove=function(){e["delete"]()}}function u(t,u){if(!e)throw"IndexedDB system not set.  It may not be supported by this browser";u=u||{},u.storageMode=u.storageMode||window.PERSISTENT,u.version=u.version||1,u.schema=u.schema||{object:{keyPath:"__id"}};if(u.version%1)throw"Non-integer indexedDB version requested: "+u.version;var a=null;this.open=function(n){var i=e.open(t,u.version);i.onsuccess=function(e){a=e.target.result,n&&n(a)},i.onupgradeneeded=function(e){r(e.target.result,u.schema)},i.onerror=function(e){var t=e.target.webkitErrorMessage||e;throw t},i.onblocked=function(e){var t=e.target.webkitErrorMessage||e;throw t}},this.forEach=function(e,t,r){i(a),r=r||{},r.transactionMode=r.transactionMode||"readonly",r.direction=r.direction||"next";var u=a.transaction([e],r.transactionMode);typeof r.direction=="number"&&(r.direction=["prev","next","next"][r.direction+1]);var f=u.objectStore(e),l=f.openCursor(n(r.from,r.to),r.direction);return l.onsuccess=function(e){var n=e.target.result;if(!n)return;t(new o(n))!==!1&&n["continue"]()},s(u)},this.remove=function(e,t){i(a);var n=a.transaction([e],"readwrite");return n.objectStore(e)["delete"](t),s(n)},this.add=function(e,t,n){i(a);var r=a.transaction([e],"readwrite"),o=r.objectStore(e),u=o.keyPath;return u?(t[u]===undefined&&(t[u]=n),o.put(t)):(n||(n=t[u]),o.put(t,n)),s(r)},this.update=function(e,t,n){i(a);var r=a.transaction([e],"readwrite"),o=r.objectStore(e);n===undefined&&(n=t,t=n[o.keyPath]);var u=o.openCursor(),f=0;return u.onsuccess=function(e){var r=e.target.result;if(!r)return;r.key==t?(parseInt(n[o.keyPath])===r.key&&(n[o.keyPath]=parseInt(n[o.keyPath])),r.update(n),f++):r["continue"](t)},s(r,function(e){r.oncomplete=function(){e(f)}})},this.get=function(e,t,n){i(a);var r=a.transaction([e],"readonly");return r.objectStore(e).get(t).onsuccess=function(e){n(e.target.result)},s(r)},this.count=function(e,t){i(a);var n=a.transaction([e],"readonly");return n.objectStore(e).count().onsuccess=function(e){t(e.target.result)},s(n)},this.close=function(){a.close()}}var e=window.indexedDB,t=window.IDBKeyRange||null;return u.setIndexedDBSystem=function(t){e=t},u.setKeyRangeType=function(e){t=e},u}),define("packages/core/src/eventAggregator",["underscore","require"],function(e,t){function r(){}var n={};return r.on=function(e,t,r,i){var s=n[t]=n[t]||{};s=s[r]=s[r]||[],s.push({subscriber:e,callback:i})},r.off=function(t,i,s,o){if(!i){e.each(n,function(e,n){r.off(t,n)});return}if(!s){e.each(n[i],function(e,n){r.off(t,i,n)});return}n[i]&&(n[i][s]=e.reject(n[i][s],function(e){return e.subscriber===t&&(e.callback===o||!o)}))},r.getHost=function(){return t("./host")},r.trigger=function(){var t=null,r=null,i=!0,s=2;typeof arguments[0]=="boolean"?(i=arguments[0],t=arguments[1],r=arguments[2],s=3):(t=arguments[0],r=arguments[1]);var o=(n[t]||[])[r],u=Array.prototype.slice.call(arguments,s,1e3),a=this.getHost();if(a.isPresent()){for(var f=0;f<u.length;f++){var l=u[f],c=typeof l;e.isFunction(l)?c="function":e.isArray(l)&&(c="array");if(c==="undefined"||l!=null&&c!=="boolean"&&c!=="number"&&c!=="object"&&c!=="string"){var h=new Error("Argument type to EventAggregator.trigger is not supported. Argument Type: "+c);throw h.name="ArgumentException",h}c==="object"&&(u[f]=JSON.stringify(l))}i&&a&&a.OnEventTriggered(t,r,u),u=e.map(u,function(e){if(typeof e=="string"&&e.match(/^\{.*\}$/))try{return JSON.parse(e)}catch(t){}return e})}e.each(o,function(e){e.callback.apply(e.subscriber,u)})},r}),define("packages/core/src/host",["underscore","jquery","./eventAggregator"],function(e,t,n){var r=!1,i={triggerGlobalEvent:function(e,t,r){var i=[!1,e,t].concat(r);n.trigger.apply(n,i)},setTitleBarText:function(e){window.host.titlebarView?window.host.titlebarView.setText(e):window.host.title=e},isPresent:function(){return r}};return window.host||i}),function(e,t){typeof define=="function"&&define.amd?define("packages/core/src/lib/cldr",[],t):typeof module=="object"&&typeof module.exports=="object"?module.exports=t():e.Cldr=t()}(this,function(){var e=function(e,t){var n,r;if(e.forEach)return e.forEach(t);for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},t=function(e){var t,n=[];if(Object.keys)return Object.keys(e);for(t in e)n.push(t);return n},n=function(n,r){var i,s;return s=n+(r&&JSON?": "+JSON.stringify(r):""),i=new Error(s),i.code=n,e(t(r),function(e){i[e]=r[e]}),i},r=function(e,t,r){if(!t)throw n(e,r)},i=function(e,t){r("E_MISSING_PARAMETER",typeof e!="undefined",{name:t})},s=function(e,t,n,i){r("E_INVALID_PAR_TYPE",n,{expected:i,name:t,value:e})},o=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},u=function(e,t){s(e,t,typeof e=="string"||o(e),"String or Array")},a=function(e){return e!==null&&""+e=="[object Object]"},f=function(e,t){s(e,t,typeof e=="undefined"||a(e),"Plain Object")},l=function(e,t){s(e,t,typeof e=="string","a string")},c=function(e,t){o(e)&&(e=e.join("/"));if(typeof e!="string")throw new Error('invalid path "'+e+'"');return e=e.replace(/^\//,"").replace(/^cldr\//,""),e=e.replace(/{[a-zA-Z]+}/g,function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),t[e]}),e.split("/")},h=function(e,t){var n,r;if(e.some)return e.some(t);for(n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return!0;return!1},p=function(e,t,n,r){var i,s,o=n[0],u=n[1],a=e.localeSep,f=n[2];r=r||{};if(o!=="und"&&u!=="Zzzz"&&f!=="ZZ")return[o,u,f];if(typeof t.get("supplemental/likelySubtags")=="undefined")return;s=h([[o,u,f],[o,f],[o,u],[o],["und",u]],function(e){return i=!/\b(Zzzz|ZZ)\b/.test(e.join(a))&&t.get(["supplemental/likelySubtags",e.join(a)])});if(s)return i=i.split(a),[o!=="und"?o:i[0],u!=="Zzzz"?u:i[1],f!=="ZZ"?f:i[2]];if(r.force)return t.get("supplemental/likelySubtags/und").split(a);return},d=function(e,t,n){var r,i,s=n[0],o=n[1],u=n[2];return i=h([[[s,"Zzzz","ZZ"],[s]],[[s,"Zzzz",u],[s,u]],[[s,o,"ZZ"],[s,o]]],function(i){var s=p(e,t,i[0]);return r=i[1],s&&s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]}),i?r:n},v=function(e,t){var n,r=e,i=t.length;for(n=0;n<i-1;n++){r=r[t[n]];if(!r)return undefined}return r[t[n]]},m=function(e,t,n){var r=c(t,n);return v(e._resolved,r)},g=function(e){return o(e)?e:[e]},y=function(){var t=function(){var n={},r=[].slice.call(arguments,0);return e(r,function(e){var r;for(r in e)r in n&&o(n[r])?n[r]=n[r].concat(e[r]):r in n&&typeof n[r]=="object"?n[r]=t(n[r],e[r]):n[r]=e[r]}),n};return t}(),b=function(e){this.init(e)};return b._alwaysArray=g,b._createError=n,b._itemGetResolved=m,b._jsonMerge=y,b._pathNormalize=c,b._resourceGet=v,b._validatePresence=i,b._validateType=s,b._validateTypePath=u,b._validateTypePlainObject=f,b._resolved={},b.localeSep="-",b.load=function(e){var t,n;i(e,"json");for(t=0;t<arguments.length;t++){e=g(arguments[t]);for(n=0;n<e.length;n++)f(e[n],"json"),b._resolved=y(b._resolved,e[n])}},b.prototype.init=function(e){var t,n,r,s,o,u,a,f=b.localeSep;i(e,"locale"),l(e,"locale"),e=e.replace(/-/,"_"),e=e.split("_u_")[0],e=e.split("_t_")[0],u=e;switch(!0){case/^[a-z]{2,3}_[A-Z][a-z]{3}_[A-Z0-9]{2}(\b|_)/.test(u):t=u.split("_")[0],s=u.split("_")[1],o=u.split("_")[2],a=u.split("_")[3];break;case/^[a-z]{2,3}_[A-Z][a-z]{3}(\b|_)/.test(u):t=u.split("_")[0],s=u.split("_")[1],o="ZZ",a=u.split("_")[2];break;case/^[a-z]{2,3}_[A-Z0-9]{2}(\b|_)/.test(u):t=u.split("_")[0],s="Zzzz",o=u.split("_")[1],a=u.split("_")[2];break;case/^([a-z]{2,3}|root)(\b|_)/.test(u):t=u.split("_")[0],s="Zzzz",o="ZZ",a=u.split("_")[1];break;default:t="und",s="Zzzz",o="ZZ"}r=p(b,this,[t,s,o],{force:!0})||u.split("_"),t=r[0],s=r[1],o=r[2],n=d(b,this,r).join(f),this.attributes={languageId:n,maxLanguageId:r.join(f),language:t,script:s,territory:o,region:o,variant:a},this.locale=a?[n,a].join(f):n},b.prototype.get=function(e){return i(e,"path"),u(e,"path"),m(b,e,this.attributes)},b.prototype.main=function(e){return i(e,"path"),u(e,"path"),e=g(e),this.get(["main/{languageId}"].concat(e))},b}),function(e){typeof define=="function"&&define.amd?define("packages/core/src/lib/cldr/event",["../cldr"],e):typeof module=="object"&&typeof module.exports=="object"?module.exports=e(require("cldrjs")):e(Cldr)}(function(e){function f(e,t){r(e,t,typeof e=="string"||e instanceof RegExp,"String or RegExp")}function l(e,t){return function(r,i){return n(r,"event"),f(r,"event"),n(i,"listener"),s(i,"listener"),t[e].apply(t,arguments)}}function c(e){return l("off",e)}function h(e){return l("on",e)}function p(e){return l("once",e)}function d(){o=e.prototype.get,e.prototype.get=function(e){var n=o.apply(this,arguments);return e=t(e,this.attributes).join("/"),a.trigger("get",[e,n]),this.ee.trigger("get",[e,n]),n}}var t=e._pathNormalize,n=e._validatePresence,r=e._validateType,i;i=function(){function e(){}function i(e,t){var n=e.length;while(n--)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}var t=e.prototype,n=this,r=n.EventEmitter;return t.getListeners=function(t){var n=this._getEvents(),r,i;if(t instanceof RegExp){r={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(r[i]=n[i])}else r=n[t]||(n[t]=[]);return r},t.flattenListeners=function(t){var n=[],r;for(r=0;r<t.length;r+=1)n.push(t[r].listener);return n},t.getListenersAsObject=function(t){var n=this.getListeners(t),r;return n instanceof Array&&(r={},r[t]=n),r||n},t.addListener=function(t,n){var r=this.getListenersAsObject(t),s=typeof n=="object",o;for(o in r)r.hasOwnProperty(o)&&i(r[o],n)===-1&&r[o].push(s?n:{listener:n,once:!1});return this},t.on=s("addListener"),t.addOnceListener=function(t,n){return this.addListener(t,{listener:n,once:!0})},t.once=s("addOnceListener"),t.defineEvent=function(t){return this.getListeners(t),this},t.defineEvents=function(t){for(var n=0;n<t.length;n+=1)this.defineEvent(t[n]);return this},t.removeListener=function(t,n){var r=this.getListenersAsObject(t),s,o;for(o in r)r.hasOwnProperty(o)&&(s=i(r[o],n),s!==-1&&r[o].splice(s,1));return this},t.off=s("removeListener"),t.addListeners=function(t,n){return this.manipulateListeners(!1,t,n)},t.removeListeners=function(t,n){return this.manipulateListeners(!0,t,n)},t.manipulateListeners=function(t,n,r){var i,s,o=t?this.removeListener:this.addListener,u=t?this.removeListeners:this.addListeners;if(typeof n!="object"||n instanceof RegExp){i=r.length;while(i--)o.call(this,n,r[i])}else for(i in n)n.hasOwnProperty(i)&&(s=n[i])&&(typeof s=="function"?o.call(this,i,s):u.call(this,i,s));return this},t.removeEvent=function(t){var n=typeof t,r=this._getEvents(),i;if(n==="string")delete r[t];else if(t instanceof RegExp)for(i in r)r.hasOwnProperty(i)&&t.test(i)&&delete r[i];else delete this._events;return this},t.removeAllListeners=s("removeEvent"),t.emitEvent=function(t,n){var r=this.getListenersAsObject(t),i,s,o,u;for(o in r)if(r.hasOwnProperty(o)){s=r[o].length;while(s--)i=r[o][s],i.once===!0&&this.removeListener(t,i.listener),u=i.listener.apply(this,n||[]),u===this._getOnceReturnValue()&&this.removeListener(t,i.listener)}return this},t.trigger=s("emitEvent"),t.emit=function(t){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,n)},t.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},t._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},t._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=r,e},e}();var s=function(e,t){r(e,t,typeof e=="undefined"||typeof e=="function","Function")},o,u,a=new i;return e.off=c(a),e.on=h(a),e.once=p(a),u=e.prototype.init,e.prototype.init=function(){var e;this.ee=e=new i,this.off=c(e),this.on=h(e),this.once=p(e),u.apply(this,arguments)},e._eventInit=d,d(),e}),function(e,t){typeof define=="function"&&define.amd?define("packages/core/src/lib/globalize",["./cldr","./cldr/event"],t):typeof exports=="object"?module.exports=t(require("cldrjs")):e.Globalize=t(e.Cldr)}(this,function(e){function v(e){e.once("get",o),e.get("supplemental/likelySubtags")}function m(e){if(!(this instanceof m))return new m(e);a(e,"locale"),c(e,"locale"),this.cldr=d(e),v(this.cldr)}var t=function(e){return typeof e=="string"?e:typeof e=="number"?""+e:JSON.stringify(e)},n=function(e,n){return e=e.replace(/{[0-9a-zA-Z-_. ]+}/g,function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),t(n[e])}),e},r=function(e,t,r){var i;return t=e+(t?": "+n(t,r):""),i=new Error(t),i.code=e,Object.keys(r).forEach(function(e){i[e]=r[e]}),i},i=function(e,t,n,i){if(!n)throw r(e,t,i)},s=function(e){return Array.isArray(e)?e:e?[e]:[]},o=function(e,t,n){var r;n=n||{},r=s(n.skip).some(function(t){return t.test(e)}),i("E_MISSING_CLDR","Missing required CLDR content `{path}`.",t||r,{path:e})},u=function(e){i("E_DEFAULT_LOCALE_NOT_DEFINED","Default locale has not been defined.",e!==undefined,{})},a=function(e,t){i("E_MISSING_PARAMETER","Missing required parameter `{name}`.",e!==undefined,{name:t})},f=function(e,t,n,r){i("E_PAR_OUT_OF_RANGE","Parameter `{name}` has value `{value}` out of range [{minimum}, {maximum}].",e===undefined||e>=n&&e<=r,{maximum:r,minimum:n,name:t,value:e})},l=function(e,t,n,r){i("E_INVALID_PAR_TYPE","Invalid `{name}` parameter ({value}). {expected} expected.",n,{expected:r,name:t,value:e})},c=function(t,n){l(t,n,t===undefined||typeof t=="string"||t instanceof e,"String or Cldr instance")},h=function(e){return e!==null&&""+e=="[object Object]"},p=function(e,t){l(e,t,e===undefined||h(e),"Plain Object")},d=function(t){return t instanceof e?t:new e(t)};return m.load=function(t){a(t,"json"),p(t,"json"),e.load(t)},m.locale=function(e){return c(e,"locale"),arguments.length&&(this.cldr=d(e),v(this.cldr)),this.cldr},m._alwaysArray=s,m._createError=r,m._formatMessage=n,m._isPlainObject=h,m._validate=i,m._validateCldr=o,m._validateDefaultLocale=u,m._validateParameterPresence=a,m._validateParameterRange=f,m._validateParameterTypePlainObject=p,m._validateParameterType=l,m}),function(e,t){typeof define=="function"&&define.amd?define("packages/core/src/lib/globalize/message",["../cldr","../globalize"],t):typeof exports=="object"?module.exports=t(require("cldrjs"),require("globalize")):t(e.Cldr,e.Globalize)}(this,function(e,t){var n=t._alwaysArray,r=t._validateDefaultLocale,i=t._validateParameterPresence,s=t._validateParameterType,o=t._validateParameterTypePlainObject;return t.loadTranslations=function(t){var n={"globalize-translations":t};i(t,"json"),o(t,"json"),e.load(n)},t.translate=t.prototype.translate=function(e){var t;return i(e,"path"),s(e,"path",typeof e=="string"||Array.isArray(e),"a String nor an Array"),e=n(e),t=this.cldr,r(t),t.get(["globalize-translations/{languageId}"].concat(e))},t}),define("packages/core/src/strings",["underscore","./lib/globalize/message"],function(e,t){function n(e){e=e||{},this.globalize=e.globalize||t,this.month=(e.date||new Date).getMonth()}function r(){return this.month===11?"☃":"𣎴"}return n.prototype.translate=function(e,t){e=e.replace(/\./g,"/");var i=this.globalize.translate(e);return t&&(i=this.format(i,t)),n.debugUnicode&&typeof i=="string"?r.call(this)+i:i},n.prototype.format=function(t,n){if(!t||!n)return t;var r=e.unique(t.match(/\{.*?\}/g)).map(function(e){return e.substr(1,e.length-2)});return e.each(r,function(e){var r=n[e];if(r==null){if(!(e in n))return;r=""}r=r.toString().replace("{","{\0"),t=t.replace(new RegExp("\\{"+e+"\\}","g"),r)}),t.replace("{\0","{")},n}),define("packages/core/src/builtInLoggingMethods",["underscore","jquery","./logSystem","./indexedDBHandler","./host","./strings"],function(e,t,n,r,i,s){function u(){return(new Date).toJSON().replace(/T/g," ").replace(/Z/g,"")}function a(e,t,n,r){return[u(),": ",l(t),": ",n,": ",r,": ",e].join("")}function l(e){return f[e]||""}var o=new s,f=e.invert(n.levels),c={console:function(t){var n=t&&t.console||window.console,r={1:"color:#333",2:"color:#03f",3:"color:#000;background:#ff8000",4:"color:#000;background:#fcc",5:"color:#000;background:#fdd"};this.log=function(e,t,i,s){var o=a(e,t,i,s);this.useColor?n.log("%c "+o,r[t]):n.log(o)},this.useColor=navigator.appName.indexOf("Internet Explorer")===-1},memorybuffer:function(){var t="";this.log=function(e,n,r,i){t+="\n"+a(e,n,r,i)+"\n"},this.getBuffer=function(){return t},this.clearBuffer=function(){t=""}},externalwindow:function(n){n=n||{},n.window=n.window||window;var r=n.strings||o;this.outputList=null;var i=[],s=this;this.launchViewer=function(){var e=t('<div><div style="text-align:right"><button onclick="clearBuffer();">Clear</button></div></div>');this.outputList=t('<ul id="entries"></ul>').appendTo(e),this.outputList.append(i.map(function(e){return"<li>"+e+"</li>"}).join(""));var o="toolbar=1,menubar=1,status=1,scrollbars=1";s.consoleWindow=n.window.open("","EventLogOutputConsole",o),s.consoleWindow&&(s.consoleWindow.clearBuffer=s.clearBuffer,s.consoleWindow.document.title=r.translate("core.runtime.eventLogViewerTitle",r.translate("core")),s.consoleWindow.document.body.innerHTML=e[0].outerHTML,this.outputList=t(s.consoleWindow.document.getElementById("entries")))},this.log=function(e,t,n,r){e=a(e,t,n,r),i.push(e);if(this.outputList)try{this.outputList.append("<li>"+e+"</li>")}catch(s){this.outputList=null}},this.getBuffer=function(){return i},this.clearBuffer=function(){i.length=0;if(s.consoleWindow){var e=s.consoleWindow.document.getElementById("entries");e.innerHTML="",this.outputList=t(e)}}},hosted:function(t){var n=t&&t.host||i;this.log=function(e,t,r,i){n.OnLogMessage(e+": "+i,t,r)}},indexeddb:function(n){n=n||{};var i=n.DbHandler||r,s="logEntry",o={};o[s]={keyPath:"timestamp"};var u=0,a=[];this.log=function(e,t,n,r){a.push({content:e,verbosity:t,category:n,loggingContext:r})};var f=new i("EventLog",{schema:o});f.open(e.bind(function(){this.log=function(e,t,n,r){u===0&&f.count(s,function(e){e-=5e3,f.forEach(s,function(t){if(e--<0)return!1;t.remove()})}),u=(u+1)%100,f.add(s,{timestamp:(new Date).toJSON(),content:e,verbosity:t,category:n,loggingContext:r})};for(var e=0;e<a.length;e++){var t=a[e];this.log(t.content,t.verbosity,t.category,t.loggingContext)}a=null},this)),this.launchViewer=function(){var e="toolbar=1,menubar=1,status=1,scrollbars=1";n.window.open("logViewer.html","InteractWebOutputConsole",e)}}};return c}),define("packages/core/src/config",["underscore","jquery","./host"],function(e,t,n){function r(e){e=e||{},this.buildVersion="1.0.0.0",this.values={},this.require=e.require||require}return r.prototype.load=function(t){t=t||{};var r=t.host||n,i=this.values;this.require(["json!config"],function(n){e.extend(i,n),r.isPresent()&&(i.modules=[r.get_ModuleName()],i.loggingLevel="VERBOSE",i.loggingMethod="hosted"),t.success&&t.success()},function(e){if(t.error){t.error(e);return}})},r}),define("packages/core/src/backboneAdapter",["jquery","underscore","./lib/backbone","require"],function(e,t,n,r){var i={defaultStart:n.history.start};n.$=e,n.Router.normalize=function(){var e=Array.prototype.join.call(arguments,"/").replace(/\/\//g,"/").replace("/?","?").replace(/(^\/|\/$)/g,"");return e},n.history=new n.History,n.history.start=function(){try{i.defaultStart.call(n.history)}catch(e){if(!e||e.name!=="Error")throw e}};var s=n.Router.prototype.execute;return n.Router.prototype.execute=function(){var e=r("./app"),t=e.instance.session.connections.online;(t.filterRoute||s).apply(t||this,arguments)},i}),define("packages/core/src/lib/base64",[],function(){if(window.atob&&window.btoa)return;base64={},base64.PADCHAR="=",base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64.getbyte64=function(e,t){var n=base64.ALPHA.indexOf(e.charAt(t));if(n==-1)throw"Cannot decode base64";return n},base64.decode=function(e){e=""+e;var t=base64.getbyte64,n,r,i,s=e.length;if(s==0)return e;if(s%4!=0)throw"Cannot decode base64";n=0,e.charAt(s-1)==base64.PADCHAR&&(n=1,e.charAt(s-2)==base64.PADCHAR&&(n=2),s-=4);var o=[];for(r=0;r<s;r+=4)i=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6|t(e,r+3),o.push(String.fromCharCode(i>>16,i>>8&255,i&255));switch(n){case 1:i=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6,o.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=t(e,r)<<18|t(e,r+1)<<12,o.push(String.fromCharCode(i>>16))}return o.join("")},base64.getbyte=function(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n},base64.encode=function(e){if(arguments.length!=1)throw"SyntaxError: Not enough arguments";var t=base64.PADCHAR,n=base64.ALPHA,r=base64.getbyte,i,s,o=[];e=""+e;var u=e.length-e.length%3;if(e.length==0)return e;for(i=0;i<u;i+=3)s=r(e,i)<<16|r(e,i+1)<<8|r(e,i+2),o.push(n.charAt(s>>18)),o.push(n.charAt(s>>12&63)),o.push(n.charAt(s>>6&63)),o.push(n.charAt(s&63));switch(e.length-u){case 1:s=r(e,i)<<16,o.push(n.charAt(s>>18)+n.charAt(s>>12&63)+t+t);break;case 2:s=r(e,i)<<16|r(e,i+1)<<8,o.push(n.charAt(s>>18)+n.charAt(s>>12&63)+n.charAt(s>>6&63)+t)}return o.join("")},window.btoa=base64.encode,window.atob=base64.decode}),define("packages/core/src/preloads",["./require-json","./require-platform","./host","./backboneAdapter","./lib/base64","./require-template"],{}),function(){function e(e){return typeof e=="function"||typeof e=="object"&&e!==null}function t(e){return typeof e=="function"}function n(e){return typeof e=="object"&&e!==null}function o(){}function p(){return function(){process.nextTick(y)}}function d(){var e=0,t=new c(y),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function v(){var e=new MessageChannel;return e.port1.onmessage=y,function(){e.port2.postMessage(0)}}function m(){return function(){setTimeout(y,1)}}function y(){for(var e=0;e<a;e+=2){var t=g[e],n=g[e+1];t(n),g[e]=undefined,g[e+1]=undefined}a=0}function w(){}function N(){return new TypeError("You cannot resolve a promise with itself")}function C(){return new TypeError("A promises callback cannot return that same promise.")}function k(e){try{return e.then}catch(t){return T.error=t,T}}function L(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function A(e,t,n){f(function(e){var r=!1,i=L(n,t,function(n){if(r)return;r=!0,t!==n?_(e,n):P(e,n)},function(t){if(r)return;r=!0,H(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,H(e,i))},e)}function O(e,t){t._state===S?P(e,t._result):e._state===x?H(e,t._result):B(t,undefined,function(t){_(e,t)},function(t){H(e,t)})}function M(e,n){if(n.constructor===e.constructor)O(e,n);else{var r=k(n);r===T?H(e,T.error):r===undefined?P(e,n):t(r)?A(e,n,r):P(e,n)}}function _(t,n){t===n?H(t,N()):e(n)?M(t,n):P(t,n)}function D(e){e._onerror&&e._onerror(e._result),j(e)}function P(e,t){if(e._state!==E)return;e._result=t,e._state=S,e._subscribers.length!==0&&f(j,e)}function H(e,t){if(e._state!==E)return;e._state=x,e._result=t,f(D,e)}function B(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+S]=n,i[s+x]=r,s===0&&e._state&&f(j,e)}function j(e){var t=e._subscribers,n=e._state;if(t.length===0)return;var r,i,s=e._result;for(var o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?R(n,r,i,s):i(s);e._subscribers.length=0}function F(){this.error=null}function q(e,t){try{return e(t)}catch(n){return I.error=n,I}}function R(e,n,r,i){var s=t(r),o,u,a,f;if(s){o=q(r,i),o===I?(f=!0,u=o.error,o=null):a=!0;if(n===o){H(n,C());return}}else o=i,a=!0;n._state===E&&(s&&a?_(n,o):f?H(n,u):e===S?P(n,o):e===x&&H(n,o))}function U(e,t){try{t(function(n){_(e,n)},function(n){H(e,n)})}catch(n){H(e,n)}}function z(e,t,n){return e===S?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function W(e,t,n,r){this._instanceConstructor=e,this.promise=new e(w,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),this.length===0?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(),this._remaining===0&&P(this.promise,this._result))):H(this.promise,this._validationError())}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function et(e){this._id=Q++,this._state=undefined,this._result=undefined,this._subscribers=[],w!==e&&(t(e)||G(),this instanceof et||Y(),U(this,e))}var r;Array.isArray?r=Array.isArray:r=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var i=r,s=Date.now||function(){return(new Date).getTime()},u=Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(typeof e!="object")throw new TypeError("Argument must be an object");return o.prototype=e,new o},a=0,f=function(t,n){g[a]=t,g[a+1]=n,a+=2,a===2&&b()},l=typeof window!="undefined"?window:{},c=l.MutationObserver||l.WebKitMutationObserver,h=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined",g=new Array(1e3),b;typeof process!="undefined"&&{}.toString.call(process)==="[object process]"?b=p():c?b=d():h?b=v():b=m();var E=void 0,S=1,x=2,T=new F,I=new F;W.prototype._validateInput=function(e){return i(e)},W.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},W.prototype._init=function(){this._result=new Array(this.length)};var X=W;W.prototype._enumerate=function(){var e=this.length,t=this.promise,n=this._input;for(var r=0;t._state===E&&r<e;r++)this._eachEntry(n[r],r)},W.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;n(e)?e.constructor===r&&e._state!==E?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(S,t,e))},W.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===E&&(this._remaining--,this._abortOnReject&&e===x?H(r,n):this._result[t]=this._makeResult(e,t,n)),this._remaining===0&&P(r,this._result)},W.prototype._makeResult=function(e,t,n){return n},W.prototype._willSettleAt=function(e,t){var n=this;B(e,undefined,function(e){n._settledAt(S,t,e)},function(e){n._settledAt(x,t,e)})};var V=function(t,n){return(new X(this,t,!0,n)).promise},$=function(t,n){function u(e){_(s,e)}function a(e){H(s,e)}var r=this,s=new r(w,n);if(!i(t))return H(s,new TypeError("You must pass an array to race.")),s;var o=t.length;for(var f=0;s._state===E&&f<o;f++)B(r.resolve(t[f]),undefined,u,a);return s},J=function(t,n){var r=this;if(t&&typeof t=="object"&&t.constructor===r)return t;var i=new r(w,n);return _(i,t),i},K=function(t,n){var r=this,i=new r(w,n);return H(i,t),i},Q=0,Z=et;et.all=V,et.race=$,et.resolve=J,et.reject=K,et.prototype={constructor:et,then:function(e,t){var n=this,r=n._state;if(r===S&&!e||r===x&&!t)return this;var i=new this.constructor(w),s=n._result;if(r){var o=arguments[r-1];f(function(){R(r,i,o,s)})}else B(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var tt=function(){var n;typeof global!="undefined"?n=global:typeof window!="undefined"&&window.document?n=window:n=self;var r="Promise"in n&&"resolve"in n.Promise&&"reject"in n.Promise&&"all"in n.Promise&&"race"in n.Promise&&function(){var e;return new n.Promise(function(t){e=t}),t(e)}();r||(n.Promise=Z)},nt={Promise:Z,polyfill:tt};typeof define=="function"&&define.amd?define("packages/core/src/lib/es6-promise-2.0.1",[],function(){return nt}):typeof module!="undefined"&&module.exports?module.exports=nt:typeof this!="undefined"&&(this.ES6Promise=nt)}.call(this),define("packages/core/src/polyfills",["./lib/es6-promise-2.0.1"],function(e){var t={addFreeze:function(e){e=e||Object,e.freeze||(e.freeze=function(e){return e})},addPromises:function(t){t=t||window,t.Promise||e.polyfill()},addBind:function(e){e=e||Function,e.prototype.bind||Object.defineProperty(e.prototype,"bind",{enumerable:!1,value:function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype||{},i.prototype=new r,i}})},addClassList:function(e){function t(e){e.length=0;var t=e._elem.className.trim().split(/\s+/),n=t.length;for(var i=0;i<n;i++)t[i]&&e.push(t[i]);r(e)}function n(e){e._elem.className!==e._prevClassName&&t(e)}function r(e){e._elem.className=e.join(" "),e._prevClassName=e._elem.className}e=e||HTMLElement;if(!("classList"in e.prototype)){var i=function(e){this._elem=e,t(this)};i.prototype=[],i.prototype.add=function(e){n(this),Array.prototype.indexOf.call(this,e)===-1&&(this.push(e),r(this))},i.prototype.contains=function(e){return n(this),Array.prototype.indexOf.call(this,e)!==-1},i.prototype.item=function(e){return n(this),this[e]||null},i.prototype.remove=function(e){n(this);var t=Array.prototype.indexOf.call(this,e);t!==-1&&(this.splice(t,1),r(this))},i.prototype.toggle=function(e){return this.contains(e)?(this.remove(e),!1):(this.add(e),!0)},i.prototype.toString=function(){return n(this),this.join(" ")},Object.defineProperty(e.prototype,"classList",{get:function(){return this._classList||(this._classList=new i(this))},enumerable:!0,configurable:!0})}}};return t.addPromises(),t.addBind(),t.addClassList(),t}),define("packages/core/src/app",["underscore","jquery","./lib/backbone","require","./logSystem","./api/logger","./builtInLoggingMethods","./config","./cookies","./preloads","./polyfills"],function(e,t,n,r,i,s,o,u,a){function l(i){l.instance=this;var s=this;s.logSystem=f,i=i||{};var c=i.require||r,h=i.history||n.history;c(["./errorHandler","./packageCatalog","./moduleCatalog","./session","./platformDetector","platform","json!platforms","./locale","./resourceLoader","./strings","./printer","./localPrintService","./require-template","./handlebarsHelpers"],function(n,r,l,p,d,v,m,g,y,b,w,E){function k(){var n=t.Deferred(),r=new u,s=i.configLoad||r.load;return s.call(r,{success:function(){e.extend(r.values,i.config),C=r.values,b.debugUnicode=C.debugUnicode,n.resolve()},error:function(e){n.reject({errorMessage:S.translate("core.startup.configSyntaxFail"),logMessage:e.message})}}),n}function L(){function r(e){var t;try{t=S.translate("core.startup.packageResourceLoadFail",{pkgName:"core"})}catch(r){}t||(t="To start this product, the resource files must be available. Verify that the package is configured correctly for the following package. core"),n.reject({errorMessage:t,logMessage:"Unable to load resource files for resource loader initialization: "+e})}var n=t.Deferred();return c(["json!brand/locales"],function(i){N.loadRootTranslations("packages/core/src/resources/core-en-US").then(function(){return s.locale.loadCldrData()},e.partial(r,"core English resources")).then(function(){return s.locale.initLocale()},e.partial(r,"root CLDR data")).then(function(){var e=s.locale.get(),n=s.locale.getLanguage(),o=i[e]||i[n]||(i.root?i[i.root]:i.en);return o?N.loadTranslations(o):(r("branding locale"),t.Deferred().reject())},e.partial(r,"supplementary CLDR data")).then(n.resolve,e.partial(r,"branding resources"))},function(){r("brand/locales.json")}),n}function A(){var n=t.Deferred();d.platformConfig=m,s.detector=new d,v.setPlatformDetector(s.detector),s.detector.detect();var u=o[C.loggingMethod.toLowerCase()||"console"];f.loggingMethod=new u,f.log("app started"),x.hookGlobalErrorHandler(window);if(!T.isEnabled()){var a=S.translate("core.startup.cookiesDisabledFail");return n.reject({errorMessage:a,logMessage:a}),n}s.session=new p({timeoutSeconds:C.sessionTimeoutSeconds}),s.moduleCatalog=i.moduleCatalog||new l({modules:C.modules}),s.packageCatalog=new r({config:C}),s.config=C;var c=new w;c.registerService(new E);var h=i.packages;if(!h){h={},C.modules=C.modules||[],C.shell!=="none"&&(C.shell||(C.shell={}),C.modules.unshift(C.shell.module||"shell:ShellModule","shell:LoginModule","shell:SettingsModule","shell:BlankModule"));var g=C.modules.slice(0);C.connection&&g.push(C.connection),e.each(g,function(e){var t=e.split(":")[0];h[t]={path:s.packageCatalog.getPackagePath(t)}})}return s.packageCatalog.load({packages:h}).then(n.resolve),n}function O(){(i.document||window.document).title=S.translate("brand.productName"),s.moduleCatalog.on("loaded",function(){h.start()}),s.session.load(C.connection),s.moduleCatalog.load(),window.Handlebars=window._=window.$=window.Backbone=window.less=undefined}var S=i.strings||new b,x=i.errorHandler||new n,T=i.cookies||a;s.locale=i.locale||new g;var N=i.resourceLoader||new y,C;L().then(k).then(A).done(i.onPackagesLoaded||O).fail(function(e){x.renderErrorPage(e.errorMessage),x.logger.log(e.logMessage,x.logger.CRITICAL)})})}requirejs.config({shim:{"packages/core/src/lib/handlebars":{exports:"Handlebars"},"packages/core/src/lib/less":{exports:"less"}}});var f=new i({loggingMethod:new o.console});return define("logger",new s({mainLogger:f})),l}),define("packages/core/src/errorHandler",["jquery","logger","./strings"],function(e,t,n){function r(n){n=n||{},this.logger=n.logger||t,this.outputElement=e(n.outputElement||e("body").children().first())}function i(){throw"An error callback must be provided to all request methods"}return n=new n,r.prototype.hookGlobalErrorHandler=function(e){var r=this;e.addEventListener("error",function(e){var i=n.format("Error at: line {0}, {1}\n{2}\n",[e.lineno,e.filename,(e.message||"").replace(/\n/g," ")]);return r.logger.log(i,t.CRITICAL),!1})},r.prototype.renderErrorPage=function(e){this.outputElement.replaceWith('<h2 class="criticalError">'+e+"</h2>")},r.wrapModelError=function(e){(!e||!e.error)&&i();var n=e.abortsLogLevel,r=e.logger||t,s=e.error;e.error=function(e,i,o){var u=e.getResponseError(i),a=t.ERROR;i.statusText==="abort"&&(a=n!=null?n:t.WARNING),r.log(u.message,a),s(e,i,o,u)}},r}),define("packages/core/src/model",["underscore","./lib/backbone","./strings","./errorHandler"],function(e,t,n,r){n=new n;var i,s=t.Model.extend({fetch:function(n){return n=n?e.clone(n):{},r.wrapModelError(n),t.Model.prototype.fetch.call(this,n)},save:function(n,i){return i=i?e.clone(i):{},r.wrapModelError(i),t.Model.prototype.save.call(this,n,i)},destroy:function(n){return n=n?e.clone(n):{},r.wrapModelError(n),t.Model.prototype.destroy.call(this,n)},sync:function(e,n,r){return r=r||{},r.cache=r.cache||!1,t.Model.prototype.sync.call(this,e,n,r)},getResponseError:function(e){i||(i={500:n.translate("core.session.serverError"),400:n.translate("core.session.badRequest"),404:n.translate("core.session.resourceNotFound"),403:n.translate("core.session.requestForbidden"),401:n.translate("core.session.invalidSession"),0:n.translate(e.statusText==="abort"?"core.session.requestAborted":"core.session.communicationError")});var t={statusCode:e.status,message:i[e.status]||n.translate("core.session.unknownErrorOccured")};return t}});return s}),define("packages/core/src/collection",["./lib/backbone","./errorHandler","./model"],function(e,t,n){var r=e.Collection.extend({fetch:function(n){return t.wrapModelError(n),e.Collection.prototype.fetch.call(this,n)},getResponseError:n.prototype.getResponseError});return r}),function(e){typeof define=="function"&&define.amd?define("packages/core/src/lib/cldr/supplemental",["../cldr"],e):typeof module=="object"&&typeof module.exports=="object"?module.exports=e(require("cldrjs")):e(Cldr)}(function(e){var t=e._alwaysArray,n=function(e){var n,r;return n=function(n){return function(r){return r=t(r),e.get([n].concat(r))}},r=n("supplemental"),r.weekData=n("supplemental/weekData"),r.weekData.firstDay=function(){return e.get("supplemental/weekData/firstDay/{territory}")||e.get("supplemental/weekData/firstDay/001")},r.weekData.minDays=function(){var t=e.get("supplemental/weekData/minDays/{territory}")||e.get("supplemental/weekData/minDays/001");return parseInt(t,10)},r.timeData=n("supplemental/timeData"),r.timeData.allowed=function(){return e.get("supplemental/timeData/{territory}/_allowed")||e.get("supplemental/timeData/001/_allowed")},r.timeData.preferred=function(){return e.get("supplemental/timeData/{territory}/_preferred")||e.get("supplemental/timeData/001/_preferred")},r},r=e.prototype.init;return e.prototype.init=function(){r.apply(this,arguments),this.supplemental=n(this)},e}),function(e,t){typeof define=="function"&&define.amd?define("packages/core/src/lib/globalize/date",["../cldr","../globalize","../cldr/event","../cldr/supplemental"],t):typeof exports=="object"?module.exports=t(require("cldrjs"),require("globalize")):t(e.Cldr,e.Globalize)}(this,function(e,t){function D(e,t){s(e,t,{skip:[/dates\/calendars\/gregorian\/days\/.*\/short/,/supplemental\/timeData\/(?!001)/,/supplemental\/weekData\/(?!001)/]})}var n=t._createError,r=t._formatMessage,i=t._isPlainObject,s=t._validateCldr,o=t._validateDefaultLocale,u=t._validateParameterPresence,a=t._validateParameterType,f=function(e,t){a(e,t,e===undefined||e instanceof Date,"Date")},l=function(e,t){a(e,t,e===undefined||typeof e=="string"||i(e),"String or plain Object")},c=function(e,t){a(e,t,e===undefined||typeof e=="string","a string")},h=function(e,t){return n("E_INVALID_PAR_VALUE","Invalid `{name}` value ({value}).",{name:e,value:t})},p=function(e,t){var n;typeof e=="string"&&(e={skeleton:e});switch(!0){case"skeleton"in e:n=t.main(["dates/calendars/gregorian/dateTimeFormats/availableFormats",e.skeleton]);break;case"date"in e:case"time"in e:n=t.main(["dates/calendars/gregorian","date"in e?"dateFormats":"timeFormats",e.date||e.time]);break;case"datetime"in e:n=t.main(["dates/calendars/gregorian/dateTimeFormats",e.datetime]),n&&(n=r(n,[t.main(["dates/calendars/gregorian/timeFormats",e.datetime]),t.main(["dates/calendars/gregorian/dateFormats",e.datetime])]));break;case"pattern"in e:n=e.pattern;break;default:throw h({name:"pattern",value:e})}return n},d=function(e,t){return(e.getDay()-t+7)%7},v=function(e,t){var n=864e5;return(t.getTime()-e.getTime())/n},m=function(e,t){e=new Date(e.getTime());switch(t){case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0);case"hour":e.setMinutes(0);case"minute":e.setSeconds(0);case"second":e.setMilliseconds(0)}return e},g=function(e){return Math.floor(v(m(e,"year"),e))},y=["sun","mon","tue","wed","thu","fri","sat"],b=function(e){return y.indexOf(e.supplemental.weekData.firstDay())},w=function(e){return e-m(e,"day")},E=/([a-z])\1*|'[^']+'|''|./ig,S=function(e,t,n){var r;typeof e!="string"&&(e=String(e));for(r=e.length;r<t;r+=1)e=n?e+"0":"0"+e;return e},x=function(e,t){var n=e.getTimezoneOffset();return t=t.split(";")[n>0?1:0],t=t.replace(/HH?/,function(e){return S(Math.floor(Math.abs(n)/60),e.length)}),t.replace(/mm/,S(Math.abs(n)%60,2))},T=function(e,t){return t.pattern.replace(E,function(n){var r,i,s=n.charAt(0),o=n.length;s==="j"&&(s=t.preferredTime),s==="Z"&&(o<4?(s="x",o=4):o<5?(s="O",o=4):(s="X",o=5));switch(s){case"G":i=t.eras[e.getFullYear()<0?0:1];break;case"y":i=String(e.getFullYear()),r=!0,o===2&&(i=i.substr(i.length-2));break;case"Y":i=new Date(e.getTime()),i.setDate(i.getDate()+7-d(e,t.firstDay)-t.firstDay-t.minDays),i=String(i.getFullYear()),r=!0,o===2&&(i=i.substr(i.length-2));break;case"Q":case"q":i=Math.ceil((e.getMonth()+1)/3),o<=2?r=!0:i=t.quarters[s][o][i];break;case"M":case"L":i=e.getMonth()+1,o<=2?r=!0:i=t.months[s][o][i];break;case"w":i=d(m(e,"year"),t.firstDay),i=Math.ceil((g(e)+i)/7)-(7-i>=t.minDays?0:1),r=!0;break;case"W":i=d(m(e,"month"),t.firstDay),i=Math.ceil((e.getDate()+i)/7)-(7-i>=t.minDays?0:1);break;case"d":i=e.getDate(),r=!0;break;case"D":i=g(e)+1,r=!0;break;case"F":i=Math.floor(e.getDate()/7)+1;break;case"e":case"c":if(o<=2){i=d(e,t.firstDay)+1,r=!0;break};case"E":i=y[e.getDay()],i=t.days[s][o][i];break;case"a":i=t.dayPeriods[e.getHours()<12?"am":"pm"];break;case"h":i=e.getHours()%12||12,r=!0;break;case"H":i=e.getHours(),r=!0;break;case"K":i=e.getHours()%12,r=!0;break;case"k":i=e.getHours()||24,r=!0;break;case"m":i=e.getMinutes(),r=!0;break;case"s":i=e.getSeconds(),r=!0;break;case"S":i=Math.round(e.getMilliseconds()*Math.pow(10,o-3)),r=!0;break;case"A":i=Math.round(w(e)*Math.pow(10,o-3)),r=!0;break;case"z":case"O":e.getTimezoneOffset()===0?i=t.gmtZeroFormat:(i=x(e,o<4?"+H;-H":t.tzLongHourFormat),i=t.gmtFormat.replace(/\{0\}/,i));break;case"X":if(e.getTimezoneOffset()===0){i="Z";break};case"x":i=o===1?"+HH;-HH":o%2?"+HH:mm;-HH:mm":"+HHmm;-HHmm",i=x(e,i);break;default:return n}return r&&(i=S(i,o)),i})},N=function(e){return n("E_UNSUPPORTED","Unsupported {feature}.",{feature:e})},C=function(e,t){var n={},r=["abbreviated","wide","narrow"];return n.pattern=e,e.replace(E,function(e){var i=e.charAt(0),s=e.length;i==="j"&&(n.preferredTime=i=t.supplemental.timeData.preferred()),i==="Z"&&s===4&&(i="O",s=4);switch(i){case"G":n.eras=t.main(["dates/calendars/gregorian/eras",s<=3?"eraAbbr":s===4?"eraNames":"eraNarrow"]);break;case"Y":n.firstDay=b(t),n.minDays=t.supplemental.weekData.minDays();break;case"u":case"U":throw N({feature:"year pattern `"+i+"`"});case"Q":case"q":s>2&&(n.quarters||(n.quarters={}),n.quarters[i]||(n.quarters[i]={}),n.quarters[i][s]=t.main(["dates/calendars/gregorian/quarters",i==="Q"?"format":"stand-alone",r[s-3]]));break;case"M":case"L":s>2&&(n.months||(n.months={}),n.months[i]||(n.months[i]={}),n.months[i][s]=t.main(["dates/calendars/gregorian/months",i==="M"?"format":"stand-alone",r[s-3]]));break;case"w":case"W":n.firstDay=b(t),n.minDays=t.supplemental.weekData.minDays();break;case"g":throw N({feature:"Julian day pattern `g`"});case"e":case"c":if(s<=2){n.firstDay=b(t);break};case"E":n.days||(n.days={}),n.days[i]||(n.days[i]={}),s===6?n.days[i][s]=t.main(["dates/calendars/gregorian/days",i==="c"?"stand-alone":"format","short"])||t.main(["dates/calendars/gregorian/days",i==="c"?"stand-alone":"format","abbreviated"]):n.days[i][s]=t.main(["dates/calendars/gregorian/days",i==="c"?"stand-alone":"format",r[s<3?0:s-3]]);break;case"a":n.dayPeriods=t.main("dates/calendars/gregorian/dayPeriods/format/wide");break;case"z":case"O":n.gmtFormat=t.main("dates/timeZoneNames/gmtFormat"),n.gmtZeroFormat=t.main("dates/timeZoneNames/gmtZeroFormat"),n.tzLongHourFormat=t.main("dates/timeZoneNames/hourFormat");break;case"v":case"V":throw N({feature:"timezone pattern `"+i+"`"})}}),n},k=function(e,t){var n=(new Date(e.getFullYear(),e.getMonth()+1,0)).getDate();e.setDate(t<1?1:t<n?t:n)},L=function(e,t){var n=e.getDate();e.setDate(1),e.setMonth(t),k(e,n)},A=function(){function e(e,t,n){return e<t||e>n}return function(t,n,r){var i,s,o,u,a,f,l=0,c=1,h=2,p=3,d=4,v=5,g=6,y=new Date,b=[],w=["year","month","day","hour","minute","second","milliseconds"];if(!n.length)return null;var E;return f=n.every(function(t){var n,f,m,w;if(t.type==="literal")return!0;f=t.type.charAt(0),w=t.type.length,f==="j"&&(f=r.preferredTimeData);switch(f){case"G":b.push(l),s=+t.value;break;case"y":m=+t.lexeme;if(w===2){if(e(m,0,99))return!1;n=Math.floor(y.getFullYear()/100)*100,m+=n,m>y.getFullYear()+20&&(m-=100)}y.setFullYear(m),b.push(l);break;case"Y":throw N({feature:"year pattern `"+f+"`"});case"Q":case"q":break;case"M":case"L":w<=2?m=+t.lexeme:m=+t.value;if(e(m,1,12))return!1;L(y,m-1),b.push(c);break;case"w":case"W":break;case"d":m=+t.lexeme;if(e(m,1,31))return!1;E=m,b.push(h);break;case"D":m=+t.lexeme;if(e(m,1,366))return!1;y.setMonth(0),y.setDate(m),b.push(h);break;case"F":break;case"e":case"c":case"E":break;case"a":i=t.value;break;case"h":m=+t.lexeme;if(e(m,1,12))return!1;o=u=!0,y.setHours(m===12?0:m),b.push(p);break;case"K":m=+t.lexeme;if(e(m,0,11))return!1;o=u=!0,y.setHours(m),b.push(p);break;case"k":m=+t.lexeme;if(e(m,1,24))return!1;o=!0,y.setHours(m===24?0:m),b.push(p);break;case"H":m=+t.lexeme;if(e(m,0,23))return!1;o=!0,y.setHours(m),b.push(p);break;case"m":m=+t.lexeme;if(e(m,0,59))return!1;y.setMinutes(m),b.push(d);break;case"s":m=+t.lexeme;if(e(m,0,59))return!1;y.setSeconds(m),b.push(v);break;case"A":y.setHours(0),y.setMinutes(0),y.setSeconds(0);case"S":m=Math.round(+t.lexeme*Math.pow(10,3-w)),y.setMilliseconds(m),b.push(g);break;case"Z":case"z":case"O":case"X":case"x":a=t.value-y.getTimezoneOffset()}return!0}),E&&k(y,E),f?o&&!(!i^u)?null:(s===0&&y.setFullYear(y.getFullYear()*-1+1),u&&i==="pm"&&y.setHours(y.getHours()+12),a&&y.setMinutes(y.getMinutes()+a),b=Math.max.apply(null,b),y=m(y,w[b]),y):null}}(),O=function(e){return{preferredTimeData:e.supplemental.timeData.preferred()}},M=function(e,t){var n,r=[],i=["abbreviated","wide","narrow"];return n=t.pattern.match(E).every(function(n){function f(t){var n=e.match(t);return n?(n.length<4?a.value=(n[1]?-n[1]:+n[2])*60:a.value=(n[1]?-n[1]:+n[3])*60+(n[1]?-n[2]:+n[4]),!0):!1}function l(e,t){var n;return t||(t="{0}"),n=e.replace("+","\\+").replace(/HH|mm/g,"(\\d\\d)").replace(/H|m/g,"(\\d\\d?)"),n=n.split(";").map(function(e){return t.replace("{0}",e)}).join("|"),new RegExp(n)}function c(){if(o===1)return u=/\d/}function h(){if(o===1)return u=/\d\d?/}function p(){if(o===2)return u=/\d\d/}function d(n){var r,i,s=t[n.join("/")];for(r in s){i=new RegExp("^"+s[r]);if(i.test(e))return a.value=r,u=new RegExp(s[r])}return null}var s,o,u,a={};a.type=n,s=n.charAt(0),o=n.length,s==="Z"&&(o<4?(s="x",o=4):o<5?(s="O",o=4):(s="X",o=5));switch(s){case"G":d(["gregorian/eras",o<=3?"eraAbbr":o===4?"eraNames":"eraNarrow"]);break;case"y":case"Y":o===1?u=/\d+/:o===2?u=/\d\d/:u=new RegExp("\\d{"+o+",}");break;case"Q":case"q":c()||p()||d(["gregorian/quarters",s==="Q"?"format":"stand-alone",i[o-3]]);break;case"M":case"L":h()||p()||d(["gregorian/months",s==="M"?"format":"stand-alone",i[o-3]]);break;case"D":o<=3&&(u=new RegExp("\\d{"+o+",3}"));break;case"W":case"F":c();break;case"e":case"c":if(o<=2){c()||p();break};case"E":o===6?d(["gregorian/days",[s==="c"?"stand-alone":"format"],"short"])||d(["gregorian/days",[s==="c"?"stand-alone":"format"],"abbreviated"]):d(["gregorian/days",[s==="c"?"stand-alone":"format"],i[o<3?0:o-3]]);break;case"a":d(["gregorian/dayPeriods/format/wide"]);break;case"w":case"d":case"h":case"H":case"K":case"k":case"j":case"m":case"s":h()||p();break;case"S":u=new RegExp("\\d{"+o+"}");break;case"A":u=new RegExp("\\d{"+(o+5)+"}");break;case"z":case"O":if(e===t["timeZoneNames/gmtZeroFormat"])a.value=0,u=new RegExp(t["timeZoneNames/gmtZeroFormat"]);else{u=l(o<4?"+H;-H":t["timeZoneNames/hourFormat"],t["timeZoneNames/gmtFormat"]);if(!f(u))return null}break;case"X":if(e==="Z"){a.value=0,u=/Z/;break};case"x":u=l(o===1?"+HH;-HH":o%2?"+HH:mm;-HH:mm":"+HHmm;-HHmm");if(!f(u))return null;break;case"'":a.type="literal",n.charAt(1)==="'"?u=/'/:u=/'[^']+'/;break;default:a.type="literal",u=/./}return u?(e=e.replace(new RegExp("^"+u.source),function(e){return a.lexeme=e,""}),a.lexeme?(r.push(a),!0):!1):!1}),n?r:[]},_=function(e,t){function i(e,t){n[e.replace(/^.*\/dates\//,"").replace(/calendars\//,"")]=t}var n={pattern:e},r=["abbreviated","wide","narrow"];return t.on("get",i),e.match(E).forEach(function(e){var n,i;n=e.charAt(0),i=e.length,n==="Z"&&i<5&&(n="O",i=4);switch(n){case"G":t.main(["dates/calendars/gregorian/eras",i<=3?"eraAbbr":i===4?"eraNames":"eraNarrow"]);break;case"u":case"U":throw N({feature:"year pattern `"+n+"`"});case"Q":case"q":i>2&&t.main(["dates/calendars/gregorian/quarters",n==="Q"?"format":"stand-alone",r[i-3]]);break;case"M":case"L":i>2&&t.main(["dates/calendars/gregorian/months",n==="M"?"format":"stand-alone",r[i-3]]);break;case"g":throw N({feature:"Julian day pattern `g`"});case"e":case"c":if(i<=2)break;case"E":i===6?t.main(["dates/calendars/gregorian/days",[n==="c"?"stand-alone":"format"],"short"])||t.main(["dates/calendars/gregorian/days",[n==="c"?"stand-alone":"format"],"abbreviated"]):t.main(["dates/calendars/gregorian/days",[n==="c"?"stand-alone":"format"],r[i<3?0:i-3]]);break;case"a":t.main(["dates/calendars/gregorian/dayPeriods/format/wide"]);break;case"z":case"O":t.main("dates/timeZoneNames/gmtFormat"),t.main("dates/timeZoneNames/gmtZeroFormat"),t.main("dates/timeZoneNames/hourFormat");break;case"v":case"V":throw N({feature:"timezone pattern `"+n+"`"})}}),t.off("get",i),n};return t.dateFormatter=t.prototype.dateFormatter=function(e){var t,n;return u(e,"pattern"),l(e,"pattern"),t=this.cldr,o(t),t.on("get",D),e=p(e,t),n=C(e,t),t.off("get",D),function(e){return u(e,"value"),f(e,"value"),T(e,n)}},t.dateParser=t.prototype.dateParser=function(e){var t,n,r;return u(e,"pattern"),l(e,"pattern"),t=this.cldr,o(t),t.on("get",D),e=p(e,t),r=_(e,t),n=O(t),t.off("get",D),function(e){var t;return u(e,"value"),c(e,"value"),t=M(e,r),A(e,t,n)||null}},t.formatDate=t.prototype.formatDate=function(e,t){return u(e,"value"),f(e,"value"),this.dateFormatter(t)(e)},t.parseDate=t.prototype.parseDate=function(e,t){return u(e,"value"),c(e,"value"),this.dateParser(t)(e)},t}),define("packages/core/src/dates",["underscore","jquery","./lib/globalize/date"],function(e,t,n){function r(e){e=e||{},this.globalize=e.globalize||n}return r.prototype.format=function(t,n){return n=e.pick(n,"skeleton","date","time","datetime","pattern"),Object.keys(n).length||(n={date:"short"}),this.globalize.formatDate(t,n)},r.prototype.parse=function(e,t){return this.globalize.parseDate(e,t)},r}),define("packages/core/src/api/events",["../lib/backbone","underscore"],function(e,t){var n={"interface":t.pick(e.Events,"on","off","trigger","once","listenTo","listenToOnce","stopListening"),enableFor:function(e){return t.extend(e,n.interface)}};return n}),define("packages/core/src/requestCacheManager",["underscore"],function(e){function t(){this.cache={},this.pendingXHRs={},this.maxMemory=3276800,this.totalMemory=0}return t.prototype.makeKey=function(e,t,n){if(!e)throw"Cache key not supplied to cache entry";if(!t)throw"Item key not supplied to cache entry";return e+":"+t+":"+(n||"__default")},t.prototype.set=function(e,t){this.remove(e),this.cache[e]={accessTime:(new Date).getTime(),value:t},this.totalMemory+=t.length,this.limitMemoryUsage()},t.prototype.retrieve=function(e){var t=this.cache[e];return t&&(t.accessTime=(new Date).getTime()),t&&t.value},t.prototype.remove=function(e){var t=this.cache[e];t&&(this.totalMemory-=t.value.length,delete this.cache[e])},t.prototype.limitMemoryUsage=function(){var t=this;if(t.totalMemory<t.maxMemory)return;var n=t.maxMemory*.75,r=e.map(t.cache,function(e,t){return{key:t,entry:e}});r=e.sortBy(r,function(e){return e.entry.accessTime}),e.some(r,function(e){return t.totalMemory-=e.entry.value.length,delete t.cache[e.key],n>=t.totalMemory})},t.prototype.flushCache=function(t,n,r){var i=this;if(t){e.isArray(t)&&(t="("+t.join("|")+")");var s=new RegExp(t+":"+(n||".*?")+":"+(r||".*"));Object.keys(i.cache).forEach(function(e){s.test(e)&&delete i.cache[e]})}else i.cache={},i.totalMemory=0},t.prototype.applyTo=function(t){var n=this,r=t.prototype.sync;t.prototype.flushCache=function(t){n.flushCache(this.cacheKey,e.result(this,"url"),t)},t.prototype.sync=function(t,i,s){s=s||{};var o=s.beforeSend,u=s.success,a=s.complete;if(i.cacheKey){var f=n.makeKey(i.cacheKey,e.result(i,"url"),s.cacheVariant);s.cacheRefresh&&n.remove(f);var l=n.retrieve(f);if(l){var c=JSON.parse(l);u(c);return}if(n.pendingXHRs[f]){var h=n.pendingXHRs[f];return h.done(function(){var e=JSON.parse(h.responseText);u(e)}),h}e.extend(s,{cache:!1,beforeSend:function(e){if(o&&o(e)===!1)return!1;n.pendingXHRs[f]=e},success:function(e,t,r){n.set(f,r.responseText),u&&u(e,t,r)},complete:function(e,t){delete n.pendingXHRs[f],a&&a(e,t)}})}return r.apply(i,arguments)}},new t}),define("packages/core/src/integrationServerModel",["underscore","jquery","./lib/backbone","./app","./model","./requestCacheManager","logger","./strings"],function(e,t,n,r,i,s,o,u){u=new u;var a=i.extend({constructor:function(e){e=e||{},this.connection=e.connection||require("core").IntegrationServerConnection,i.apply(this,arguments)},getResponseError:function(e){var t=i.prototype.getResponseError.call(this,e);return t.serverMessage=e.getResponseHeader&&e.getResponseHeader("X-IntegrationServer-Error-Message")||t.message,t}});return a.prototype.retrySsoLogin=function(){e.throttle(function(){this.connection.logIn("","")}.bind(this),5e3).call()},a.prototype.sync=function(t,n,s){this.logger=this.logger||o,s=s||{},e.defaults(s,{contentType:"application/json",dataType:"json",async:!0});var f=e.any(s.headers,function(e,t){return t.indexOf("X-IntegrationServer-")===0&&a.containsUnicode(e)},this);f&&(e.each(s.headers,function(e,t){t.indexOf("X-IntegrationServer-")===0&&(s.headers[t]=a.utf8encode(e))},this),s.headers=s.headers||{},s.headers["X-IntegrationServer-Encode-Headers"]="utf-8",s.success=[a.interceptHeadersForDecoding].concat(s.success),s.error=[a.interceptHeadersForDecoding].concat(s.error)),s.url=r.instance.config.serverUrl+(e.result(s,"url")||e.result(n,"url")),s.ignore401||(s.error=e.wrap(s.error,function(e,t){t.status===401?r.instance.config.connection==="core:SsoConnection"?(this.retrySsoLogin(),e.call(this,t)):this.connection.logOut({reason:u.translate("core.session.invalidSession")}):e.call(this,t)}.bind(this)));var l=this.syncMethod||i.prototype.sync;return l(t,n,s)},a.interceptHeadersForDecoding=function(){var t=null;if(arguments[0]&&arguments[0].getResponseHeader)t=arguments[0];else{if(!arguments[2]||!arguments[2].getResponseHeader)return;t=arguments[2]}t.getResponseHeader=e.wrap(t.getResponseHeader,function(e,t){return t.indexOf("X-IntegrationServer-")===0?a.utf8decode(e(t)):e(t)})},a.containsUnicode=function(e){return/[^\u0000-\u00ff]/.test(e)},a.utf8encode=function(e){return"=?utf-8?B?"+btoa(unescape(encodeURIComponent(e)))+"?="},a.utf8decode=function(e){return e&&e.indexOf("=?utf-8?B?")===0?decodeURIComponent(escape(atob(e.slice(10,-2)))):e},s.applyTo(a),a}),define("packages/core/src/integrationServerCollection",["./collection","./integrationServerModel"],function(e,t){return e.extend({constructor:function(t){t=t||{},this.connection=t.connection||require("core").IntegrationServerConnection,e.apply(this,arguments)},sync:t.prototype.sync,getResponseError:t.prototype.getResponseError,retrySsoLogin:t.prototype.retrySsoLogin,parse:function(t){if(typeof t=="object"){var n=Object.keys(t);n.length===1&&Array.isArray(t[n[0]])&&(t=t[n[0]])}return e.prototype.parse.call(this,t)}})}),define("packages/core/src/location",["underscore","logger","./errorHandler","./strings","./lib/backbone"],function(e,t,n,r,i){function s(e){e=e||{},this.location=e.location||i.history.location}return r=new r,s.prototype={navigate:function(e,t){return i.history.navigate(e,t)},reload:function(){this.location.reload&&this.location.reload()},getFragment:function(){var e=i.history.root?undefined:window.location.href;return i.history.getFragment(e)},getRouteQueryParams:function(e){e=e||this.location.href;var t={},n=e.split("#");if(!n[1])return t;n=n[1].split("?");if(!n[1])return t;var r=n[1].split("&");return r.forEach(function(e){var n=e.split("=");t[decodeURIComponent(n[0])]=n.length===2?decodeURIComponent(n[1]):null}),t},tempNormalizeUrl:function(){return function(t){var n=this.location.href,r=this.getRouteQueryParams(),i=this.location.href.indexOf("?"),s=this.location.href.indexOf("#");if(i>-1&&(s===-1||i<s)){var o=this.location.protocol+"//"+this.location.host+this.location.pathname;o+="#";var u=!0;e.each(r,function(n,r){var i=!1;t&&(e.isArray(t)?e.each(i,function(e){i=e.toUpperCase()===r.toUpperCase();if(i)return!1}):i=t.toUpperCase()===r.toUpperCase()),i||(u?(o+="?",u=!1):o+="&",o=o+r+"="+n)}),n!==o&&this.location.assign(o)}}}()},s}),define("packages/core/src/integrationServerConnection",["underscore","./requestCacheManager","./cookies","./location","./api/events","./app"],function(e,t,n,r,i,s){function o(e){e=e||{},this.location=e.location||new r,this.document=document,this.config=e.config||s.instance.config,this.session=e.session||s.instance.session,this.cookies=e.cookies||n,this.cookies.get("lastUsername")==="anonymous"&&this.cookies.remove("lastUsername")}return i.enableFor(o.prototype),o.prototype.setBehavior=function(e){this.behavior=e;if(!this.config.serverUrl)return;this.config.connection==="core:SsoConnection"&&this.logIn("","",{async:!1,preserveSession:!0,retryWithoutSession:!0}),this.config.connection&&this.config.connection!=="core:IntegrationServerConnection"&&this.session.once("end",function(){this.logOut({silent:!0})}.bind(this))},o.prototype.handlesLoginPrompt=function(){return this.behavior&&this.behavior.handlesLoginPrompt&&this.behavior.handlesLoginPrompt()},o.prototype.logIn=function(t,n,r){r=r||{},e.extend(r,{success:e.bind(function(){r.silent||this.trigger("login")},this),error:e.bind(function(e){r.silent||this.trigger("loginFailure",e)},this)}),this.behavior&&this.behavior.logIn&&(r.ignore401=!0,this.behavior.logIn(t,n,r))},o.prototype.logOut=function(n){n=n||{},e.extend(n,{ignore401:!0,success:e.bind(function(){n.silent||this.trigger("logout",{reason:n.reason})},this)}),t.flushCache(),this.behavior&&this.behavior.logOut&&this.behavior.logOut(n)},o.prototype.isLoggedIn=function(){if(this.behavior&&this.behavior.isLoggedIn)return this.behavior.isLoggedIn()},o.prototype.getUsername=function(){if(this.behavior&&this.behavior.getUsername)return this.behavior.getUsername()},o.prototype.filterRoute=function(t,n){n.pop();var r=this.location.getRouteQueryParams();if(r.anonymous!==undefined){delete r.anonymous;var i;this.isLoggedIn()&&this.getUsername()!=="anonymous"&&(this.logOut({silent:!0,async:!1}),i=!0);var s=this.location.location.hash.match(/#(.*?)\?/)[1],o=e.map(r,function(e,t){return t+(e?"="+e:"")}).join("&");this.isLoggedIn()||this.logIn("anonymous","1",{allowAnonymous:!0,async:!1}),this.location.navigate(s+"?"+o,{trigger:!i,replace:!0}),i&&(this.location.location.reload.force=!0,this.location.location.reload())}else this.behavior&&this.behavior.filterRoute?this.behavior.filterRoute(t,n).then(function(e){t&&e!==!1&&(Object.keys(r).length>0&&n.push(r),t.apply(this,n))}.bind(this)):t&&(Object.keys(r).length>0&&n.push(r),t.apply(this,n))},o}),define("packages/core/src/module",["underscore","jquery","./lib/backbone","./app","./location","./host"],function(e,t,n,r,i,s){function o(e){return e.offlineCompatible||!e.session.getConnections().offline.isLoggedIn()||e.isSystemModule}function u(t){if(f.areRoutesAdded[t.path]||!t.routes)return;f.areRoutesAdded[t.path]=!0;var n=new f.Router;e.each(Object.keys(t.routes).reverse(),function(r){var i=t.routes[r],s=f.Router.normalize(t.path,r),o=typeof i=="string"?t[i]:i;n.route(s,r,e.bind(o,t))})}function a(e){u(e);if(e.connectedHandled||!o(e))return;e.connected&&e.connected(),e.connectedHandled=!0}function f(n){n=n||{},this.session=n.session||r.instance.session,this.host=n.host||s,this._location=n.location||new i,this.element=document.createElement("div"),this.element.className="module",this.$element=t(this.element);var o=this.initialize;this.initialize=function(t){var r=e.extend({},n,t);o&&o.call(this,r),l.call(this)}}function l(){var t=this;if(t.path==null&&t.routes)throw'Path not set on module "'+t.constructor.name+'"';if(t.path){var n=t.path.replace(/[\W\s]+/g,"");t.element.classList.add("module-"+n)}t.on("activated",function(e,n){if(!o(t))return;a(t),t._location.navigate(e,{trigger:n})}),t.session.isActive()||t.isSystemModule?a(t):t.session.on("begin",function(){if(!o(t))return;a(t)}),t.icon&&(t.icon=e.clone(t.icon),t.updateIcon())}return f.Router=n.Router,f.areRoutesAdded={},e.extend(f.prototype,n.Events,{setWindowTitle:function(e){this.windowTitle=e,this.trigger("change:title",e)},updateIcon:function(){this.icon&&!this.icon.path&&(this.icon.path="#"+this.path.replace(/^\s*#/,"")),this.host.isPresent()&&this.host.OnIconUpdated(this.icon),this.trigger("onIconUpdated",this),this.trigger("change:icon",this)},helpPage:undefined}),Object.defineProperty(f.prototype,"upButtonAction",{get:function(){return this._upButtonAction},set:function(e){this._upButtonAction=e,this.trigger("change:upButtonAction")},enumerable:!0}),f.extend=n.View.extend,f}),function(e,t){typeof define=="function"&&define.amd?define("packages/core/src/lib/globalize/number",["../cldr","../globalize","../cldr/event"],t):typeof exports=="object"?module.exports=t(require("cldrjs"),require("globalize")):t(e.Cldr,e.Globalize)}(this,function(e,t){var n=t._createError,r=t._validateCldr,i=t._validateDefaultLocale,s=t._validateParameterPresence,o=t._validateParameterRange,u=t._validateParameterType,a=t._validateParameterTypePlainObject,f=function(e,t){u(e,t,e===undefined||typeof e=="number","Number")},l=function(e,t){u(e,t,e===undefined||typeof e=="string","a string")},c=function(e,t,n){var r,i=t,s="",o=",",u=n?!0:!1;e=String(e).split("."),r=e[0].length;while(r>i)s=e[0].slice(r-i,r)+(s.length?o:"")+s,r-=i,u&&(i=n,u=!1);return e[0]=e[0].slice(0,r)+(s.length?o:"")+s,e.join(".")},h=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},p=function(e,t,n){var r;typeof e!="string"&&(e=String(e));for(r=e.length;r<t;r+=1)e=n?e+"0":"0"+e;return e},d=function(e,t,n,r,i,s){return r?(s?e=i(e,s):e=i(e,Math.pow(10,-r)),e=+e.toFixed(r),n&&(e=String(e).split("."),e[1]=p(e[1]||"",n,!0),e=e.join("."))):e=h(e),e=String(e),t&&(e=e.split("."),e[0]=p(e[0],t),e=e.join(".")),e},v=function(e){return n("E_UNSUPPORTED","Unsupported {feature}.",{feature:e})},m=function(e,t,n){var r,i;return e=e.toPrecision(t+2),r=Math.ceil(Math.log(Math.abs(e))/Math.log(10)),r-=t,i=Math.pow(10,r),e=n(e,i),r<0&&(e=+e.toFixed(-r)),e},g=function(e,t,n,r){var i,s;t>n&&(n=t),i=m(e,t,r),s=m(e,n,r),e=+i===+s?i:s,e=(+e).toString(10);if(/e/.test(e))throw v({feature:"integers out of (1e21, 1e-7)"});return t-e.replace(/^0+|\./g,"").length>0&&(e=e.split("."),e[1]=p(e[1]||"",t-e[0].replace(/^0+/,"").length,!0),e=e.join(".")),e},y=function(e,t){var n,r,i,s,o,u,a,f,l,h,p,v,m,y,b,w,E;return f=t[1],o=t[2],s=t[3],r=t[4],u=t[5],i=t[6],y=t[7],h=t[8],b=t[9],m=t[15],n=t[16],a=t[17],E=t[18],isNaN(e)?a:(e<0?(p=t[12],l=t[13],w=t[14]):(p=t[11],l=t[0],w=t[10]),isFinite(e)?(v=l,p.indexOf("%")!==-1?e*=100:p.indexOf("‰")!==-1&&(e*=1e3),isNaN(u*i)?e=d(e,o,s,r,m,y):e=g(e,u,i,m),e=e.replace(/^-/,""),h&&(e=c(e,h,b)),v+=e,v+=w,v.replace(/'[^']+'|[.,\-+E%\u2030]/g,function(e){return e.charAt(0)==="'"?e:E[e]})):l+n+w)},b=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,w=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,m,g,y,w;e=e.match(b);if(!e)throw new Error("Invalid pattern: "+e);h=e[1],c=e[3],i=e[4],y=e[8],m=e[9],w=e[10],y?y.replace(/(@+)(#*)/,function(e,t,n){l=t.length,u=l+n.length}):(r=e[7],s=e[6],r&&(r.replace(/[0-9]+/,function(e){a=e}),a?(d=+("0."+a),a=a.length):a=0,o=r.length-1),s.replace(/0+$/,function(e){f=e.length}));if(m)throw v({feature:"scientific notation (not implemented)"});if(c)throw v({feature:"padding (not implemented)"});return(t=i.lastIndexOf(","))!==-1&&(n=i.split(".")[0],p=n.length-t-1,(n=i.lastIndexOf(",",t-1))!==-1&&(g=t-1-n)),[h,c,f,a,o,l,u,d,p,g,w]},E=function(e){return e.main("numbers/defaultNumberingSystem")},S=function(e,t){return t.main(["numbers/symbols-numberSystem-"+E(t),e])},x={".":"decimal",",":"group","%":"percentSign","+":"plusSign","-":"minusSign",E:"exponential","‰":"perMille"},T=function(e){var t,n={};for(t in x)n[t]=S(x[t],e);return n},N=function(e){return e=e||"round",e=e==="truncate"?h:Math[e],function(t,n){return n=n||1,e(t/n)*n}},C=function(e,t,n){function f(e,t){e in n&&(a[t]=n[e])}var r,i,s,o,u,a;return n=n||{},e=e.split(";"),u=e[0],r=e[1]||"-"+u,s=w(r),i=s[0],o=s[10],a=w(u).concat([u,i+u+o,i,o,N(n.round),S("infinity",t),S("nan",t),T(t)]),f("minimumIntegerDigits",2),f("minimumFractionDigits",3),f("maximumFractionDigits",4),f("minimumSignificantDigits",5),f("maximumSignificantDigits",6),n.useGrouping===!1&&(a[8]=null),"minimumFractionDigits"in n&&!("maximumFractionDigits"in n)?a[4]=Math.max(a[3],a[4]):!("minimumFractionDigits"in n)&&"maximumFractionDigits"in n&&(a[3]=Math.min(a[3],a[4])),a},k=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)(E[+-]?[0-9]+)?([^0-9]*)$/,L=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},A=function(e,t){var n,r,i,s,o,u,a,f,l;r=t[0],i=t[1],o=t[2],u=t[3];if(n=e.match(r))a=Infinity,f=e.slice(0,n.length),l=e.slice(n.length+1);else{s=new RegExp(Object.keys(i).map(function(e){return L(e)}).join("|"),"g"),e=e.replace(s,function(e){return i[e]}),e=e.match(k);if(!e)return NaN;f=e[1],l=e[6],a=e[2].replace(/,/g,""),e[5]&&(a+=e[5]),a=+a;if(isNaN(a))return NaN;e[0].indexOf("%")!==-1?(a/=100,l=l.replace("%","")):e[0].indexOf("‰")!==-1&&(a/=1e3,l=l.replace("‰",""))}return f===o&&l===u&&(a*=-1),a},O=function(e){var t,n={};for(t in x)n[S(x[t],e)]=t;return n},M=function(){var e=arguments[0],t=[].slice.call(arguments,1);return t.forEach(function(t){var n;for(n in t)e[n]=t[n]}),e},_=function(e,t){var n,r;return e=e.split(";"),n=e[1]||"-"+e[0],r=w(n),[S("infinity",t),M({},x,O(t)),r[0],r[10].replace("%","").replace("‰","")]},D=function(e,t){if(e!=="decimal"&&e!=="percent")throw new Error("Invalid style");return t.main(["numbers",e+"Formats-numberSystem-"+E(t),"standard"])};return t.numberFormatter=t.prototype.numberFormatter=function(e){var t,n,u,l,c,h,p,d;a(e,"options"),e=e||{},t=this.cldr,i(t),t.on("get",r),e.pattern||(p=D(e.style||"decimal",t)),d=C(p,t,e),t.off("get",r),c=d[2],l=d[3],n=d[4],h=d[5],u=d[6];if(!isNaN(h*u))o(h,"minimumSignificantDigits",1,21),o(u,"maximumSignificantDigits",h,21);else{if(!isNaN(h)||!isNaN(u))throw new Error("Neither or both the minimum and maximum significant digits must be present");o(c,"minimumIntegerDigits",1,21),o(l,"minimumFractionDigits",0,20),o(n,"maximumFractionDigits",l,20)}return function(e){return s(e,"value"),f(e,"value"),y(e,d)}},t.numberParser=t.prototype.numberParser=function(e){var t,n,o;return a(e,"options"),e=e||{},t=this.cldr,i(t),t.on("get",r),e.pattern||(n=D(e.style||"decimal",t)),o=_(n,t),t.off("get",r),function(e){return s(e,"value"),l(e,"value"),A(e,o)}},t.formatNumber=t.prototype.formatNumber=function(e,t){return s(e,"value"),f(e,"value"),this.numberFormatter(t)(e)},t.parseNumber=t.prototype.parseNumber=function(e,t){return s(e,"value"),l(e,"value"),this.numberParser(t)(e)},t}),define("packages/core/src/numbers",["jquery","./lib/globalize/number"],function(e,t){function n(e){e=e||{},this.globalize=e.globalize||t}return n.prototype.format=function(e,t){return this.globalize.formatNumber(e,t)},n.prototype.parse=function(e,t){return this.globalize.parseNumber(e,t)},n}),define("packages/core/src/nativeBridge",["underscore"],function(e){function t(t){return t==null||!e.isObject(t)?!1:t.service==null?!1:t.command==null?!1:(t.data=t.data||{},t.success=e.isFunction(t.success)?t.success:null,t.error=e.isFunction(t.error)?t.error:null,!0)}function n(t,n,r){var i=this.popCommand(t);if(!i)throw"Invalid command id: "+t;r?e.isFunction(i.error)&&i.error.call(null,r):e.isFunction(i.success)&&i.success.apply(null,n)}function r(){throw"NativeBridge should not be instantiated"}return r.count=-1,r.commandQueue={},r.behavior=null,r.addCommand=function(e){return t(e)?(this.count=this.count>=2e9?0:this.count+1,this.commandQueue[this.count]=e,e.id=this.count,this.count):-1},r.popCommand=function(e){var t=this.commandQueue[e];return delete this.commandQueue[e],t||null},r.setBehavior=function(t){if(!e.isFunction(t.setCompleteCallback))throw"Behavior must implement setCompleteCallback";this.behavior=t;var r=e.bind(n,this);t.setCompleteCallback(r)},r.execute=function(e){if(!this.behavior)throw"NativeBridge behavior not initialized";var t=this.addCommand(e);if(t===-1)throw"Invalid command object";this.behavior.execute(e)},r}),define("packages/core/src/offlineModel",["./lib/backbone","underscore","./api/events","./nativeBridge"],function(e,t,n,r){var i=e.Model.extend({initialize:function(e,t){t=t||{},this.nativeBridge=t.nativeBridge||r},sync:function(e,t,n){n=n||{};if(!t.urlRoot)throw"Offline Model must specify urlRoot";this.nativeBridge.execute({service:t.urlRoot,command:t.url,data:t.attributes,success:n.success,error:function(e){t.onError(e,n)}})},onError:function(e,t){if(e==="InvalidSession"){i.trigger("session:invalid");return}t.error(e)}});return n.enableFor(i),i}),define("packages/core/src/package",["jquery","./app"],function(e,t){function n(e){e=e||{},this.require=e.require||require,this.packageCatalog=e.packageCatalog||t.instance.packageCatalog}return n.prototype.load=function(t){var n=this,r=new e.Deferred,i=t,s;if(t.indexOf(":")>-1){var o=t.split(":");i=o[0],s=o[1]}var u={};return u[i]={path:"packages/"+i+"/"},this.packageCatalog.load({packages:u}).then(function(){n.require([i],function(e){r.resolve(e,e[s])})}).fail(function(){r.reject.apply(r,arguments)}),r},n}),define("packages/core/src/printer",[],function(){function t(t){t=t||{},this.serviceList=t.serviceList||e}var e=[];return t.prototype.print=function(e){this.serviceList[0].print(e)},t.prototype.registerService=function(e){this.serviceList.length=0,this.serviceList.push(e)},t}),define("packages/core/src/ssoConnection",["underscore","jquery","./app","./api/events","./strings","./cookies"],function(e,t,n,r,i,s){var o="sso/sso.json",u="sso/sso-login-redirect.html",a=function(r){r=r||{},this.window=r.window||window,this.document=r.document||document,this.config=r.config||n.instance.config,this.cookies=r.cookies||s,this.$=r.$||t,this.loggedIn=!1,this.routerActive=!0,this.config.connection==="core:SsoConnection"&&(this.$(this.document).ajaxError(e.throttle(function(e,t){t.status===0&&t.statusText==="error"&&this.testSso()}.bind(this),5e3)),this.testSso())};return a.prototype.testSso=function(){var e=this.window,t=function(){this.cookies.remove("sessionHash"),this.cookies.remove("connectionHash");var n=e.location.hash;n&&n[0]==="#"&&(n=n.substr(1));var r=(new i).format("{path}?_={timestamp}&redirect={redirect}",{path:u,timestamp:(new Date).getTime(),redirect:n});e.location.href=r}.bind(this);this.$.ajax({url:o,cache:!1,dataType:"json",global:!1,success:function(e){if(!e||e.status!=="ok"){t();return}this.loggedIn||(this.loggedIn=!0,this.trigger("login"))}.bind(this),error:function(e,n){(e.status===0||n==="parsererror")&&t()}})},a.prototype.isLoggedIn=function(){return this.loggedIn},a.prototype.handlesLoginPrompt=function(){return!0},a.prototype.logIn=function(){},a.prototype.logOut=function(t){this.loggedIn=!1;var n=new i,r=t&&t.reason===n.translate("core.session.invalidSession")?"logout/error":"logout/message";this.trigger("logout",{url:r,reload:!1}),e.defer(function(){this.routerActive=!1,this.trigger("logout")}.bind(this))},a.prototype.getUsername=function(){return""},a.prototype.filterRoute=function(e,t){this.routerActive&&e.apply(this,t)},r.enableFor(a.prototype),a}),define("packages/core/src/pinAuthenticationModel",["underscore","./offlineModel"],function(e,t){var n=t.extend({urlRoot:"authentication",url:"pinLogin"});return n}),define("packages/core/src/offlineConnection",["./api/events","./cookies","./offlineModel","./pinAuthenticationModel"],function(e,t,n,r){function i(e){e=e||{};var i=e.cookies||t,s=e.offlineModel||n;this.isLoggedIn=function(){return i.get("pinAuthenticated")==="true"},this.logIn=function(e,t,n){n=n||{};var s=n.ModelType||r,o=new s({username:e,pin:t});return i.remove("pinAuthenticated"),o.fetch({success:function(){i.add("username",e),i.add("pinAuthenticated","true"),this.trigger("login"),n.success&&n.success()}.bind(this),error:n.error})},this.onInvalidSession=function(){this.logOut()},this.logOut=function(){if(!this.isLoggedIn())return;i.remove("pinAuthenticated"),this.trigger("logout")},this.getUsername=function(){return i.get("username")},this.listenTo(s,"session:invalid",this.onInvalidSession)}return e.enableFor(i.prototype),i}),define("packages/core/src/sessionIdleListener",["jquery","./app","./api/events"],function(e,t,n){function i(e){e._timeoutId=setTimeout(function(){e.trigger("timeout")},e.timeoutSeconds*1e3)}function s(e){e._timeoutId&&clearTimeout(e._timeoutId),e._timeoutId=null}function o(t){t=t||{},this.timeoutSeconds=t.timeoutSeconds||-1,this.$=t.$||e,this.reset=this.reset.bind(this)}var r="mousemove mousedown keydown mousewheel load resize DOMMouseScroll";return o.prototype.start=function(){if(this.timeoutSeconds<=0)return;this.$(window).on(r,this.reset),i(this)},o.prototype.stop=function(){s(this),this.$(window).off(r,this.reset)},o.prototype.reset=function(){s(this),i(this)},n.enableFor(o.prototype),o}),define("packages/core/src/session",["underscore","./api/events","./offlineConnection","./sessionIdleListener","logger","./cookies","./strings","require"],function(e,t,n,r,i,s,o,u){function a(e){e=e||{},this.cookies=e.cookies||s,this.active=!1,this.require=e.require||u,this.connections={},this.addConnection("offline",e.offlineConnection||new n),this.logger=e.logger||i,this.setIdleListener(e.idleListener||new r({timeoutSeconds:e.timeoutSeconds}))}return a.prototype.setIdleListener=function(e){e.timeoutSeconds&&(typeof e.timeoutSeconds!="number"&&this.logger.log("Invalid sessionTimeoutSeconds value in config.json"),e.timeoutSeconds>0&&(this.sessionIdleListener=e,this.sessionIdleListener.on("timeout",this.end.bind(this,{reason:(new o).translate("core.session.sessionExpired")}))))},a.prototype.load=function(t){if(t){var n=t.split(":")[0],r=t.split(":")[1],i=this.require(n),s=e.reduce(r.split("."),function(e,t){return e[t]},i);this.addConnection("online",s)}else this.addConnection("online",require("core").IntegrationServerConnection)},a.prototype.addConnection=function(t,n){var r=["isLoggedIn","logIn","logOut","getUsername","on"],s=e.difference(r,e.functions(n));if(s.length>0){var o="Connection is missing the following required function(s): "+s.join(", ");throw this.logger.log(o,i.CRITICAL),o}this.connections[t]=n;var u=this;n.on("login",function(){u.active=u.active||!0,u.username=n.getUsername(),u.trigger("begin"),u.sessionIdleListener&&u.sessionIdleListener.start()}),n.once("logout",function(e){u.active=!1,u.trigger("end",e),delete u.username})},a.prototype.getConnections=function(){return this.connections},a.prototype.isActive=function(){return this.active?this.active:(e.some(this.connections,function(e){var t=e.isLoggedIn();return t?(this.active=t,e.trigger("login"),t):!1},this),this.active)},a.prototype.getUsername=function(){if(this.username)return this.username;var t=e.find(this.connections,function(e){return e.isLoggedIn()});return t&&t.getUsername()},a.prototype.handlesLoginPrompt=function(){return e.any(this.connections,function(e){return e.handlesLoginPrompt&&e.handlesLoginPrompt()})},a.prototype.end=function(t){function a(n){if(n||s.length===0)s.length>0&&o.logger.log("Following modules failed to complete before disconnect timeout: "+s.map(function(e){return e.str}).join()),e.each(o.connections,function(e){e.logOut(t)})}t=t||{};var n=t.setTO||setTimeout,r=!1,i=5e3,s=[],o=this,u={waitFor:function(e){var t={};return s.push({str:e,token:t}),r||(n(a.bind(null,!0),i),r=!0),t},complete:function(e){s=s.filter(function(t){if(t.token!==e)return t},o),a()}};this.trigger("before:end",u),a()},t.enableFor(a.prototype),a}),define("packages/core/src/api/typeWrapper",["underscore","./events","logger"],function(e,t,n){function r(t,n,r){e.isFunction(t[r])?n[r]=function(){if(this instanceof n[r]){var e=t[r],i=Object.create(e.prototype);return e.apply(i,arguments)||i}return t[r].apply(t,arguments)}:Object.defineProperty(n,r,{get:function(){return t[r]},set:function(e){t[r]=e},enumerable:!0})}function i(r,i,s,o){if(!s||!s.length)return;o=o||{},o.logger=o.logger||n,e.each(e.functions(t.interface),function(t){i[t]=function(){var u=e.find(arguments,function(e){return typeof e=="string"});if(u&&!e.contains(s,u)){var a='Attempted to use unsupported event "'+u+'"';throw o.logger.log(a,n.CRITICAL),a}var f=e.toArray(arguments);if(t==="on"||t==="once")f[2]=f[2]||i;r[t].apply(r,f)}}),t.enableFor(r)}function s(t,n,s){n=n||{},n.members=n.members||n.methods,n.typeMembers=n.typeMembers||n.typeMethods;var u=t.prototype?function(){var u=Object.create(t.prototype);u=t.apply(u,arguments)||u,o(u,this),e.each(n.members,function(e){r(u,this,e)},this),i(u,this,n.events,s)}:{};return o(t,u),e.each(n.typeMembers,function(e){r(t,u,e)}),i(t,u,n.typeEvents,s),u}function o(e,t){typeof window!="undefined"&&(window.isTestRun||window.jasmine)&&Object.defineProperty(t,"_wrapped",{enumerable:!1,get:function(){return e}})}return{wrap:s}}),define("packages/core/src/api/view",["underscore","../lib/backbone","./events","../eventAggregator","logger"],function(e,t,n,r,i){var s=function(n){var s=this;this.options=n;var o=n&&n.logger||i;s.domEvents=e.clone(s.domEvents),e.each(s.domEvents,function(t,n){if(e.isFunction(t))s.domEvents[n]=e.bind(t,s);else{if(!s[t]){var r="Function "+t+" referenced by a domEvent does not exist.";throw o.log(r,i.CRITICAL),r}s[t]=e.bind(s[t],s)}}),this.render=this.render||function(){return this};var u=e.extend({},this,{initialize:function(){s.initialize&&s.initialize.apply(s,arguments)},render:this.render,events:this.domEvents,el:this.element,id:this.id,className:this.className,tagName:this.tagName||"div"}),a=t.View.extend(u);if(n&&typeof n!="object"||arguments&&arguments.length>1)throw"api/view constructor can only accept a single argument of type 'object'.  Passing the argument is optional.";var f=new a(n);this.$element&&f.setElement(this.$element),e.extend(this,{cid:f.cid,$:e.bind(f.$,f),remove:function(){r.off(this),this.onBeforeRemove&&this.onBeforeRemove(),f.remove(),this.stopListening()},element:f.el,$element:f.$el,setElement:function(e){f.setElement(e),this.element=f.el,this.$element=f.$el},delegateEvents:function(e){e=e||this.domEvents,this.$el=this.$element,f.delegateEvents.call(this,e),delete this.$el},undelegateEvents:function(){this.$element.off(".delegateEvents"+this.cid)}})};return s.extend=function(t,r){var i=this,s=function(){return i.apply(this,arguments)};e.extend(s,i,r);var o=function(){};return o.prototype=i.prototype,s.prototype=new o,e.extend(s.prototype,n.interface,t),s},s.prototype.close=function(){this.remove(),this.unbind()},s}),define("packages/core/src/exports",["./lib/backbone","./app","./collection","./config","./cookies","./dates","./eventAggregator","./api/events","./host","./integrationServerCollection","./integrationServerConnection","./integrationServerModel","./location","./model","./module","./numbers","./nativeBridge","./offlineModel","./package","./printer","./ssoConnection","./session","./strings","./api/typeWrapper","./api/view"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){function C(){return C}var N=x.wrap;t.instance&&(C.session=N(t.instance.session,{typeMethods:["isActive","getUsername","end","getConnections","handlesLoginPrompt"],typeEvents:["begin","end","before:end"]}),C.moduleCatalog=N(t.instance.moduleCatalog,{typeMethods:["getModule","getModules"],typeEvents:["loaded"]}),C.packageCatalog=N(t.instance.packageCatalog,{typeMethods:["getPackages"]}),C.config=t.instance.config);var k={App:C,Collection:n,Dates:N(new s,{typeMethods:["format","parse"]}),EventAggregator:N(o,{typeMethods:["on","off","trigger"]}),Events:N(u,{typeMethods:["enableFor"]}),Host:a,IntegrationServerCollection:f,IntegrationServerConnection:N(new l,{typeMethods:["isLoggedIn","setBehavior","getUsername","logIn","logOut","filterRoute","handlesLoginPrompt"],typeEvents:["login","logout","loginFailure"]}),IntegrationServerModel:c,Locale:N(t.instance.locale,{typeMethods:["get","set","getAvailableLocales","isDeterminedByBrowser"]}),Location:N(new h,{typeMethods:["navigate","getRouteQueryParams","getFragment","tempNormalizeUrl"]}),TempCoreHistory:{on:function(){}},Model:p,Module:d,Numbers:N(new v,{typeMethods:["format","parse"]}),OfflineModel:g,Package:N(new y,{typeMethods:["load"]}),Printer:N(b,{members:["registerService","print"]}),NativeBridge:N(m,{typeMethods:["setBehavior","execute"]}),SsoConnection:N(new w,{typeMethods:["isLoggedIn","getUsername","logIn","logOut","filterRoute","handlesLoginPrompt"],typeEvents:["login","logout","loginFailure"]}),Strings:N(new S,{typeMethods:["translate","format"]}),TypeWrapper:x,View:T,PlatformDetector:N(t.instance.detector,{typeMethods:["type","device"]}),LogSystem:N(t.instance.logSystem,{typeMethods:["getLoggingLevel","setLoggingLevel","launchViewer","canLaunchViewer"]}),Cookies:N(i,{typeMethods:["isEnabled","add","remove","removeStartsWith","get","getKeyStartsWith"]})};return k}),define("packages/core/src/handlebarsHelpers",["underscore","./lib/handlebars","./dates","./strings","./numbers","template"],function(e,t,n,r,i,s){n=new n,r=new r,i=new i,t.registerHelper("i18n",function(e,t){var n=Object.keys(t.hash).length?t.hash:undefined;return r.translate(e,n)}),t.registerHelper("call",function(e){return e.apply(null,Array.prototype.slice.call(arguments,1))}),t.registerHelper("rel",function(){return s.getRunningTemplateRelativePath.apply(this,arguments)}),t.registerHelper("date",function(e,t){return!e&&t.hash.default?t.hash.default:n.format(e,t.hash)}),t.registerHelper("number",function(e,t){return e instanceof Number&&(e=Number(e)),i.format(e,t.hash)})}),define("packages/core/src/localPrintService",["underscore","logger"],function(e,t){function n(e){e=e||{},this.logger=e.logger||t,this.wnd=e.wnd||window,this.body=e.body||document.body}return n.prototype.print=function(n){function i(e){throw r.logger.log(e,t.CRITICAL),e}var r=this;(!n||!n.jquery&&!e.isElement(n))&&i("LocalPrintService.print requires a jQuery or DOM object as a parameter"),n.jquery&&(n.length!==1&&i("LocalPrintService.print expects a single source.  Consider wrapping it in a parent source and passing that instead."),n=n[0]),r.body.contains(n)?n=n.cloneNode(!0):n.parentElement&&i("LocalPrintService.print source parameter may not have a parent if the source does not exist in the DOM"),r.body.classList.add("print-auto-height"),r.body.classList.add("printing-element"),n.classList.add("print-visible"),r.body.appendChild(n),r.wnd.print(),r.body.removeChild(n),r.body.classList.remove("print-auto-height"),r.body.classList.remove("printing-element")},n}),function(e){typeof define=="function"&&define.amd?define("packages/core/src/lib/cldr/unresolved",["../cldr"],e):typeof module=="object"&&typeof module.exports=="object"?module.exports=e(require("cldrjs")):e(Cldr)}(function(e){var t=e._alwaysArray,n=e._jsonMerge,r=e._pathNormalize,i=e._resourceGet,s=e._validatePresence,o=e._validateTypePath,u=e._validateTypePlainObject,a=function(e,t){var n,s;if(t==="root")return;return n=r(["supplemental/parentLocales/parentLocale",t]),s=i(e._resolved,n)||i(e._raw,n),s?s:(s=t.substr(0,t.lastIndexOf(e.localeSep)),s?s:"root")},f=function(e,t,n){var r,i=e,s=t.length;for(r=0;r<s-1;r++)i[t[r]]||(i[t[r]]={}),i=i[t[r]];i[t[r]]=n},l=function(){var e;return e=function(t,s,o,u,l){var c,h,p;if(typeof s=="undefined"||s===l)return;return c=r(o,u),p=i(t._resolved,c),p&&typeof p!="object"?p:(p=i(t._raw,c),p||(h=a(t,s),p=e(t,h,o,n(u,{languageId:h}),s)),p&&f(t._resolved,c,p),p)},e}();return e._raw={},e.load=function(r){var i,o;s(r,"json");for(i=0;i<arguments.length;i++){r=t(arguments[i]);for(o=0;o<r.length;o++)u(r[o],"json"),e._raw=n(e._raw,r[o])}},e.prototype.get=function(t){return s(t,"path"),o(t,"path"),l(e,this.attributes&&this.attributes.languageId||"",t,this.attributes)},e._eventInit&&e._eventInit(),e}),define("packages/core/src/locale",["jquery","require","./lib/globalize","./lib/cldr/unresolved","./cookies","./location"],function(e,t,n,r,i,s){function u(e){var r=this;e=e||{},r.require=e.require||t,r.globalize=e.globalize||n,r.cookies=e.cookies||i,r.location=e.location||new s,r.locales=e.locales||[],r.localeDisplayNames={ar:"العربية",ca:"català",cs:"čeština",da:"dansk",de:"Deutsch",el:"Ελληνικά",en:"English","en-001":"English (World)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-GB":"English (United Kingdom)","en-HK":"English (Hong Kong)","en-IN":"English (India)",es:"español",fi:"suomi",fr:"français",he:"עברית",hi:"हिंदी",hr:"hrvatski",hu:"magyar",it:"italiano",ja:"日本語",ko:"한국어",nb:"norsk bokmål",nl:"Nederlands",pl:"polski",pt:"português","pt-PT":"português (Portugal)",ro:"română",ru:"русский",sk:"slovenčina",sl:"slovenščina",sr:"Српски",sv:"svenska",th:"ไทย",tr:"Türkçe",uk:"українська",vi:"Tiếng Việt",zh:"中文","zh-Hant":"繁體中文"}}var o="core.locale";return u.prototype.loadCldrData=function(){var t=this,n=new e.Deferred;return t.require(["json!./lib/unicode-cldr/supplemental/likelySubtags","json!./lib/unicode-cldr/supplemental/timeData","json!./lib/unicode-cldr/supplemental/weekData"],function(e,r,i){t.globalize.load(e),t.globalize.load(r),t.globalize.load(i),n.resolve()},n.reject),n},u.prototype.addAvailableLocale=function(t){var n=new r(t);t=n.locale,e.inArray(t,this.locales)===-1&&this.locales.push(t)},u.prototype.getAvailableLocales=function(){var e=this,t=[];return e.locales.forEach(function(n){t.push({locale:n,displayName:e.localeDisplayNames[n]||n})}),t.sort(function(t,n){return t.locale!==t.displayName&&n.locale===n.displayName?-1:t.locale===t.displayName&&n.locale!==n.displayName?1:t.displayName<n.displayName?-1:1}),t},u.prototype.loadLocaleData=function(t){var n=this,r=new e.Deferred;return n.require(["json!./lib/unicode-cldr/main/"+t+"/ca-gregorian","json!./lib/unicode-cldr/main/"+t+"/numbers"],function(e,t){n.globalize.load(e),n.globalize.load(t),r.resolve()},r.reject),r},u.prototype.get=function(){var e=this.globalize.locale().locale;return e=e.replace(/_/g,"-"),e},u.prototype.set=function(e){e?this.setLocaleCookie(e):this.cookies.remove(o),this.location.reload()},u.prototype.getLanguage=function(){return this.globalize.locale().attributes.language},u.prototype.isDeterminedByBrowser=function(){return this.cookies.get(o)?!1:!0},u.prototype.setLocaleCookie=function(e){var t=this,n=new r(e);return t.cookies.add(o,n.locale),n.locale},u.prototype.initLocale=function(t){var n=this,r=new e.Deferred,i=n.cookies.get("core.locale");return t=t||i||window.navigator.language||window.navigator.browserLanguage||"en",t=t.replace(/-(.*)/,function(e){return e.toUpperCase()}),t=n.globalize.locale(t).locale,e("html").attr("lang",t),n.loadLocaleData(t).then(r.resolve,function(){n.loadLocaleData(n.getLanguage()).then(r.resolve,function(){n.loadLocaleData("root").then(r.resolve,r.reject)})}),r},u}),define("packages/core/src/moduleCatalog",["underscore","require","logger","./api/events"],function(e,t,n,r){function i(t,n){return n.length===0||!t?t:i(t[n[0]],e.rest(n))}function s(n){n=n||{};var r=n.require||t;this.load=function(t){var s=this;t=t||{};var o=t.error||function(e){throw e},u=n.modules||[];this.modules=[],e.each(e.uniq(u),function(e){var t=e.split(":")[0],n=e.split(":")[1];if(!t||!n){o("Invalid module entry in config.json.  Syntax: <Package path>:<Exported module name>");return}var u=i(r(t),n.split("."));if(!u){e!=="shell:BlankModule"&&o('Failed to find module "'+e+'".');return}var a=new u;a.name=e,s.modules.push(a)}),s.modules.forEach(function(e){e.loadPriority=e.loadPriority||0}),s.modules.filter(function(e){return e.initialize}).sort(function(e,t){return e.loadPriority-t.loadPriority}).forEach(function(e){e.initialize()}),s.trigger("loaded",s.modules)}}return r.enableFor(s.prototype),s.prototype.getModules=function(){return this.modules},s.prototype.getModule=function(n){return e.find(this.modules,function(e){return e.name===n})},s}),define("packages/core/src/resourceLoader",["jquery","require","./lib/globalize/message","./lib/cldr/unresolved","./app"],function(e,t,n,r,i){function s(e){var r=this;e=e||{},r.require=e.require||t,r.globalize=e.globalize||n,r.locale=e.locale||i.instance.locale,r.navigator=e.navigator||window.navigator}return s.prototype.loadTranslations=function(t){var n=this,r=new e.Deferred;return n.require(["json!"+t],function(e){var t={};t[n.locale.get()]=e,n.globalize.loadTranslations(t),r.resolve()},r.reject),r},s.prototype.loadRootTranslations=function(t){var n=this,r=new e.Deferred;return n.require(["json!"+t],function(e){var t={};t.root=e,n.globalize.loadTranslations(t),r.resolve()},r.reject),r},s.prototype.loadResources=function(t,n){var i=this,s=new e.Deferred,o=i.navigator.language||i.navigator.browserLanguage;o=o.replace(/-(.*)/,function(e){return e.toUpperCase()});var u=n[i.locale.get()]||n[i.locale.getLanguage()]||n[(new r(o)).locale]||n[n.root]||n.en;if(typeof u=="string")i.loadTranslations(t+u).then(s.resolve,s.reject);else if(typeof u=="object"){var a=0,f;for(f in u)++a;var l=function(){--a,a===0&&s.resolve()};for(f in u)i.loadTranslations(t+u[f]).then(l,s.reject)}else s.reject();var c;for(c in n)c!=="root"&&i.locale.addAvailableLocale(c);return s},s}),define("packages/core/src/lib/semver",[],function(){function X(e,t){var r=t?n[b]:n[m];return r.test(e)?new J(e,t):null}function V(e,t){var n=X(e,t);return n?n.version:null}function $(e,t){var n=X(e,t);return n?n.version:null}function J(e,r){if(e instanceof J){if(e.loose===r)return e;e=e.version}if(!(this instanceof J))return new J(e,r);t("SemVer",e,r),this.loose=r;var i=e.trim().match(r?n[b]:n[m]);if(!i)throw new TypeError("Invalid Version: "+e);this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],i[4]?this.prerelease=i[4].split(".").map(function(e){return/^[0-9]+$/.test(e)?+e:e}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}function K(e,t,n){try{return(new J(e,n)).inc(t).version}catch(r){return null}}function G(e,t){var n=Q.test(e),r=Q.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function Y(e,t){return G(t,e)}function Z(e,t,n){return(new J(e,n)).compare(t)}function et(e,t){return Z(e,t,!0)}function tt(e,t,n){return Z(t,e,n)}function nt(t,n){return t.sort(function(t,r){return e.compare(t,r,n)})}function rt(t,n){return t.sort(function(t,r){return e.rcompare(t,r,n)})}function it(e,t,n){return Z(e,t,n)>0}function st(e,t,n){return Z(e,t,n)<0}function ot(e,t,n){return Z(e,t,n)===0}function ut(e,t,n){return Z(e,t,n)!==0}function at(e,t,n){return Z(e,t,n)>=0}function ft(e,t,n){return Z(e,t,n)<=0}function lt(e,t,n,r){var i;switch(t){case"===":i=e===n;break;case"!==":i=e!==n;break;case"":case"=":case"==":i=ot(e,n,r);break;case"!=":i=ut(e,n,r);break;case">":i=it(e,n,r);break;case">=":i=at(e,n,r);break;case"<":i=st(e,n,r);break;case"<=":i=ft(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ct(e,n){if(e instanceof ct){if(e.loose===n)return e;e=e.value}if(!(this instanceof ct))return new ct(e,n);t("comparator",e,n),this.loose=n,this.parse(e),this.semver===ht?this.value="":this.value=this.operator+this.semver.version}function pt(e,t){if(e instanceof pt&&e.loose===t)return e;if(!(this instanceof pt))return new pt(e,t);this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length});if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function dt(e,t){return(new pt(e,t)).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function vt(e,n){return t("comp",e),e=bt(e,n),t("caret",e),e=gt(e,n),t("tildes",e),e=Et(e,n),t("xrange",e),e=xt(e,n),t("stars",e),e}function mt(e){return!e||e.toLowerCase()==="x"||e==="*"}function gt(e,t){return e.trim().split(/\s+/).map(function(e){return yt(e,t)}).join(" ")}function yt(e,r){var i=r?n[M]:n[O];return e.replace(i,function(n,r,i,s,o){t("tilde",e,n,r,i,s,o);var u;return mt(r)?u="":mt(i)?u=">="+r+".0.0-0 <"+(+r+1)+".0.0-0":mt(s)?u=">="+r+"."+i+".0-0 <"+r+"."+(+i+1)+".0-0":o?(t("replaceTilde pr",o),o.charAt(0)!=="-"&&(o="-"+o),u=">="+r+"."+i+"."+s+o+" <"+r+"."+(+i+1)+".0-0"):u=">="+r+"."+i+"."+s+"-0"+" <"+r+"."+(+i+1)+".0-0",t("tilde return",u),u})}function bt(e,t){return e.trim().split(/\s+/).map(function(e){return wt(e,t)}).join(" ")}function wt(e,r){var i=r?n[B]:n[H];return e.replace(i,function(n,r,i,s,o){t("caret",e,n,r,i,s,o);var u;return mt(r)?u="":mt(i)?u=">="+r+".0.0-0 <"+(+r+1)+".0.0-0":mt(s)?r==="0"?u=">="+r+"."+i+".0-0 <"+r+"."+(+i+1)+".0-0":u=">="+r+"."+i+".0-0 <"+(+r+1)+".0.0-0":o?(t("replaceCaret pr",o),o.charAt(0)!=="-"&&(o="-"+o),r==="0"?i==="0"?u="="+r+"."+i+"."+s+o:u=">="+r+"."+i+"."+s+o+" <"+r+"."+(+i+1)+".0-0":u=">="+r+"."+i+"."+s+o+" <"+(+r+1)+".0.0-0"):r==="0"?i==="0"?u="="+r+"."+i+"."+s:u=">="+r+"."+i+"."+s+"-0"+" <"+r+"."+(+i+1)+".0-0":u=">="+r+"."+i+"."+s+"-0"+" <"+(+r+1)+".0.0-0",t("caret return",u),u})}function Et(e,n){return t("replaceXRanges",e,n),e.split(/\s+/).map(function(e){return St(e,n)}).join(" ")}function St(e,r){e=e.trim();var i=r?n[C]:n[N];return e.replace(i,function(n,r,i,s,o,u){t("xRange",e,n,r,i,s,o,u);var a=mt(i),f=a||mt(s),l=f||mt(o),c=l;return r==="="&&c&&(r=""),r&&c?(a&&(i=0),f&&(s=0),l&&(o=0),r===">"&&(r=">=",a||(f?(i=+i+1,s=0,o=0):l&&(s=+s+1,o=0))),n=r+i+"."+s+"."+o+"-0"):a?n="*":f?n=">="+i+".0.0-0 <"+(+i+1)+".0.0-0":l&&(n=">="+i+"."+s+".0-0 <"+i+"."+(+s+1)+".0-0"),t("xRange return",n),n})}function xt(e,r){return t("replaceStars",e,r),e.trim().replace(n[z],"")}function Tt(e,t,n,r,i,s,o,u,a,f,l,c,h){return mt(n)?t="":mt(r)?t=">="+n+".0.0-0":mt(i)?t=">="+n+"."+r+".0-0":t=">="+t,mt(a)?u="":mt(f)?u="<"+(+a+1)+".0.0-0":mt(l)?u="<"+a+"."+(+f+1)+".0-0":c?u="<="+a+"."+f+"."+l+"-"+c:u="<="+u,(t+" "+u).trim()}function Nt(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;return!0}function Ct(e,t,n){try{t=new pt(t,n)}catch(r){return!1}return t.test(e)}function kt(e,t,n){return e.filter(function(e){return Ct(e,t,n)}).sort(function(e,t){return tt(e,t,n)})[0]||null}function Lt(e,t){try{return(new pt(e,t)).range||"*"}catch(n){return null}}var e={};typeof module=="object"&&module.exports===e&&(e=module.exports=J);var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=e.re=[],r=e.src=[],i=0,s=i++;r[s]="0|[1-9]\\d*";var o=i++;r[o]="[0-9]+";var u=i++;r[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var a=i++;r[a]="("+r[s]+")\\."+"("+r[s]+")\\."+"("+r[s]+")";var f=i++;r[f]="("+r[o]+")\\."+"("+r[o]+")\\."+"("+r[o]+")";var l=i++;r[l]="(?:"+r[s]+"|"+r[u]+")";var c=i++;r[c]="(?:"+r[o]+"|"+r[u]+")";var h=i++;r[h]="(?:-("+r[l]+"(?:\\."+r[l]+")*))";var p=i++;r[p]="(?:-?("+r[c]+"(?:\\."+r[c]+")*))";var d=i++;r[d]="[0-9A-Za-z-]+";var v=i++;r[v]="(?:\\+("+r[d]+"(?:\\."+r[d]+")*))";var m=i++,g="v?"+r[a]+r[h]+"?"+r[v]+"?";r[m]="^"+g+"$";var y="[v=\\s]*"+r[f]+r[p]+"?"+r[v]+"?",b=i++;r[b]="^"+y+"$";var w=i++;r[w]="((?:<|>)?=?)";var E=i++;r[E]=r[o]+"|x|X|\\*";var S=i++;r[S]=r[s]+"|x|X|\\*";var x=i++;r[x]="[v=\\s]*("+r[S]+")"+"(?:\\.("+r[S]+")"+"(?:\\.("+r[S]+")"+"(?:("+r[h]+")"+")?)?)?";var T=i++;r[T]="[v=\\s]*("+r[E]+")"+"(?:\\.("+r[E]+")"+"(?:\\.("+r[E]+")"+"(?:("+r[p]+")"+")?)?)?";var N=i++;r[N]="^"+r[w]+"\\s*"+r[x]+"$";var C=i++;r[C]="^"+r[w]+"\\s*"+r[T]+"$";var k=i++;r[k]="(?:~>?)";var L=i++;r[L]="(\\s*)"+r[k]+"\\s+",n[L]=new RegExp(r[L],"g");var A="$1~",O=i++;r[O]="^"+r[k]+r[x]+"$";var M=i++;r[M]="^"+r[k]+r[T]+"$";var _=i++;r[_]="(?:\\^)";var D=i++;r[D]="(\\s*)"+r[_]+"\\s+",n[D]=new RegExp(r[D],"g");var P="$1^",H=i++;r[H]="^"+r[_]+r[x]+"$";var B=i++;r[B]="^"+r[_]+r[T]+"$";var j=i++;r[j]="^"+r[w]+"\\s*("+y+")$|^$";var F=i++;r[F]="^"+r[w]+"\\s*("+g+")$|^$";var I=i++;r[I]="(\\s*)"+r[w]+"\\s*("+y+"|"+r[x]+")",n[I]=new RegExp(r[I],"g");var q="$1$2$3",R=i++;r[R]="^\\s*("+r[x]+")"+"\\s+-\\s+"+"("+r[x]+")"+"\\s*$";var U=i++;r[U]="^\\s*("+r[T]+")"+"\\s+-\\s+"+"("+r[T]+")"+"\\s*$";var z=i++;r[z]="(<|>)?=?\\s*\\*";for(var W=0;W<i;W++)t(W,r[W]),n[W]||(n[W]=new RegExp(r[W]));e.parse=X,e.valid=V,e.clean=$,e.SemVer=J,J.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},J.prototype.inspect=function(){return'<SemVer "'+this+'">'},J.prototype.toString=function(){return this.version},J.prototype.compare=function(e){return t("SemVer.compare",this.version,this.loose,e),e instanceof J||(e=new J(e,this.loose)),this.compareMain(e)||this.comparePre(e)},J.prototype.compareMain=function(e){return e instanceof J||(e=new J(e,this.loose)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},J.prototype.comparePre=function(e){e instanceof J||(e=new J(e,this.loose));if(this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.lenth&&!e.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=e.prerelease[n];t("prerelease compare",n,r,i);if(r===undefined&&i===undefined)return 0;if(i===undefined)return 1;if(r===undefined)return-1;if(r===i)continue;return G(r,i)}while(++n)},J.prototype.inc=function(e){switch(e){case"major":this.major++,this.minor=-1;case"minor":this.minor++,this.patch=-1;case"patch":this.patch++,this.prerelease=[];break;case"prerelease":if(this.prerelease.length===0)this.prerelease=[0];else{var t=this.prerelease.length;while(--t>=0)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this},e.inc=K,e.compareIdentifiers=G;var Q=/^[0-9]+$/;e.rcompareIdentifiers=Y,e.compare=Z,e.compareLoose=et,e.rcompare=tt,e.sort=nt,e.rsort=rt,e.gt=it,e.lt=st,e.eq=ot,e.neq=ut,e.gte=at,e.lte=ft,e.cmp=lt,e.Comparator=ct;var ht={};return ct.prototype.parse=function(e){var t=this.loose?n[j]:n[F],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],r[2]?(this.semver=new J(r[2],this.loose),this.operator==="<"&&!this.semver.prerelease.length&&(this.semver.prerelease=["0"],this.semver.format())):this.semver=ht},ct.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},ct.prototype.toString=function(){return this.value},ct.prototype.test=function(e){return t("Comparator.test",e,this.loose),this.semver===ht?!0:lt(e,this.operator,this.semver,this.loose)},e.Range=pt,pt.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},pt.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},pt.prototype.toString=function(){return this.range},pt.prototype.parseRange=function(e){var r=this.loose;e=e.trim(),t("range",e,r);var i=r?n[U]:n[R];e=e.replace(i,Tt),t("hyphen replace",e),e=e.replace(n[I],q),t("comparator trim",e,n[I]),e=e.replace(n[L],A),e=e.replace(n[D],P),e=e.split(/\s+/).join(" ");var s=r?n[j]:n[F],o=e.split(" ").map(function(e){return vt(e,r)}).join(" ").split(/\s+/);return this.loose&&(o=o.filter(function(e){return!!e.match(s)})),o=o.map(function(e){return new ct(e,r)}),o},e.toComparators=dt,pt.prototype.test=function(e){if(!e)return!1;for(var t=0;t<this.set.length;t++)if(Nt(this.set[t],e))return!0;return!1},e.satisfies=Ct,e.maxSatisfying=kt,e.validRange=Lt,e}),function(e,t){function n(t){return e.less[t.split("/")[1]]}function f(){r.env==="development"?(r.optimization=0,r.watchTimer=setInterval(function(){r.watchMode&&g(function(e,t,n,i,s){e?k(e,i.href):t&&S(t.toCSS(r),i,s.lastModified)})},r.poll)):r.optimization=3}function m(){var e=document.getElementsByTagName("style");for(var t=0;t<e.length;t++)if(e[t].type.match(p)){var n=new r.tree.parseEnv(r);n.filename=document.location.href.replace(/#.*$/,""),(new r.Parser(n)).parse(e[t].innerHTML||"",function(n,i){if(n)return k(n,"inline");var s=i.toCSS(r),o=e[t];o.type="text/css",o.styleSheet?o.styleSheet.cssText=s:o.innerHTML=s})}}function g(e,t){for(var n=0;n<r.sheets.length;n++)w(r.sheets[n],e,t,r.sheets.length-(n+1))}function y(e,t){var n=b(e),r=b(t),i,s,o,u,a="";if(n.hostPart!==r.hostPart)return"";s=Math.max(r.directories.length,n.directories.length);for(i=0;i<s;i++)if(r.directories[i]!==n.directories[i])break;u=r.directories.slice(i),o=n.directories.slice(i);for(i=0;i<u.length-1;i++)a+="../";for(i=0;i<o.length-1;i++)a+=o[i]+"/";return a}function b(e,t){var n=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,r=e.match(n),i={},s=[],o,u;if(!r)throw new Error("Could not parse sheet href - '"+e+"'");if(!r[1]||r[2]){u=t.match(n);if(!u)throw new Error("Could not parse page url - '"+t+"'");r[1]=r[1]||u[1]||"",r[2]||(r[3]=u[3]+r[3])}if(r[3]){s=r[3].replace(/\\/g,"/").split("/");for(o=0;o<s.length;o++)s[o]==="."&&(s.splice(o,1),o-=1);for(o=0;o<s.length;o++)s[o]===".."&&o>0&&(s.splice(o-1,2),o-=2)}return i.hostPart=r[1],i.directories=s,i.path=r[1]+s.join("/"),i.fileUrl=i.path+(r[4]||""),i.url=i.fileUrl+(r[5]||""),i}function w(t,n,i,s){var o=b(t.href,e.location.href),u=o.url,a=l&&l.getItem(u),f=l&&l.getItem(u+":timestamp"),c={css:a,timestamp:f},h,p={relativeUrls:r.relativeUrls,currentDirectory:o.path,filename:u};t instanceof r.tree.parseEnv?(h=new r.tree.parseEnv(t),p.entryPath=h.currentFileInfo.entryPath,p.rootpath=h.currentFileInfo.rootpath,p.rootFilename=h.currentFileInfo.rootFilename):(h=new r.tree.parseEnv(r),h.mime=t.type,p.entryPath=o.path,p.rootpath=r.rootpath||o.path,p.rootFilename=u),h.relativeUrls&&(r.rootpath?p.rootpath=b(r.rootpath+y(o.path,p.entryPath)).path:p.rootpath=o.path),x(u,t.type,function(e,a){v+=e.replace(/@import .+?;/ig,"");if(!i&&c&&a&&(new Date(a)).valueOf()===(new Date(c.timestamp)).valueOf())S(c.css,t),n(null,null,e,t,{local:!0,remaining:s},u);else try{h.contents[u]=e,h.paths=[o.path],h.currentFileInfo=p,(new r.Parser(h)).parse(e,function(r,i){if(r)return n(r,null,null,t);try{n(r,i,e,t,{local:!1,lastModified:a,remaining:s},u),h.currentFileInfo.rootFilename===u&&N(document.getElementById("less-error-message:"+E(u)))}catch(r){n(r,null,null,t)}})}catch(f){n(f,null,null,t)}},function(e,r){n({type:"File",message:"'"+r+"' wasn't found ("+e+")"},null,null,t)})}function E(e){return e.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function S(e,t,n){var r=t.href||"",i="less:"+(t.title||E(r)),s=document.getElementById(i),o=!1,u=document.createElement("style");u.setAttribute("type","text/css"),t.media&&u.setAttribute("media",t.media),u.id=i;if(u.styleSheet)try{u.styleSheet.cssText=e}catch(a){throw new Error("Couldn't reassign styleSheet.cssText.")}else u.appendChild(document.createTextNode(e)),o=s!==null&&s.childNodes.length>0&&u.childNodes.length>0&&s.firstChild.nodeValue===u.firstChild.nodeValue;var f=document.getElementsByTagName("head")[0];if(s===null||o===!1){var c=t&&t.nextSibling||null;c?c.parentNode.insertBefore(u,c):f.appendChild(u)}s&&o===!1&&f.removeChild(s);if(n&&l){C("saving "+r+" to cache.");try{l.setItem(r,e),l.setItem(r+":timestamp",n)}catch(a){C("failed to save")}}}function x(e,t,n,i){function a(t,n,r){t.status>=200&&t.status<300?n(t.responseText,t.getResponseHeader("Last-Modified")):typeof r=="function"&&r(t.status,e)}var s=T(),u=o?r.fileAsync:r.async;typeof s.overrideMimeType=="function"&&s.overrideMimeType("text/css"),s.open("GET",e,u),s.setRequestHeader("Accept",t||"text/x-less, text/css; q=0.9, */*; q=0.5"),s.send(null),o&&!r.fileAsync?s.status===0||s.status>=200&&s.status<300?n(s.responseText):i(s.status,e):u?s.onreadystatechange=function(){s.readyState==4&&a(s,n,i)}:a(s,n,i)}function T(){if(e.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return C("browser doesn't support AJAX."),null}}function N(e){return e&&e.parentNode.removeChild(e)}function C(e){r.env=="development"&&typeof console!="undefined"&&console.log("less: "+e)}function k(e,n){var i="less-error-message:"+E(n||""),s='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',o=document.createElement("div"),u,a,f=[],l=e.filename||n,c=l.match(/([^\/]+(\?.*)?)$/)[1];o.id=i,o.className="less-error-message",a="<h3>"+(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+"</h3>"+'<p>in <a href="'+l+'">'+c+"</a> ";var h=function(e,n,r){e.extract[n]!=t&&f.push(s.replace(/\{line\}/,(parseInt(e.line)||0)+(n-1)).replace(/\{class\}/,r).replace(/\{content\}/,e.extract[n]))};e.extract?(h(e,0,""),h(e,1,"line"),h(e,2,""),a+="on line "+e.line+", column "+(e.column+1)+":</p>"+"<ul>"+f.join("")+"</ul>"):e.stack&&(a+="<br/>"+e.stack.split("\n").slice(1).join("<br/>")),o.innerHTML=a,S([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),o.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),r.env=="development"&&(u=setInterval(function(){document.body&&(document.getElementById(i)?document.body.replaceChild(o,document.getElementById(i)):document.body.insertBefore(o,document.body.firstChild),clearInterval(u))},10))}var r,i,s;typeof environment=="object"&&{}.toString.call(environment)==="[object Environment]"?(typeof e=="undefined"?r={}:r=e.less={},i=r.tree={},r.mode="rhino"):typeof e=="undefined"?(r=exports,i=n("./tree"),r.mode="node"):(typeof e.less=="undefined"&&(e.less={}),r=e.less,i=e.less.tree={},r.mode="browser"),r.Parser=function(t){function m(){a=c[u],f=o,h=o}function g(){c[u]=a,o=f,h=o}function y(){o>h&&(c[u]=c[u].slice(o-h),h=o)}function b(e){var t=e.charCodeAt(0);return t===32||t===10||t===9}function w(e){var t,n,r,i,a;if(e instanceof Function)return e.call(p.parsers);if(typeof e=="string")t=s.charAt(o)===e?e:null,r=1,y();else{y();if(!(t=e.exec(c[u])))return null;r=t[0].length}if(t)return E(r),typeof t=="string"?t:t.length===1?t[0]:t}function E(e){var t=o,n=u,r=o+c[u].length,i=o+=e;while(o<r){if(!b(s.charAt(o)))break;o++}return c[u]=c[u].slice(e+(o-i)),h=o,c[u].length===0&&u<c.length-1&&u++,t!==o||n!==u}function S(e,t){var n=w(e);if(!!n)return n;x(t||(typeof e=="string"?"expected '"+e+"' got '"+s.charAt(o)+"'":"unexpected token"))}function x(e,t){var n=new Error(e);throw n.index=o,n.type=t||"Syntax",n}function T(e){return typeof e=="string"?s.charAt(o)===e:e.test(c[u])?!0:!1}function N(e,t){return e.filename&&t.currentFileInfo.filename&&e.filename!==t.currentFileInfo.filename?p.imports.contents[e.filename]:s}function C(e,t){for(var n=e,r=-1;n>=0&&t.charAt(n)!=="\n";n--)r++;return{line:typeof e=="number"?(t.slice(0,e).match(/\n/g)||"").length:null,column:r}}function k(e,t,i){var s=i.currentFileInfo.filename;return r.mode!=="browser"&&r.mode!=="rhino"&&(s=n("path").resolve(s)),{lineNumber:C(e,t).line+1,fileName:s}}function L(e,t){var n=N(e,t),r=C(e.index,n),i=r.line,s=r.column,o=n.split("\n");this.type=e.type||"Syntax",this.message=e.message,this.filename=e.filename||t.currentFileInfo.filename,this.index=e.index,this.line=typeof i=="number"?i+1:null,this.callLine=e.call&&C(e.call,n).line+1,this.callExtract=o[C(e.call,n).line],this.stack=e.stack,this.column=s,this.extract=[o[i-1],o[i],o[i+1]]}var s,o,u,a,f,l,c,h,p,d=this;t instanceof i.parseEnv||(t=new i.parseEnv(t));var v=this.imports={paths:t.paths||[],queue:[],files:t.files,contents:t.contents,mime:t.mime,error:null,push:function(e,n,i){var s=this;this.queue.push(e),r.Parser.importer(e,n,function(t,n,r){s.queue.splice(s.queue.indexOf(e),1);var o=r in s.files;s.files[r]=n,t&&!s.error&&(s.error=t),i(t,n,o)},t)}};return L.prototype=new Error,L.prototype.constructor=L,this.env=t=t||{},this.optimization="optimization"in this.env?this.env.optimization:1,p={imports:v,parse:function(e,a){var f,d,v,m,g,y,b=[],E,S=null;o=u=h=l=0,s=e.replace(/\r\n/g,"\n"),s=s.replace(/^\uFEFF/,""),c=function(e){var n=0,r=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,i=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,o=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,u=0,a,f=e[0],l;for(var c=0,h,p;c<s.length;){r.lastIndex=c,(a=r.exec(s))&&a.index===c&&(c+=a[0].length,f.push(a[0])),h=s.charAt(c),i.lastIndex=o.lastIndex=c;if(a=o.exec(s))if(a.index===c){c+=a[0].length,f.push(a[0]);continue}if(!l&&h==="/"){p=s.charAt(c+1);if(p==="/"||p==="*")if(a=i.exec(s))if(a.index===c){c+=a[0].length,f.push(a[0]);continue}}switch(h){case"{":if(!l){u++,f.push(h);break};case"}":if(!l){u--,f.push(h),e[++n]=f=[];break};case"(":if(!l){l=!0,f.push(h);break};case")":if(l){l=!1,f.push(h);break};default:f.push(h)}c++}return u!=0&&(S=new L({index:c-1,type:"Parse",message:u>0?"missing closing `}`":"missing opening `{`",filename:t.currentFileInfo.filename},t)),e.map(function(e){return e.join("")})}([[]]);if(S)return a(new L(S,t));try{f=new i.Ruleset([],w(this.parsers.primary)),f.root=!0,f.firstRoot=!0}catch(x){return a(new L(x,t))}f.toCSS=function(e){var s,o,u;return function(s,o){s=s||{};var u,a=new i.evalEnv(s);typeof o=="object"&&!Array.isArray(o)&&(o=Object.keys(o).map(function(e){var t=o[e];return t instanceof i.Value||(t instanceof i.Expression||(t=new i.Expression([t])),t=new i.Value([t])),new i.Rule("@"+e,t,!1,0)}),a.frames=[new i.Ruleset(null,o)]);try{var f=e.call(this,a);(new i.joinSelectorVisitor).run(f),(new i.processExtendsVisitor).run(f);var l=f.toCSS({compress:Boolean(s.compress),dumpLineNumbers:t.dumpLineNumbers,strictUnits:Boolean(s.strictUnits)})}catch(c){throw new L(c,t)}return s.yuicompress&&r.mode==="node"?n("ycssmin").cssmin(l,s.maxLineLen):s.compress?l.replace(/(\s)+/g,"$1"):l}}(f.eval);if(o<s.length-1){o=l,y=s.split("\n"),g=(s.slice(0,o).match(/\n/g)||"").length+1;for(var T=o,N=-1;T>=0&&s.charAt(T)!=="\n";T--)N++;S={type:"Parse",message:"Unrecognised input",index:o,filename:t.currentFileInfo.filename,line:g,column:N,extract:[y[g-2],y[g-1],y[g]]}}var C=function(e){e=S||e||p.imports.error,e?(e instanceof L||(e=new L(e,t)),a(e)):a(null,f)};t.processImports!==!1?(new i.importVisitor(this.imports,C)).run(f):C()},parsers:{primary:function(){var e,t=[];while((e=w(this.extendRule)||w(this.mixin.definition)||w(this.rule)||w(this.ruleset)||w(this.mixin.call)||w(this.comment)||w(this.directive))||w(/^[\s\n]+/)||w(/^;+/))e&&t.push(e);return t},comment:function(){var e;if(s.charAt(o)!=="/")return;if(s.charAt(o+1)==="/")return new i.Comment(w(/^\/\/.*/),!0);if(e=w(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))return new i.Comment(e)},entities:{quoted:function(){var e,n=o,r,u=o;s.charAt(n)==="~"&&(n++,r=!0);if(s.charAt(n)!=='"'&&s.charAt(n)!=="'")return;r&&w("~");if(e=w(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))return new i.Quoted(e[0],e[1]||e[2],r,u,t.currentFileInfo)},keyword:function(){var e;if(e=w(/^[_A-Za-z-][_A-Za-z0-9-]*/))return i.colors.hasOwnProperty(e)?new i.Color(i.colors[e].slice(1)):new i.Keyword(e)},call:function(){var e,n,r,s,a=o;if(!(e=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(c[u])))return;e=e[1],n=e.toLowerCase();if(n==="url")return null;o+=e.length;if(n==="alpha"){s=w(this.alpha);if(typeof s!="undefined")return s}w("("),r=w(this.entities.arguments);if(!w(")"))return;if(e)return new i.Call(e,r,a,t.currentFileInfo)},arguments:function(){var e=[],t;while(t=w(this.entities.assignment)||w(this.expression)){e.push(t);if(!w(","))break}return e},literal:function(){return w(this.entities.dimension)||w(this.entities.color)||w(this.entities.quoted)||w(this.entities.unicodeDescriptor)},assignment:function(){var e,t;if((e=w(/^\w+(?=\s?=)/i))&&w("=")&&(t=w(this.entity)))return new i.Assignment(e,t)},url:function(){var e;if(s.charAt(o)!=="u"||!w(/^url\(/))return;return e=w(this.entities.quoted)||w(this.entities.variable)||w(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",S(")"),new i.URL(e.value!=null||e instanceof i.Variable?e:new i.Anonymous(e),t.currentFileInfo)},variable:function(){var e,n=o;if(s.charAt(o)==="@"&&(e=w(/^@@?[\w-]+/)))return new i.Variable(e,n,t.currentFileInfo)},variableCurly:function(){var e,n,r=o;if(s.charAt(o)==="@"&&(n=w(/^@\{([\w-]+)\}/)))return new i.Variable("@"+n[1],r,t.currentFileInfo)},color:function(){var e;if(s.charAt(o)==="#"&&(e=w(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)))return new i.Color(e[1])},dimension:function(){var e,t=s.charCodeAt(o);if(t>57||t<43||t===47||t==44)return;if(e=w(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/))return new i.Dimension(e[1],e[2])},unicodeDescriptor:function(){var e;if(e=w(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new i.UnicodeDescriptor(e[0])},javascript:function(){var e,t=o,n;s.charAt(t)==="~"&&(t++,n=!0);if(s.charAt(t)!=="`")return;n&&w("~");if(e=w(/^`([^`]*)`/))return new i.JavaScript(e[1],o,n)}},variable:function(){var e;if(s.charAt(o)==="@"&&(e=w(/^(@[\w-]+)\s*:/)))return e[1]},extend:function(e){var t,n,r=o,s,u=[];if(!w(e?/^&:extend\(/:/^:extend\(/))return;do{s=null,t=[];for(;;){s=w(/^(all)(?=\s*(\)|,))/);if(s)break;n=w(this.element);if(!n)break;t.push(n)}s=s&&s[1],u.push(new i.Extend(new i.Selector(t),s,r))}while(w(","));return S(/^\)/),e&&S(/^;/),u},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var e=[],n,r,u,a,f,l=o,c=s.charAt(o),h=!1;if(c!=="."&&c!=="#")return;m();while(n=w(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/))e.push(new i.Element(r,n,o)),r=w(">");w("(")&&(u=this.mixin.args.call(this,!0).args,S(")")),u=u||[],w(this.important)&&(h=!0);if(e.length>0&&(w(";")||T("}")))return new i.mixin.Call(e,u,l,t.currentFileInfo,h);g()},args:function(e){var t=[],n=[],r,u=[],a,f,l,c,h,p={args:null,variadic:!1};for(;;){if(e)h=w(this.expression);else{w(this.comment);if(s.charAt(o)==="."&&w(/^\.{3}/)){p.variadic=!0,w(";")&&!r&&(r=!0),(r?n:u).push({variadic:!0});break}h=w(this.entities.variable)||w(this.entities.literal)||w(this.entities.keyword)}if(!h)break;l=null,h.throwAwayComments&&h.throwAwayComments(),c=h;var d=null;if(e){if(h.value.length==1)var d=h.value[0]}else d=h;if(d&&d instanceof i.Variable)if(w(":"))t.length>0&&(r&&x("Cannot mix ; and , as delimiter types"),a=!0),c=S(this.expression),l=f=d.name;else{if(!e&&w(/^\.{3}/)){p.variadic=!0,w(";")&&!r&&(r=!0),(r?n:u).push({name:h.name,variadic:!0});break}e||(f=l=d.name,c=null)}c&&t.push(c),u.push({name:l,value:c});if(w(","))continue;if(w(";")||r)a&&x("Cannot mix ; and , as delimiter types"),r=!0,t.length>1&&(c=new i.Value(t)),n.push({name:f,value:c}),f=null,t=[],a=!1}return p.args=r?n:u,p},definition:function(){var e,t=[],n,r,u,a,f,c=!1;if(s.charAt(o)!=="."&&s.charAt(o)!=="#"||T(/^[^{]*\}/))return;m();if(n=w(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){e=n[1];var h=this.mixin.args.call(this,!1);t=h.args,c=h.variadic,w(")")||(l=o,g()),w(this.comment),w(/^when/)&&(f=S(this.conditions,"expected condition")),r=w(this.block);if(r)return new i.mixin.Definition(e,t,r,f,c);g()}}},entity:function(){return w(this.entities.literal)||w(this.entities.variable)||w(this.entities.url)||w(this.entities.call)||w(this.entities.keyword)||w(this.entities.javascript)||w(this.comment)},end:function(){return w(";")||T("}")},alpha:function(){var e;if(!w(/^\(opacity=/i))return;if(e=w(/^\d+/)||w(this.entities.variable))return S(")"),new i.Alpha(e)},element:function(){var e,t,n,r;n=w(this.combinator),e=w(/^(?:\d+\.\d+|\d+)%/)||w(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||w("*")||w("&")||w(this.attribute)||w(/^\([^()@]+\)/)||w(/^[\.#](?=@)/)||w(this.entities.variableCurly),e||w("(")&&(r=w(this.selector))&&w(")")&&(e=new i.Paren(r));if(e)return new i.Element(n,e,o)},combinator:function(){var e=s.charAt(o);if(e===">"||e==="+"||e==="~"||e==="|"){o++;while(s.charAt(o).match(/\s/))o++;return new i.Combinator(e)}return s.charAt(o-1).match(/\s/)?new i.Combinator(" "):new i.Combinator(null)},selector:function(){var e,t,n=[],r,u,a=[];while((u=w(this.extend))||(t=w(this.element))){u?a.push.apply(a,u):(a.length&&x("Extend can only be used at the end of selector"),r=s.charAt(o),n.push(t),t=null);if(r==="{"||r==="}"||r===";"||r===","||r===")")break}if(n.length>0)return new i.Selector(n,a);a.length&&x("Extend must be used to extend a selector, it cannot be used on its own")},attribute:function(){var e="",t,n,r;if(!w("["))return;(t=w(this.entities.variableCurly))||(t=S(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/));if(r=w(/^[|~*$^]?=/))n=w(this.entities.quoted)||w(/^[\w-]+/)||w(this.entities.variableCurly);return S("]"),new i.Attribute(t,r,n)},block:function(){var e;if(w("{")&&(e=w(this.primary))&&w("}"))return e},ruleset:function(){var e=[],n,r,u;m(),t.dumpLineNumbers&&(u=k(o,s,t));while(n=w(this.selector)){e.push(n),w(this.comment);if(!w(","))break;w(this.comment)}if(e.length>0&&(r=w(this.block))){var a=new i.Ruleset(e,r,t.strictImports);return t.dumpLineNumbers&&(a.debugInfo=u),a}l=o,g()},rule:function(e){var n,r,u=s.charAt(o),a;m();if(u==="."||u==="#"||u==="&")return;if(n=w(this.variable)||w(this.property)){r=!e&&(t.compress||n.charAt(0)==="@")?w(this.value)||w(this.anonymousValue):w(this.anonymousValue)||w(this.value),a=w(this.important);if(r&&w(this.end))return new i.Rule(n,r,a,f,t.currentFileInfo);l=o,g();if(r&&!e)return this.rule(!0)}},anonymousValue:function(){var e;if(e=/^([^@+\/'"*`(;{}-]*);/.exec(c[u]))return o+=e[0].length-1,new i.Anonymous(e[1])},"import":function(){var e,n,r=o;m();var s=w(/^@import?\s+/),u=(s?w(this.importOptions):null)||{};if(s&&(e=w(this.entities.quoted)||w(this.entities.url))){n=w(this.mediaFeatures);if(w(";"))return n=n&&new i.Value(n),new i.Import(e,n,u,r,t.currentFileInfo)}g()},importOptions:function(){var e,t={},n,r;if(!w("("))return null;do if(e=w(this.importOption)){n=e,r=!0;switch(n){case"css":n="less",r=!1;break;case"once":n="multiple",r=!1}t[n]=r;if(!w(","))break}while(e);return S(")"),t},importOption:function(){var e=w(/^(less|css|multiple|once)/);if(e)return e[1]},mediaFeature:function(){var e,n,r=[];do if(e=w(this.entities.keyword))r.push(e);else if(w("(")){n=w(this.property),e=w(this.value);if(!w(")"))return null;if(n&&e)r.push(new i.Paren(new i.Rule(n,e,null,o,t.currentFileInfo,!0)));else{if(!e)return null;r.push(new i.Paren(e))}}while(e);if(r.length>0)return new i.Expression(r)},mediaFeatures:function(){var e,t=[];do if(e=w(this.mediaFeature)){t.push(e);if(!w(","))break}else if(e=w(this.entities.variable)){t.push(e);if(!w(","))break}while(e);return t.length>0?t:null},media:function(){var e,n,r,u;t.dumpLineNumbers&&(u=k(o,s,t));if(w(/^@media/)){e=w(this.mediaFeatures);if(n=w(this.block))return r=new i.Media(n,e),t.dumpLineNumbers&&(r.debugInfo=u),r}},directive:function(){var e,n,r,u,a,f,l,c,h,p;if(s.charAt(o)!=="@")return;if(n=w(this["import"])||w(this.media))return n;m(),e=w(/^@[a-z-]+/);if(!e)return;l=e,e.charAt(1)=="-"&&e.indexOf("-",2)>0&&(l="@"+e.slice(e.indexOf("-",2)+1));switch(l){case"@font-face":c=!0;break;case"@viewport":case"@top-left":case"@top-left-corner":case"@top-center":case"@top-right":case"@top-right-corner":case"@bottom-left":case"@bottom-left-corner":case"@bottom-center":case"@bottom-right":case"@bottom-right-corner":case"@left-top":case"@left-middle":case"@left-bottom":case"@right-top":case"@right-middle":case"@right-bottom":c=!0;break;case"@page":case"@document":case"@supports":case"@keyframes":c=!0,h=!0;break;case"@namespace":p=!0}h&&(e+=" "+(w(/^[^{]+/)||"").trim());if(c){if(r=w(this.block))return new i.Directive(e,r)}else if((n=p?w(this.expression):w(this.entity))&&w(";")){var d=new i.Directive(e,n);return t.dumpLineNumbers&&(d.debugInfo=k(o,s,t)),d}g()},value:function(){var e,t=[],n;while(e=w(this.expression)){t.push(e);if(!w(","))break}if(t.length>0)return new i.Value(t)},important:function(){if(s.charAt(o)==="!")return w(/^! *important/)},sub:function(){var e,t;if(w("("))if(e=w(this.addition))return t=new i.Expression([e]),S(")"),t.parens=!0,t},multiplication:function(){var e,t,n,r,u,a=[];if(e=w(this.operand)){u=b(s.charAt(o-1));while(!T(/^\/[*\/]/)&&(n=w("/")||w("*"))){if(!(t=w(this.operand)))break;e.parensInOp=!0,t.parensInOp=!0,r=new i.Operation(n,[r||e,t],u),u=b(s.charAt(o-1))}return r||e}},addition:function(){var e,t,n,r,u;if(e=w(this.multiplication)){u=b(s.charAt(o-1));while((n=w(/^[-+]\s+/)||!u&&(w("+")||w("-")))&&(t=w(this.multiplication)))e.parensInOp=!0,t.parensInOp=!0,r=new i.Operation(n,[r||e,t],u),u=b(s.charAt(o-1));return r||e}},conditions:function(){var e,t,n=o,r;if(e=w(this.condition)){while(w(",")&&(t=w(this.condition)))r=new i.Condition("or",r||e,t,n);return r||e}},condition:function(){var e,t,n,r,s=o,u=!1;w(/^not/)&&(u=!0),S("(");if(e=w(this.addition)||w(this.entities.keyword)||w(this.entities.quoted))return(r=w(/^(?:>=|=<|[<=>])/))?(t=w(this.addition)||w(this.entities.keyword)||w(this.entities.quoted))?n=new i.Condition(r,e,t,s,u):x("expected expression"):n=new i.Condition("=",e,new i.Keyword("true"),s,u),S(")"),w(/^and/)?new i.Condition("and",n,w(this.condition)):n},operand:function(){var e,t=s.charAt(o+1);s.charAt(o)==="-"&&(t==="@"||t==="(")&&(e=w("-"));var n=w(this.sub)||w(this.entities.dimension)||w(this.entities.color)||w(this.entities.variable)||w(this.entities.call);return e&&(n.parensInOp=!0,n=new i.Negative(n)),n},expression:function(){var e,t,n=[],r;while(e=w(this.addition)||w(this.entity))n.push(e),!T(/^\/[\/*]/)&&(t=w("/"))&&n.push(new i.Anonymous(t));if(n.length>0)return new i.Expression(n)},property:function(){var e;if(e=w(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/))return e[1]}}}};if(r.mode==="browser"||r.mode==="rhino")r.Parser.importer=function(e,t,n,r){!/^([a-z-]+:)?\//.test(e)&&t.currentDirectory&&(e=t.currentDirectory+e);var i=r.toSheet(e);i.processImports=!1,i.currentFileInfo=t,w(i,function(e,t,r,i,s,o){n.call(null,e,t,o)},!0)};(function(r){function u(e){return r.functions.hsla(e.h,e.s,e.l,e.a)}function a(e,t){return e instanceof r.Dimension&&e.unit.is("%")?parseFloat(e.value*t/100):f(e)}function f(e){if(e instanceof r.Dimension)return parseFloat(e.unit.is("%")?e.value/100:e.value);if(typeof e=="number")return e;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function l(e){return Math.min(1,Math.max(0,e))}r.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(e,t,n,i){var s=[e,t,n].map(function(e){return a(e,256)});return i=f(i),new r.Color(s,i)},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){function o(e){return e=e<0?e+1:e>1?e-1:e,e*6<1?s+(i-s)*e*6:e*2<1?i:e*3<2?s+(i-s)*(2/3-e)*6:s}e=f(e)%360/360,t=l(f(t)),n=l(f(n)),r=l(f(r));var i=n<=.5?n*(t+1):n+t-n*t,s=n*2-i;return this.rgba(o(e+1/3)*255,o(e)*255,o(e-1/3)*255,r)},hsv:function(e,t,n){return this.hsva(e,t,n,1)},hsva:function(e,t,n,r){e=f(e)%360/360*360,t=f(t),n=f(n),r=f(r);var i,s;i=Math.floor(e/60%6),s=e/60-i;var o=[n,n*(1-t),n*(1-s*t),n*(1-(1-s)*t)],u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(o[u[i][0]]*255,o[u[i][1]]*255,o[u[i][2]]*255,r)},hue:function(e){return new r.Dimension(Math.round(e.toHSL().h))},saturation:function(e){return new r.Dimension(Math.round(e.toHSL().s*100),"%")},lightness:function(e){return new r.Dimension(Math.round(e.toHSL().l*100),"%")},hsvhue:function(e){return new r.Dimension(Math.round(e.toHSV().h))},hsvsaturation:function(e){return new r.Dimension(Math.round(e.toHSV().s*100),"%")},hsvvalue:function(e){return new r.Dimension(Math.round(e.toHSV().v*100),"%")},red:function(e){return new r.Dimension(e.rgb[0])},green:function(e){return new r.Dimension(e.rgb[1])},blue:function(e){return new r.Dimension(e.rgb[2])},alpha:function(e){return new r.Dimension(e.toHSL().a)},luma:function(e){return new r.Dimension(Math.round(e.luma()*e.alpha*100),"%")},saturate:function(e,t){var n=e.toHSL();return n.s+=t.value/100,n.s=l(n.s),u(n)},desaturate:function(e,t){var n=e.toHSL();return n.s-=t.value/100,n.s=l(n.s),u(n)},lighten:function(e,t){var n=e.toHSL();return n.l+=t.value/100,n.l=l(n.l),u(n)},darken:function(e,t){var n=e.toHSL();return n.l-=t.value/100,n.l=l(n.l),u(n)},fadein:function(e,t){var n=e.toHSL();return n.a+=t.value/100,n.a=l(n.a),u(n)},fadeout:function(e,t){var n=e.toHSL();return n.a-=t.value/100,n.a=l(n.a),u(n)},fade:function(e,t){var n=e.toHSL();return n.a=t.value/100,n.a=l(n.a),u(n)},spin:function(e,t){var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,u(n)},mix:function(e,t,n){n||(n=new r.Dimension(50));var i=n.value/100,s=i*2-1,o=e.toHSL().a-t.toHSL().a,u=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,a=1-u,f=[e.rgb[0]*u+t.rgb[0]*a,e.rgb[1]*u+t.rgb[1]*a,e.rgb[2]*u+t.rgb[2]*a],l=e.alpha*i+t.alpha*(1-i);return new r.Color(f,l)},greyscale:function(e){return this.desaturate(e,new r.Dimension(100))},contrast:function(e,t,n,r){if(!e.rgb)return null;typeof n=="undefined"&&(n=this.rgba(255,255,255,1)),typeof t=="undefined"&&(t=this.rgba(0,0,0,1));if(t.luma()>n.luma()){var i=n;n=t,t=i}return typeof r=="undefined"?r=.43:r=f(r),e.luma()*e.alpha<r?n:t},e:function(e){return new r.Anonymous(e instanceof r.JavaScript?e.evaluated:e)},escape:function(e){return new r.Anonymous(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(e){var t=Array.prototype.slice.call(arguments,1),n=e.value;for(var i=0;i<t.length;i++)n=n.replace(/%[sda]/i,function(e){var n=e.match(/s/i)?t[i].value:t[i].toCSS();return e.match(/[A-Z]$/)?encodeURIComponent(n):n});return n=n.replace(/%%/g,"%"),new r.Quoted('"'+n+'"',n)},unit:function(e,t){return new r.Dimension(e.value,t?t.toCSS():"")},convert:function(e,t){return e.convertTo(t.value)},round:function(e,t){var n=typeof t=="undefined"?0:t.value;return this._math(function(e){return e.toFixed(n)},null,e)},pi:function(){return new r.Dimension(Math.PI)},mod:function(e,t){return new r.Dimension(e.value%t.value,e.unit)},pow:function(e,t){if(typeof e=="number"&&typeof t=="number")e=new r.Dimension(e),t=new r.Dimension(t);else if(!(e instanceof r.Dimension)||!(t instanceof r.Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new r.Dimension(Math.pow(e.value,t.value),e.unit)},_math:function(e,t,n){if(n instanceof r.Dimension)return new r.Dimension(e(parseFloat(n.value)),t==null?n.unit:t);if(typeof n=="number")return e(n);throw{type:"Argument",message:"argument must be a number"}},argb:function(e){return new r.Anonymous(e.toARGB())},percentage:function(e){return new r.Dimension(e.value*100,"%")},color:function(e){if(e instanceof r.Quoted)return new r.Color(e.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(e){return this._isa(e,r.Color)},isnumber:function(e){return this._isa(e,r.Dimension)},isstring:function(e){return this._isa(e,r.Quoted)},iskeyword:function(e){return this._isa(e,r.Keyword)},isurl:function(e){return this._isa(e,r.URL)},ispixel:function(e){return this.isunit(e,"px")},ispercentage:function(e){return this.isunit(e,"%")},isem:function(e){return this.isunit(e,"em")},isunit:function(e,t){return e instanceof r.Dimension&&e.unit.is(t.value||t)?r.True:r.False},_isa:function(e,t){return e instanceof t?r.True:r.False},multiply:function(e,t){var n=e.rgb[0]*t.rgb[0]/255,r=e.rgb[1]*t.rgb[1]/255,i=e.rgb[2]*t.rgb[2]/255;return this.rgb(n,r,i)},screen:function(e,t){var n=255-(255-e.rgb[0])*(255-t.rgb[0])/255,r=255-(255-e.rgb[1])*(255-t.rgb[1])/255,i=255-(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,r,i)},overlay:function(e,t){var n=e.rgb[0]<128?2*e.rgb[0]*t.rgb[0]/255:255-2*(255-e.rgb[0])*(255-t.rgb[0])/255,r=e.rgb[1]<128?2*e.rgb[1]*t.rgb[1]/255:255-2*(255-e.rgb[1])*(255-t.rgb[1])/255,i=e.rgb[2]<128?2*e.rgb[2]*t.rgb[2]/255:255-2*(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,r,i)},softlight:function(e,t){var n=t.rgb[0]*e.rgb[0]/255,r=n+e.rgb[0]*(255-(255-e.rgb[0])*(255-t.rgb[0])/255-n)/255;n=t.rgb[1]*e.rgb[1]/255;var i=n+e.rgb[1]*(255-(255-e.rgb[1])*(255-t.rgb[1])/255-n)/255;n=t.rgb[2]*e.rgb[2]/255;var s=n+e.rgb[2]*(255-(255-e.rgb[2])*(255-t.rgb[2])/255-n)/255;return this.rgb(r,i,s)},hardlight:function(e,t){var n=t.rgb[0]<128?2*t.rgb[0]*e.rgb[0]/255:255-2*(255-t.rgb[0])*(255-e.rgb[0])/255,r=t.rgb[1]<128?2*t.rgb[1]*e.rgb[1]/255:255-2*(255-t.rgb[1])*(255-e.rgb[1])/255,i=t.rgb[2]<128?2*t.rgb[2]*e.rgb[2]/255:255-2*(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,r,i)},difference:function(e,t){var n=Math.abs(e.rgb[0]-t.rgb[0]),r=Math.abs(e.rgb[1]-t.rgb[1]),i=Math.abs(e.rgb[2]-t.rgb[2]);return this.rgb(n,r,i)},exclusion:function(e,t){var n=e.rgb[0]+t.rgb[0]*(255-e.rgb[0]-e.rgb[0])/255,r=e.rgb[1]+t.rgb[1]*(255-e.rgb[1]-e.rgb[1])/255,i=e.rgb[2]+t.rgb[2]*(255-e.rgb[2]-e.rgb[2])/255;return this.rgb(n,r,i)},average:function(e,t){var n=(e.rgb[0]+t.rgb[0])/2,r=(e.rgb[1]+t.rgb[1])/2,i=(e.rgb[2]+t.rgb[2])/2;return this.rgb(n,r,i)},negation:function(e,t){var n=255-Math.abs(255-t.rgb[0]-e.rgb[0]),r=255-Math.abs(255-t.rgb[1]-e.rgb[1]),i=255-Math.abs(255-t.rgb[2]-e.rgb[2]);return this.rgb(n,r,i)},tint:function(e,t){return this.mix(this.rgb(255,255,255),e,t)},shade:function(e,t){return this.mix(this.rgb(0,0,0),e,t)},extract:function(e,t){return t=t.value-1,e.value[t]},"data-uri":function(t,i){if(typeof e!="undefined")return(new r.URL(i||t,this.currentFileInfo)).eval(this.env);var s=t.value,o=i&&i.value,u=n("fs"),a=n("path"),f=!1;arguments.length<2&&(o=s),this.env.isPathRelative(o)&&(this.currentFileInfo.relativeUrls?o=a.join(this.currentFileInfo.currentDirectory,o):o=a.join(this.currentFileInfo.entryPath,o));if(arguments.length<2){var l;try{l=n("mime")}catch(c){l=r._mime}s=l.lookup(o);var h=l.charsets.lookup(s);f=["US-ASCII","UTF-8"].indexOf(h)<0,f&&(s+=";base64")}else f=/;base64$/.test(s);var p=u.readFileSync(o),d=32,v=parseInt(p.length/1024,10);if(v>=d){if(this.env.ieCompat!==!1)return this.env.silent||console.warn("Skipped data-uri embedding of %s because its size (%dKB) exceeds IE8-safe %dKB!",o,v,d),(new r.URL(i||t,this.currentFileInfo)).eval(this.env);this.env.silent||console.warn("WARNING: Embedding %s (%dKB) exceeds IE8's data-uri size limit of %dKB!",o,v,d)}p=f?p.toString("base64"):encodeURIComponent(p);var m="'data:"+s+","+p+"'";return new r.URL(new r.Anonymous(m))}},r._mime={_types:{".htm":"text/html",".html":"text/html",".gif":"image/gif",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png"},lookup:function(e){var i=n("path").extname(e),s=r._mime._types[i];if(s===t)throw new Error('Optional dependency "mime" is required for '+i);return s},charsets:{lookup:function(e){return e&&/^text\//.test(e)?"UTF-8":""}}};var i=[{name:"ceil"},{name:"floor"},{name:"sqrt"},{name:"abs"},{name:"tan",unit:""},{name:"sin",unit:""},{name:"cos",unit:""},{name:"atan",unit:"rad"},{name:"asin",unit:"rad"},{name:"acos",unit:"rad"}],s=function(e,t){return function(n){return t!=null&&(n=n.unify()),this._math(Math[e],t,n)}};for(var o=0;o<i.length;o++)r.functions[i[o].name]=s(i[o].name,i[o].unit);r.functionCall=function(e,t){this.env=e,this.currentFileInfo=t},r.functionCall.prototype=r.functions})(n("./tree")),function(e){e.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(n("./tree")),function(e){e.Alpha=function(e){this.value=e},e.Alpha.prototype={type:"Alpha",accept:function(e){this.value=e.visit(this.value)},eval:function(e){return this.value.eval&&(this.value=this.value.eval(e)),this},toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"}}}(n("../tree")),function(e){e.Anonymous=function(e){this.value=e.value||e},e.Anonymous.prototype={type:"Anonymous",toCSS:function(){return this.value},eval:function(){return this},compare:function(e){if(!e.toCSS)return-1;var t=this.toCSS(),n=e.toCSS();return t===n?0:t<n?-1:1}}}(n("../tree")),function(e){e.Assignment=function(e,t){this.key=e,this.value=t},e.Assignment.prototype={type:"Assignment",accept:function(e){this.value=e.visit(this.value)},toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(t){return this.value.eval?new e.Assignment(this.key,this.value.eval(t)):this}}}(n("../tree")),function(e){e.Call=function(e,t,n,r){this.name=e,this.args=t,this.index=n,this.currentFileInfo=r},e.Call.prototype={type:"Call",accept:function(e){this.args=e.visit(this.args)},eval:function(t){var n=this.args.map(function(e){return e.eval(t)}),r=this.name.toLowerCase(),i,s;if(r in e.functions)try{s=new e.functionCall(t,this.currentFileInfo),i=s[r].apply(s,n);if(i!=null)return i}catch(o){throw{type:o.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(o.message?": "+o.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new e.Anonymous(this.name+"("+n.map(function(e){return e.toCSS(t)}).join(", ")+")")},toCSS:function(e){return this.eval(e).toCSS()}}}(n("../tree")),function(e){e.Color=function(e,t){Array.isArray(e)?this.rgb=e:e.length==6?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),this.alpha=typeof t=="number"?t:1},e.Color.prototype={type:"Color",eval:function(){return this},luma:function(){return.2126*this.rgb[0]/255+.7152*this.rgb[1]/255+.0722*this.rgb[2]/255},toCSS:function(e,t){var n=e&&e.compress&&!t;if(this.alpha<1)return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(","+(n?"":" "))+")";var r=this.rgb.map(function(e){return e=Math.round(e),e=(e>255?255:e<0?0:e).toString(16),e.length===1?"0"+e:e}).join("");return n&&(r=r.split(""),r[0]==r[1]&&r[2]==r[3]&&r[4]==r[5]?r=r[0]+r[2]+r[4]:r=r.join("")),"#"+r},operate:function(t,n,r){var i=[];r instanceof e.Color||(r=r.toColor());for(var s=0;s<3;s++)i[s]=e.operate(t,n,this.rgb[s],r.rgb[s]);return new e.Color(i,this.alpha+r.alpha)},toHSL:function(){var e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,r=this.alpha,i=Math.max(e,t,n),s=Math.min(e,t,n),o,u,a=(i+s)/2,f=i-s;if(i===s)o=u=0;else{u=a>.5?f/(2-i-s):f/(i+s);switch(i){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4}o/=6}return{h:o*360,s:u,l:a,a:r}},toHSV:function(){var e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,r=this.alpha,i=Math.max(e,t,n),s=Math.min(e,t,n),o,u,a=i,f=i-s;i===0?u=0:u=f/i;if(i===s)o=0;else{switch(i){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4}o/=6}return{h:o*360,s:u,v:a,a:r}},toARGB:function(){var e=[Math.round(this.alpha*255)].concat(this.rgb);return"#"+e.map(function(e){return e=Math.round(e),e=(e>255?255:e<0?0:e).toString(16),e.length===1?"0"+e:e}).join("")},compare:function(e){return e.rgb?e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:-1:-1}}}(n("../tree")),function(e){e.Comment=function(e,t){this.value=e,this.silent=!!t},e.Comment.prototype={type:"Comment",toCSS:function(e){return e.compress?"":this.value},eval:function(){return this}}}(n("../tree")),function(e){e.Condition=function(e,t,n,r,i){this.op=e.trim(),this.lvalue=t,this.rvalue=n,this.index=r,this.negate=i},e.Condition.prototype={type:"Condition",accept:function(e){this.lvalue=e.visit(this.lvalue),this.rvalue=e.visit(this.rvalue)},eval:function(e){var t=this.lvalue.eval(e),n=this.rvalue.eval(e),r=this.index,i,i=function(e){switch(e){case"and":return t&&n;case"or":return t||n;default:if(t.compare)i=t.compare(n);else{if(!n.compare)throw{type:"Type",message:"Unable to perform comparison",index:r};i=n.compare(t)}switch(i){case-1:return e==="<"||e==="=<";case 0:return e==="="||e===">="||e==="=<";case 1:return e===">"||e===">="}}}(this.op);return this.negate?!i:i}}}(n("../tree")),function(e){e.Dimension=function(n,r){this.value=parseFloat(n),this.unit=r&&r instanceof e.Unit?r:new e.Unit(r?[r]:t)},e.Dimension.prototype={type:"Dimension",accept:function(e){this.unit=e.visit(this.unit)},eval:function(e){return this},toColor:function(){return new e.Color([this.value,this.value,this.value])},toCSS:function(e){if(e&&e.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var t=this.value,n=String(t);t!==0&&t<1e-6&&t>-0.000001&&(n=t.toFixed(20).replace(/0+$/,""));if(e&&e.compress){if(t===0&&!this.unit.isAngle())return n;t>0&&t<1&&(n=n.substr(1))}return n+this.unit.toCSS(e)},operate:function(t,n,r){var i=e.operate(t,n,this.value,r.value),s=this.unit.clone();if(n==="+"||n==="-"){if(s.numerator.length===0&&s.denominator.length===0)s.numerator=r.unit.numerator.slice(0),s.denominator=r.unit.denominator.slice(0);else if(r.unit.numerator.length!=0||s.denominator.length!=0){r=r.convertTo(this.unit.usedUnits());if(t.strictUnits&&r.unit.toString()!==s.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+s.toString()+"' and '"+r.unit.toString()+"'.");i=e.operate(t,n,this.value,r.value)}}else n==="*"?(s.numerator=s.numerator.concat(r.unit.numerator).sort(),s.denominator=s.denominator.concat(r.unit.denominator).sort(),s.cancel()):n==="/"&&(s.numerator=s.numerator.concat(r.unit.denominator).sort(),s.denominator=s.denominator.concat(r.unit.numerator).sort(),s.cancel());return new e.Dimension(i,s)},compare:function(t){if(t instanceof e.Dimension){var n=this.unify(),r=t.unify(),i=n.value,s=r.value;return s>i?-1:s<i?1:!r.unit.isEmpty()&&n.unit.compare(r.unit)!==0?-1:0}return-1},unify:function(){return this.convertTo({length:"m",duration:"s",angle:"rad"})},convertTo:function(t){var n=this.value,r=this.unit.clone(),i,s,o,u,a,f={};if(typeof t=="string"){for(i in e.UnitConversions)e.UnitConversions[i].hasOwnProperty(t)&&(f={},f[i]=t);t=f}for(s in t)t.hasOwnProperty(s)&&(a=t[s],o=e.UnitConversions[s],r.map(function(e,t){return o.hasOwnProperty(e)?(t?n/=o[e]/o[a]:n*=o[e]/o[a],a):e}));return r.cancel(),new e.Dimension(n,r)}},e.UnitConversions={length:{m:1,cm:.01,mm:.001,"in":.0254,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},e.Unit=function(e,t,n){this.numerator=e?e.slice(0).sort():[],this.denominator=t?t.slice(0).sort():[],this.backupUnit=n},e.Unit.prototype={type:"Unit",clone:function(){return new e.Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},toCSS:function(e){return this.numerator.length>=1?this.numerator[0]:this.denominator.length>=1?this.denominator[0]:(!e||!e.strictUnits)&&this.backupUnit?this.backupUnit:""},toString:function(){var e,t=this.numerator.join("*");for(e=0;e<this.denominator.length;e++)t+="/"+this.denominator[e];return t},compare:function(e){return this.is(e.toString())?0:-1},is:function(e){return this.toString()===e},isAngle:function(){return e.UnitConversions.angle.hasOwnProperty(this.toCSS())},isEmpty:function(){return this.numerator.length==0&&this.denominator.length==0},isSingular:function(){return this.numerator.length<=1&&this.denominator.length==0},map:function(e){var t;for(t=0;t<this.numerator.length;t++)this.numerator[t]=e(this.numerator[t],!1);for(t=0;t<this.denominator.length;t++)this.denominator[t]=e(this.denominator[t],!0)},usedUnits:function(){var t,n,r={};for(n in e.UnitConversions)e.UnitConversions.hasOwnProperty(n)&&(t=e.UnitConversions[n],this.map(function(e){return t.hasOwnProperty(e)&&!r[n]&&(r[n]=e),e}));return r},cancel:function(){var e={},t,n,r;for(n=0;n<this.numerator.length;n++)t=this.numerator[n],r||(r=t),e[t]=(e[t]||0)+1;for(n=0;n<this.denominator.length;n++)t=this.denominator[n],r||(r=t),e[t]=(e[t]||0)-1;this.numerator=[],this.denominator=[];for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(i>0)for(n=0;n<i;n++)this.numerator.push(t);else if(i<0)for(n=0;n<-i;n++)this.denominator.push(t)}this.numerator.length===0&&this.denominator.length===0&&r&&(this.backupUnit=r),this.numerator.sort(),this.denominator.sort()}}}(n("../tree")),function(e){e.Directive=function(t,n){this.name=t,Array.isArray(n)?(this.ruleset=new e.Ruleset([],n),this.ruleset.allowImports=!0):this.value=n},e.Directive.prototype={type:"Directive",accept:function(e){this.ruleset=e.visit(this.ruleset),this.value=e.visit(this.value)},toCSS:function(e){return this.ruleset?(this.ruleset.root=!0,this.name+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(t){var n=this;return this.ruleset&&(t.frames.unshift(this),n=new e.Directive(this.name),n.ruleset=this.ruleset.eval(t),t.frames.shift()),n},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(n("../tree")),function(e){e.Element=function(t,n,r){this.combinator=t instanceof e.Combinator?t:new e.Combinator(t),typeof n=="string"?this.value=n.trim():n?this.value=n:this.value="",this.index=r},e.Element.prototype={type:"Element",accept:function(e){this.combinator=e.visit(this.combinator),this.value=e.visit(this.value)},eval:function(t){return new e.Element(this.combinator,this.value.eval?this.value.eval(t):this.value,this.index)},toCSS:function(e){var t=this.value.toCSS?this.value.toCSS(e):this.value;return t==""&&this.combinator.value.charAt(0)=="&"?"":this.combinator.toCSS(e||{})+t}},e.Attribute=function(e,t,n){this.key=e,this.op=t,this.value=n},e.Attribute.prototype={type:"Attribute",accept:function(e){this.value=e.visit(this.value)},eval:function(t){return new e.Attribute(this.key.eval?this.key.eval(t):this.key,this.op,this.value&&this.value.eval?this.value.eval(t):this.value)},toCSS:function(e){var t=this.key.toCSS?this.key.toCSS(e):this.key;return this.op&&(t+=this.op,t+=this.value.toCSS?this.value.toCSS(e):this.value),"["+t+"]"}},e.Combinator=function(e){e===" "?this.value=" ":this.value=e?e.trim():""},e.Combinator.prototype={type:"Combinator",toCSS:function(e){return{"":""," ":" ",":":" :","+":e.compress?"+":" + ","~":e.compress?"~":" ~ ",">":e.compress?">":" > ","|":e.compress?"|":" | "}[this.value]}}}(n("../tree")),function(e){e.Expression=function(e){this.value=e},e.Expression.prototype={type:"Expression",accept:function(e){this.value=e.visit(this.value)},eval:function(t){var n,r=this.parens&&!this.parensInOp,i=!1;return r&&t.inParenthesis(),this.value.length>1?n=new e.Expression(this.value.map(function(e){return e.eval(t)})):this.value.length===1?(this.value[0].parens&&!this.value[0].parensInOp&&(i=!0),n=this.value[0].eval(t)):n=this,r&&t.outOfParenthesis(),this.parens&&this.parensInOp&&!t.isMathOn()&&!i&&(n=new e.Paren(n)),n},toCSS:function(e){return this.value.map(function(t){return t.toCSS?t.toCSS(e):""}).join(" ")},throwAwayComments:function(){this.value=this.value.filter(function(t){return!(t instanceof e.Comment)})}}}(n("../tree")),function(e){e.Extend=function(t,n,r){this.selector=t,this.option=n,this.index=r;switch(n){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}},e.Extend.prototype={type:"Extend",accept:function(e){this.selector=e.visit(this.selector)},eval:function(t){return new e.Extend(this.selector.eval(t),this.option,this.index)},clone:function(t){return new e.Extend(this.selector,this.option,this.index)},findSelfSelectors:function(e){var t=[],n;for(n=0;n<e.length;n++)t=t.concat(e[n].elements);this.selfSelectors=[{elements:t}]}}}(n("../tree")),function(e){e.Import=function(e,n,r,i,s){var o=this;this.options=r,this.index=i,this.path=e,this.features=n,this.currentFileInfo=s;if(this.options.less!==t)this.css=!this.options.less;else{var u=this.getPath();u&&/css([\?;].*)?$/.test(u)&&(this.css=!0)}},e.Import.prototype={type:"Import",accept:function(e){this.features=e.visit(this.features),this.path=e.visit(this.path),this.root=e.visit(this.root)},toCSS:function(e){var t=this.features?" "+this.features.toCSS(e):"";return this.css?"@import "+this.path.toCSS()+t+";\n":""},getPath:function(){if(this.path instanceof e.Quoted){var n=this.path.value;return this.css!==t||/(\.[a-z]*$)|([\?;].*)$/.test(n)?n:n+".less"}return this.path instanceof e.URL?this.path.value.value:null},evalForImport:function(t){return new e.Import(this.path.eval(t),this.features,this.options,this.index,this.currentFileInfo)},evalPath:function(t){var n=this.path.eval(t),r=this.currentFileInfo&&this.currentFileInfo.rootpath;if(r&&!(n instanceof e.URL)){var i=n.value;i&&t.isPathRelative(i)&&(n.value=r+i)}return n},eval:function(t){var n,r=this.features&&this.features.eval(t);if(this.skip)return[];if(this.css){var i=new e.Import(this.evalPath(t),r,this.options,this.index);if(!i.css&&this.error)throw this.error;return i}return n=new e.Ruleset([],this.root.rules.slice(0)),n.evalImports(t),this.features?new e.Media(n.rules,this.features.value):n.rules}}}(n("../tree")),function(e){e.JavaScript=function(e,t,n){this.escaped=n,this.expression=e,this.index=t},e.JavaScript.prototype={type:"JavaScript",eval:function(t){var n,r=this,i={},s=this.expression.replace(/@\{([\w-]+)\}/g,function(n,i){return e.jsify((new e.Variable("@"+i,r.index)).eval(t))});try{s=new Function("return ("+s+")")}catch(o){throw{message:"JavaScript evaluation error: `"+s+"`",index:this.index}}for(var u in t.frames[0].variables())i[u.slice(1)]={value:t.frames[0].variables()[u].value,toJS:function(){return this.value.eval(t).toCSS()}};try{n=s.call(i)}catch(o){throw{message:"JavaScript evaluation error: '"+o.name+": "+o.message+"'",index:this.index}}return typeof n=="string"?new e.Quoted('"'+n+'"',n,this.escaped,this.index):Array.isArray(n)?new e.Anonymous(n.join(", ")):new e.Anonymous(n)}}}(n("../tree")),function(e){e.Keyword=function(e){this.value=e},e.Keyword.prototype={type:"Keyword",eval:function(){return this},toCSS:function(){return this.value},compare:function(t){return t instanceof e.Keyword?t.value===this.value?0:1:-1}},e.True=new e.Keyword("true"),e.False=new e.Keyword("false")}(n("../tree")),function(e){e.Media=function(t,n){var r=this.emptySelectors();this.features=new e.Value(n),this.ruleset=new e.Ruleset(r,t),this.ruleset.allowImports=!0},e.Media.prototype={type:"Media",accept:function(e){this.features=e.visit(this.features),this.ruleset=e.visit(this.ruleset)},toCSS:function(e){var t=this.features.toCSS(e);return"@media "+t+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")},eval:function(t){t.mediaBlocks||(t.mediaBlocks=[],t.mediaPath=[]);var n=new e.Media([],[]);this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,n.debugInfo=this.debugInfo);var r=!1;t.strictMath||(r=!0,t.strictMath=!0);try{n.features=this.features.eval(t)}finally{r&&(t.strictMath=!1)}return t.mediaPath.push(n),t.mediaBlocks.push(n),t.frames.unshift(this.ruleset),n.ruleset=this.ruleset.eval(t),t.frames.shift(),t.mediaPath.pop(),t.mediaPath.length===0?n.evalTop(t):n.evalNested(t)},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var t=new e.Element("","&",0);return[new e.Selector([t])]},evalTop:function(t){var n=this;if(t.mediaBlocks.length>1){var r=this.emptySelectors();n=new e.Ruleset(r,t.mediaBlocks),n.multiMedia=!0}return delete t.mediaBlocks,delete t.mediaPath,n},evalNested:function(t){var n,r,i=t.mediaPath.concat([this]);for(n=0;n<i.length;n++)r=i[n].features instanceof e.Value?i[n].features.value:i[n].features,i[n]=Array.isArray(r)?r:[r];return this.features=new e.Value(this.permute(i).map(function(t){t=t.map(function(t){return t.toCSS?t:new e.Anonymous(t)});for(n=t.length-1;n>0;n--)t.splice(n,0,new e.Anonymous("and"));return new e.Expression(t)})),new e.Ruleset([],[])},permute:function(e){if(e.length===0)return[];if(e.length===1)return e[0];var t=[],n=this.permute(e.slice(1));for(var r=0;r<n.length;r++)for(var i=0;i<e[0].length;i++)t.push([e[0][i]].concat(n[r]));return t},bubbleSelectors:function(t){this.ruleset=new e.Ruleset(t.slice(0),[this.ruleset])}}}(n("../tree")),function(e){e.mixin={},e.mixin.Call=function(t,n,r,i,s){this.selector=new e.Selector(t),this.arguments=n,this.index=r,this.currentFileInfo=i,this.important=s},e.mixin.Call.prototype={type:"MixinCall",accept:function(e){this.selector=e.visit(this.selector),this.arguments=e.visit(this.arguments)},eval:function(t){var n,r,i,s=[],o=!1,u,a,f,l,c;i=this.arguments&&this.arguments.map(function(e){return{name:e.name,value:e.value.eval(t)}});for(u=0;u<t.frames.length;u++)if((n=t.frames[u].find(this.selector)).length>0){c=!0;for(a=0;a<n.length;a++){r=n[a],l=!1;for(f=0;f<t.frames.length;f++)if(!(r instanceof e.mixin.Definition)&&r===(t.frames[f].originalRuleset||t.frames[f])){l=!0;break}if(l)continue;if(r.matchArgs(i,t)){if(!r.matchCondition||r.matchCondition(i,t))try{Array.prototype.push.apply(s,r.eval(t,i,this.important).rules)}catch(h){throw{message:h.message,index:this.index,filename:this.currentFileInfo.filename,stack:h.stack}}o=!0}}if(o)return s}throw c?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(i?i.map(function(e){var t="";return e.name&&(t+=e.name+":"),e.value.toCSS?t+=e.value.toCSS():t+="???",t}).join(", "):"")+")`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}}},e.mixin.Definition=function(t,n,r,i,s){this.name=t,this.selectors=[new e.Selector([new e.Element(null,t)])],this.params=n,this.condition=i,this.variadic=s,this.arity=n.length,this.rules=r,this._lookups={},this.required=n.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:e},0),this.parent=e.Ruleset.prototype,this.frames=[]},e.mixin.Definition.prototype={type:"MixinDefinition",accept:function(e){this.params=e.visit(this.params),this.rules=e.visit(this.rules),this.condition=e.visit(this.condition)},toCSS:function(){return""},variable:function(e){return this.parent.variable.call(this,e)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(t,n,r,i){var s=new e.Ruleset(null,[]),o,u,a=this.params.slice(0),f,l,c,h,p,d;n=new e.evalEnv(n,[s].concat(n.frames));if(r){r=r.slice(0);for(f=0;f<r.length;f++){u=r[f];if(h=u&&u.name){p=!1;for(l=0;l<a.length;l++)if(!i[l]&&h===a[l].name){i[l]=u.value.eval(t),s.rules.unshift(new e.Rule(h,u.value.eval(t))),p=!0;break}if(p){r.splice(f,1),f--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+r[f].name+" not found"}}}}d=0;for(f=0;f<a.length;f++){if(i[f])continue;u=r&&r[d];if(h=a[f].name)if(a[f].variadic&&r){o=[];for(l=d;l<r.length;l++)o.push(r[l].value.eval(t));s.rules.unshift(new e.Rule(h,(new e.Expression(o)).eval(t)))}else{c=u&&u.value;if(c)c=c.eval(t);else{if(!a[f].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+r.length+" for "+this.arity+")"};c=a[f].value.eval(n),s.resetCache()}s.rules.unshift(new e.Rule(h,c)),i[f]=c}if(a[f].variadic&&r)for(l=d;l<r.length;l++)i[l]=r[l].value.eval(t);d++}return s},eval:function(t,n,r){var i=[],s=this.frames.concat(t.frames),o=this.evalParams(t,new e.evalEnv(t,s),n,i),u,a,f,l;return o.rules.unshift(new e.Rule("@arguments",(new e.Expression(i)).eval(t))),a=r?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),l=(new e.Ruleset(null,a)).eval(new e.evalEnv(t,[this,o].concat(s))),l.originalRuleset=this,l},matchCondition:function(t,n){return this.condition&&!this.condition.eval(new e.evalEnv(n,[this.evalParams(n,new e.evalEnv(n,this.frames.concat(n.frames)),t,[])].concat(n.frames)))?!1:!0},matchArgs:function(e,t){var n=e&&e.length||0,r,i;if(!this.variadic){if(n<this.required)return!1;if(n>this.params.length)return!1;if(this.required>0&&n>this.params.length)return!1}r=Math.min(n,this.arity);for(var s=0;s<r;s++)if(!this.params[s].name&&!this.params[s].variadic&&e[s].value.eval(t).toCSS()!=this.params[s].value.eval(t).toCSS())return!1;return!0}}}(n("../tree")),function(e){e.Negative=function(e){this.value=e},e.Negative.prototype={type:"Negative",accept:function(e){this.value=e.visit(this.value)},toCSS:function(e){return"-"+this.value.toCSS(e)},eval:function(t){return t.isMathOn()?(new e.Operation("*",[new e.Dimension(-1),this.value])).eval(t):new e.Negative(this.value.eval(t))}}}(n("../tree")),function(e){e.Operation=function(e,t,n){this.op=e.trim(),this.operands=t,this.isSpaced=n},e.Operation.prototype={type:"Operation",accept:function(e){this.operands=e.visit(this.operands)},eval:function(t){var n=this.operands[0].eval(t),r=this.operands[1].eval(t),i;if(t.isMathOn()){if(n instanceof e.Dimension&&r instanceof e.Color){if(this.op!=="*"&&this.op!=="+")throw{type:"Operation",message:"Can't substract or divide a color from a number"};i=r,r=n,n=i}if(!n.operate)throw{type:"Operation",message:"Operation on an invalid type"};return n.operate(t,this.op,r)}return new e.Operation(this.op,[n,r],this.isSpaced)},toCSS:function(e){var t=this.isSpaced?" ":"";return this.operands[0].toCSS()+t+this.op+t+this.operands[1].toCSS()}},e.operate=function(e,t,n,r){switch(t){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r}}}(n("../tree")),function(e){e.Paren=function(e){this.value=e},e.Paren.prototype={type:"Paren",accept:function(e){this.value=e.visit(this.value)},toCSS:function(e){return"("+this.value.toCSS(e).trim()+")"},eval:function(t){return new e.Paren(this.value.eval(t))}}}(n("../tree")),function(e){e.Quoted=function(e,t,n,r,i){this.escaped=n,this.value=t||"",this.quote=e.charAt(0),this.index=r,this.currentFileInfo=i},e.Quoted.prototype={type:"Quoted",toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(t){var n=this,r=this.value.replace(/`([^`]+)`/g,function(r,i){return(new e.JavaScript(i,n.index,!0)).eval(t).value}).replace(/@\{([\w-]+)\}/g,function(r,i){var s=(new e.Variable("@"+i,n.index,n.currentFileInfo)).eval(t,!0);return s instanceof e.Quoted?s.value:s.toCSS()});return new e.Quoted(this.quote+r+this.quote,r,this.escaped,this.index)},compare:function(e){if(!e.toCSS)return-1;var t=this.toCSS(),n=e.toCSS();return t===n?0:t<n?-1:1}}}(n("../tree")),function(e){e.Rule=function(t,n,r,i,s,o){this.name=t,this.value=n instanceof e.Value?n:new e.Value([n]),this.important=r?" "+r.trim():"",this.index=i,this.currentFileInfo=s,this.inline=o||!1,t.charAt(0)==="@"?this.variable=!0:this.variable=!1},e.Rule.prototype={type:"Rule",accept:function(e){this.value=e.visit(this.value)},toCSS:function(e){if(this.variable)return"";try{return this.name+(e.compress?":":": ")+this.value.toCSS(e)+this.important+(this.inline?"":";")}catch(t){throw t.index=this.index,t.filename=this.currentFileInfo.filename,t}},eval:function(t){var n=!1;this.name==="font"&&!t.strictMath&&(n=!0,t.strictMath=!0);try{return new e.Rule(this.name,this.value.eval(t),this.important,this.index,this.currentFileInfo,this.inline)}finally{n&&(t.strictMath=!1)}},makeImportant:function(){return new e.Rule(this.name,this.value,"!important",this.index,this.currentFileInfo,this.inline)}}}(n("../tree")),function(e){e.Ruleset=function(e,t,n){this.selectors=e,this.rules=t,this._lookups={},this.strictImports=n},e.Ruleset.prototype={type:"Ruleset",accept:function(e){this.selectors=e.visit(this.selectors),this.rules=e.visit(this.rules)},eval:function(t){var n=this.selectors&&this.selectors.map(function(e){return e.eval(t)}),r=new e.Ruleset(n,this.rules.slice(0),this.strictImports),i;r.originalRuleset=this,r.root=this.root,r.firstRoot=this.firstRoot,r.allowImports=this.allowImports,this.debugInfo&&(r.debugInfo=this.debugInfo),t.frames.unshift(r),t.selectors||(t.selectors=[]),t.selectors.unshift(this.selectors),(r.root||r.allowImports||!r.strictImports)&&r.evalImports(t);for(var s=0;s<r.rules.length;s++)r.rules[s]instanceof e.mixin.Definition&&(r.rules[s].frames=t.frames.slice(0));var o=t.mediaBlocks&&t.mediaBlocks.length||0;for(var s=0;s<r.rules.length;s++)r.rules[s]instanceof e.mixin.Call&&(i=r.rules[s].eval(t).filter(function(t){return t instanceof e.Rule&&t.variable?!r.variable(t.name):!0}),r.rules.splice.apply(r.rules,[s,1].concat(i)),s+=i.length-1,r.resetCache());for(var s=0,u;s<r.rules.length;s++)u=r.rules[s],u instanceof e.mixin.Definition||(r.rules[s]=u.eval?u.eval(t):u);t.frames.shift(),t.selectors.shift();if(t.mediaBlocks)for(var s=o;s<t.mediaBlocks.length;s++)t.mediaBlocks[s].bubbleSelectors(n);return r},evalImports:function(t){var n,r;for(n=0;n<this.rules.length;n++)this.rules[n]instanceof e.Import&&(r=this.rules[n].eval(t),typeof r.length=="number"?(this.rules.splice.apply(this.rules,[n,1].concat(r)),n+=r.length-1):this.rules.splice(n,1,r),this.resetCache())},makeImportant:function(){return new e.Ruleset(this.selectors,this.rules.map(function(e){return e.makeImportant?e.makeImportant():e}),this.strictImports)},matchArgs:function(e){return!e||e.length===0},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,n){return n instanceof e.Rule&&n.variable===!0&&(t[n.name]=n),t},{})},variable:function(e){return this.variables()[e]},rulesets:function(){return this.rules.filter(function(t){return t instanceof e.Ruleset||t instanceof e.mixin.Definition})},find:function(t,n){n=n||this;var r=[],i,s,o=t.toCSS();return o in this._lookups?this._lookups[o]:(this.rulesets().forEach(function(i){if(i!==n)for(var o=0;o<i.selectors.length;o++)if(s=t.match(i.selectors[o])){t.elements.length>i.selectors[o].elements.length?Array.prototype.push.apply(r,i.find(new e.Selector(t.elements.slice(1)),n)):r.push(i);break}}),this._lookups[o]=r)},toCSS:function(t){var n=[],r=[],i=[],s=[],o,u,a;for(var f=0;f<this.rules.length;f++){a=this.rules[f];if(a.rules||a instanceof e.Media)s.push(a.toCSS(t));else if(a instanceof e.Directive){var l=a.toCSS(t);if(a.name==="@charset"){if(t.charset){a.debugInfo&&(s.push(e.debugInfo(t,a)),s.push((new e.Comment("/* "+l.replace(/\n/g,"")+" */\n")).toCSS(t)));continue}t.charset=!0}s.push(l)}else if(a instanceof e.Comment)a.silent||(this.root?s.push(a.toCSS(t)):r.push(a.toCSS(t)));else if(a.toCSS&&!a.variable){if(this.firstRoot&&a instanceof e.Rule)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:a.index,filename:a.currentFileInfo?a.currentFileInfo.filename:null};r.push(a.toCSS(t))}else a.value&&!a.variable&&r.push(a.value.toString())}t.compress&&r.length&&(a=r[r.length-1],a.charAt(a.length-1)===";"&&(r[r.length-1]=a.substring(0,a.length-1))),s=s.join("");if(this.root)n.push(r.join(t.compress?"":"\n"));else if(r.length>0){u=e.debugInfo(t,this),o=this.paths.map(function(e){return e.map(function(e){return e.toCSS(t)}).join("").trim()}).join(t.compress?",":",\n");for(var f=r.length-1;f>=0;f--)(r[f].slice(0,2)==="/*"||i.indexOf(r[f])===-1)&&i.unshift(r[f]);r=i,n.push(u+o+(t.compress?"{":" {\n  ")+r.join(t.compress?"":"\n  ")+(t.compress?"}":"\n}\n"))}return n.push(s),n.join("")+(t.compress?"\n":"")},joinSelectors:function(e,t,n){for(var r=0;r<n.length;r++)this.joinSelector(e,t,n[r])},joinSelector:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;for(i=0;i<r.elements.length;i++)f=r.elements[i],f.value==="&"&&(u=!0);if(!u){if(n.length>0)for(i=0;i<n.length;i++)t.push(n[i].concat(r));else t.push([r]);return}g=[],a=[[]];for(i=0;i<r.elements.length;i++){f=r.elements[i];if(f.value!=="&")g.push(f);else{y=[],g.length>0&&this.mergeElementsOnToSelectors(g,a);for(s=0;s<a.length;s++){l=a[s];if(n.length==0)l.length>0&&(l[0].elements=l[0].elements.slice(0),l[0].elements.push(new e.Element(f.combinator,"",0))),y.push(l);else for(o=0;o<n.length;o++)c=n[o],h=[],p=[],v=!0,l.length>0?(h=l.slice(0),m=h.pop(),d=new e.Selector(m.elements.slice(0),r.extendList),v=!1):d=new e.Selector([],r.extendList),c.length>1&&(p=p.concat(c.slice(1))),c.length>0&&(v=!1,d.elements.push(new e.Element(f.combinator,c[0].elements[0].value,0)),d.elements=d.elements.concat(c[0].elements.slice(1))),v||h.push(d),h=h.concat(p),y.push(h)}a=y,g=[]}}g.length>0&&this.mergeElementsOnToSelectors(g,a);for(i=0;i<a.length;i++)a[i].length>0&&t.push(a[i])},mergeElementsOnToSelectors:function(t,n){var r,i,s;if(n.length==0){n.push([new e.Selector(t)]);return}for(r=0;r<n.length;r++)i=n[r],i.length>0?i[i.length-1]=new e.Selector(i[i.length-1].elements.concat(t),i[i.length-1].extendList):i.push(new e.Selector(t))}}}(n("../tree")),function(e){e.Selector=function(e,t){this.elements=e,this.extendList=t||[]},e.Selector.prototype={type:"Selector",accept:function(e){this.elements=e.visit(this.elements),this.extendList=e.visit(this.extendList)},match:function(e){var t=this.elements,n=t.length,r,i,s,o;r=e.elements.slice(e.elements.length&&e.elements[0].value==="&"?1:0),i=r.length,s=Math.min(n,i);if(i===0||n<i)return!1;for(o=0;o<s;o++)if(t[o].value!==r[o].value)return!1;return!0},eval:function(t){return new e.Selector(this.elements.map(function(e){return e.eval(t)}),this.extendList.map(function(e){return e.eval(t)}))},toCSS:function(e){return this._css?this._css:(this.elements[0].combinator.value===""?this._css=" ":this._css="",this._css+=this.elements.map(function(t){return typeof t=="string"?" "+t.trim():t.toCSS(e)}).join(""),this._css)}}}(n("../tree")),function(e){e.UnicodeDescriptor=function(e){this.value=e},e.UnicodeDescriptor.prototype={type:"UnicodeDescriptor",toCSS:function(e){return this.value},eval:function(){return this}}}(n("../tree")),function(e){e.URL=function(e,t){this.value=e,this.currentFileInfo=t},e.URL.prototype={type:"Url",accept:function(e){this.value=e.visit(this.value)},toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(t){var n=this.value.eval(t),r;return r=this.currentFileInfo&&this.currentFileInfo.rootpath,r&&typeof n.value=="string"&&t.isPathRelative(n.value)&&(n.quote||(r=r.replace(/[\(\)'"\s]/g,function(e){return"\\"+e})),n.value=r+n.value),new e.URL(n,null)}}}(n("../tree")),function(e){e.Value=function(e){this.value=e},e.Value.prototype={type:"Value",accept:function(e){this.value=e.visit(this.value)},eval:function(t){return this.value.length===1?this.value[0].eval(t):new e.Value(this.value.map(function(e){return e.eval(t)}))},toCSS:function(e){return this.value.map(function(t){return t.toCSS(e)}).join(e.compress?",":", ")}}}(n("../tree")),function(e){e.Variable=function(e,t,n){this.name=e,this.index=t,this.currentFileInfo=n},e.Variable.prototype={type:"Variable",eval:function(t){var n,r,i=this.name;i.indexOf("@@")==0&&(i="@"+(new e.Variable(i.slice(1))).eval(t).value);if(this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+i,filename:this.currentFileInfo.file,index:this.index};this.evaluating=!0;if(n=e.find(t.frames,function(e){if(r=e.variable(i))return r.value.eval(t)}))return this.evaluating=!1,n;throw{type:"Name",message:"variable "+i+" is undefined",filename:this.currentFileInfo.filename,index:this.index}}}}(n("../tree")),function(e){e.debugInfo=function(t,n){var r="";if(t.dumpLineNumbers&&!t.compress)switch(t.dumpLineNumbers){case"comments":r=e.debugInfo.asComment(n);break;case"mediaquery":r=e.debugInfo.asMediaQuery(n);break;case"all":r=e.debugInfo.asComment(n)+e.debugInfo.asMediaQuery(n)}return r},e.debugInfo.asComment=function(e){return"/* line "+e.debugInfo.lineNumber+", "+e.debugInfo.fileName+" */\n"},e.debugInfo.asMediaQuery=function(e){return"@media -sass-debug-info{filename{font-family:"+("file://"+e.debugInfo.fileName).replace(/([.:/\\])/g,function(e){return e=="\\"&&(e="/"),"\\"+e})+"}line{font-family:\\00003"+e.debugInfo.lineNumber+"}}\n"},e.find=function(e,t){for(var n=0,r;n<e.length;n++)if(r=t.call(e,e[n]))return r;return null},e.jsify=function(e){return Array.isArray(e.value)&&e.value.length>1?"["+e.value.map(function(e){return e.toCSS(!1)}).join(", ")+"]":e.toCSS(!1)}}(n("./tree")),function(e){var t=["paths","optimization","files","contents","relativeUrls","strictImports","dumpLineNumbers","compress","processImports","syncImport","mime","currentFileInfo"];e.parseEnv=function(e){r(e,this,t),this.contents||(this.contents={}),this.files||(this.files={});if(!this.currentFileInfo){var n=e&&e.filename||"input",i=n.replace(/[^\/\\]*$/,"");e&&(e.filename=null),this.currentFileInfo={filename:n,relativeUrls:this.relativeUrls,rootpath:e&&e.rootpath||"",currentDirectory:i,entryPath:i,rootFilename:n}}},e.parseEnv.prototype.toSheet=function(t){var n=new e.parseEnv(this);return n.href=t,n.type=this.mime,n};var n=["silent","verbose","compress","yuicompress","ieCompat","strictMath","strictUnits"];e.evalEnv=function(e,t){r(e,this,n),this.frames=t||[]},e.evalEnv.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},e.evalEnv.prototype.outOfParenthesis=function(){this.parensStack.pop()},e.evalEnv.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},e.evalEnv.prototype.isPathRelative=function(e){return!/^(?:[a-z-]+:|\/)/.test(e)};var r=function(e,t,n){if(!e)return;for(var r=0;r<n.length;r++)e.hasOwnProperty(n[r])&&(t[n[r]]=e[n[r]])}}(n("./tree")),function(e){e.visitor=function(e){this._implementation=e},e.visitor.prototype={visit:function(e){if(e instanceof Array)return this.visitArray(e);if(!e||!e.type)return e;var t="visit"+e.type,n=this._implementation[t],r,i;return n&&(r={visitDeeper:!0},i=n.call(this._implementation,e,r),this._implementation.isReplacing&&(e=i)),(!r||r.visitDeeper)&&e&&e.accept&&e.accept(this),t+="Out",this._implementation[t]&&this._implementation[t](e),e},visitArray:function(e){var t,n=[];for(t=0;t<e.length;t++){var r=this.visit(e[t]);r instanceof Array?n=n.concat(r):n.push(r)}return this._implementation.isReplacing?n:e}}}(n("./tree")),function(e){e.importVisitor=function(t,n,r){this._visitor=new e.visitor(this),this._importer=t,this._finish=n,this.env=r||new e.evalEnv,this.importCount=0},e.importVisitor.prototype={isReplacing:!0,run:function(e){var t;try{this._visitor.visit(e)}catch(n){t=n}this.isFinished=!0,this.importCount===0&&this._finish(t)},visitImport:function(t,n){var r=this,i;if(!t.css){try{i=t.evalForImport(this.env)}catch(s){s.filename||(s.index=t.index,s.filename=t.currentFileInfo.filename),t.css=!0,t.error=s}if(i&&!i.css){t=i,this.importCount++;var o=new e.evalEnv(this.env,this.env.frames.slice(0));this._importer.push(t.getPath(),t.currentFileInfo,function(n,i,s){n&&!n.filename&&(n.index=t.index,n.filename=t.currentFileInfo.filename),s&&!t.options.multiple&&(t.skip=s);var u=function(e){r.importCount--,r.importCount===0&&r.isFinished&&r._finish(e)};i?(t.root=i,(new e.importVisitor(r._importer,u,o)).run(i)):u()})}}return n.visitDeeper=!1,t},visitRule:function(e,t){return t.visitDeeper=!1,e},visitDirective:function(e,t){return this.env.frames.unshift(e),e},visitDirectiveOut:function(e){this.env.frames.shift()},visitMixinDefinition:function(e,t){return this.env.frames.unshift(e),e},visitMixinDefinitionOut:function(e){this.env.frames.shift()},visitRuleset:function(e,t){return this.env.frames.unshift(e),e},visitRulesetOut:function(e){this.env.frames.shift()},visitMedia:function(e,t){return this.env.frames.unshift(e.ruleset),e},visitMediaOut:function(e){this.env.frames.shift()}}}(n("./tree")),function(e){e.joinSelectorVisitor=function(){this.contexts=[[]],this._visitor=new e.visitor(this)},e.joinSelectorVisitor.prototype={run:function(e){return this._visitor.visit(e)},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){var n=this.contexts[this.contexts.length-1],r=[];this.contexts.push(r),e.root||(e.joinSelectors(r,n,e.selectors),e.paths=r)},visitRulesetOut:function(e){this.contexts.length=this.contexts.length-1},visitMedia:function(e,t){var n=this.contexts[this.contexts.length-1];e.ruleset.root=n.length===0||n[0].multiMedia}}}(n("./tree")),function(e){e.extendFinderVisitor=function(){this._visitor=new e.visitor(this),this.contexts=[],this.allExtendsStack=[[]]},e.extendFinderVisitor.prototype={run:function(e){return e=this._visitor.visit(e),e.allExtends=this.allExtendsStack[0],e},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(t,n){if(t.root)return;var r,i,s,o=[],u;for(r=0;r<t.rules.length;r++)t.rules[r]instanceof e.Extend&&o.push(t.rules[r]);for(r=0;r<t.paths.length;r++){var a=t.paths[r],f=a[a.length-1];u=f.extendList.slice(0).concat(o).map(function(e){return e.clone()});for(i=0;i<u.length;i++)this.foundExtends=!0,s=u[i],s.findSelfSelectors(a),s.ruleset=t,i===0&&(s.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(s)}this.contexts.push(t.selectors)},visitRulesetOut:function(e){e.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitMediaOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitDirectiveOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}},e.processExtendsVisitor=function(){this._visitor=new e.visitor(this)},e.processExtendsVisitor.prototype={run:function(t){var n=new e.extendFinderVisitor;return n.run(t),n.foundExtends?(t.allExtends=t.allExtends.concat(this.doExtendChaining(t.allExtends,t.allExtends)),this.allExtendsStack=[t.allExtends],this._visitor.visit(t)):t},doExtendChaining:function(t,n,r){var i,s,o,u=[],a,f=this,l,c,h,p;r=r||0;for(i=0;i<t.length;i++)for(s=0;s<n.length;s++){c=t[i],h=n[s];if(this.inInheritanceChain(h,c))continue;l=[h.selfSelectors[0]],o=f.findMatch(c,l),o.length&&c.selfSelectors.forEach(function(t){a=f.extendSelector(o,l,t),p=new e.Extend(h.selector,h.option,0),p.selfSelectors=a,a[a.length-1].extendList=[p],u.push(p),p.ruleset=h.ruleset,p.parents=[h,c],h.firstExtendOnThisSelectorPath&&(p.firstExtendOnThisSelectorPath=!0,h.ruleset.paths.push(a))})}if(u.length){this.extendChainCount++;if(r>100){var d="{unable to calculate}",v="{unable to calculate}";try{d=u[0].selfSelectors[0].toCSS(),v=u[0].selector.toCSS()}catch(m){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+d+":extend("+v+")"}}return u.concat(f.doExtendChaining(u,n,r+1))}return u},inInheritanceChain:function(e,t){if(e===t)return!0;if(t.parents){if(this.inInheritanceChain(e,t.parents[0]))return!0;if(this.inInheritanceChain(e,t.parents[1]))return!0}return!1},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitSelector:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){if(e.root)return;var n,r,i,s=this.allExtendsStack[this.allExtendsStack.length-1],o=[],u=this,a;for(i=0;i<s.length;i++)for(r=0;r<e.paths.length;r++){a=e.paths[r];if(a[a.length-1].extendList.length)continue;n=this.findMatch(s[i],a),n.length&&s[i].selfSelectors.forEach(function(e){o.push(u.extendSelector(n,a,e))})}e.paths=e.paths.concat(o)},findMatch:function(e,t){var n,r,i,s,o,u,a=this,f=e.selector.elements,l=[],c,h=[];for(n=0;n<t.length;n++){r=t[n];for(i=0;i<r.elements.length;i++){s=r.elements[i],(e.allowBefore||n==0&&i==0)&&l.push({pathIndex:n,index:i,matched:0,initialCombinator:s.combinator});for(u=0;u<l.length;u++)c=l[u],o=s.combinator.value,o==""&&i===0&&(o=" "),!a.isElementValuesEqual(f[c.matched].value,s.value)||c.matched>0&&f[c.matched].combinator.value!==o?c=null:c.matched++,c&&(c.finished=c.matched===f.length,c.finished&&!e.allowAfter&&(i+1<r.elements.length||n+1<t.length)&&(c=null)),c?c.finished&&(c.length=f.length,c.endPathIndex=n,c.endPathElementIndex=i+1,l.length=0,h.push(c)):(l.splice(u,1),u--)}}return h},isElementValuesEqual:function(t,n){if(typeof t=="string"||typeof n=="string")return t===n;if(t instanceof e.Attribute)return t.op!==n.op||t.key!==n.key?!1:!t.value||!n.value?t.value||n.value?!1:!0:(t=t.value.value||t.value,n=n.value.value||n.value,t===n);return!1},extendSelector:function(t,n,r){var i=0,s=0,o=[],u,a,f,l;for(u=0;u<t.length;u++)l=t[u],a=n[l.pathIndex],f=new e.Element(l.initialCombinator,r.elements[0].value,r.elements[0].index),l.pathIndex>i&&s>0&&(o[o.length-1].elements=o[o.length-1].elements.concat(n[i].elements.slice(s)),s=0,i++),o=o.concat(n.slice(i,l.pathIndex)),o.push(new e.Selector(a.elements.slice(s,l.index).concat([f]).concat(r.elements.slice(1)))),i=l.endPathIndex,s=l.endPathElementIndex,s>=a.elements.length&&(s=0,i++);return i<n.length&&s>0&&(o[o.length-1].elements=o[o.length-1].elements.concat(n[i].elements.slice(s)),s=0,i++),o=o.concat(n.slice(i,n.length)),o},visitRulesetOut:function(e){},visitMedia:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)},visitMediaOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)},visitDirectiveOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}}}(n("./tree"));var o=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);r.env=r.env||(location.hostname=="127.0.0.1"||location.hostname=="0.0.0.0"||location.hostname=="localhost"||location.port.length>0||o?"development":"production"),r.async=r.async||!1,r.fileAsync=r.fileAsync||!1,r.poll=r.poll||(o?1e3:1500);if(r.functions)for(var u in r.functions)r.tree.functions[u]=r.functions[u];var a=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);a&&(r.dumpLineNumbers=a[1]),r.watch=function(){return r.watchMode||(r.env="development",f()),this.watchMode=!0},r.unwatch=function(){return clearInterval(r.watchTimer),this.watchMode=!1},/!watch/.test(location.hash)&&r.watch();var l=null;if(r.env!="development")try{l=typeof e.localStorage=="undefined"?null:e.localStorage}catch(c){}var h=document.getElementsByTagName("link"),p=/^text\/(x-)?less$/;r.sheets=[];for(var d=0;d<h.length;d++)(h[d].rel==="stylesheet/less"||h[d].rel.match(/stylesheet/)&&h[d].type.match(p))&&r.sheets.push(h[d]);var v="";r.modifyVars=function(e){var t=v;for(var n in e)t+=(n.slice(0,1)==="@"?"":"@")+n+": "+(e[n].slice(-1)===";"?e[n]:e[n]+";");(new r.Parser(new r.tree.parseEnv(r))).parse(t,function(e,t){e?k(e,"session_cache"):S(t.toCSS(r),r.sheets[r.sheets.length-1])})},r.refresh=function(e){var t,n;t=n=new Date,g(function(e,i,s,o,u){if(e)return k(e,o.href);u.local?C("loading "+o.href+" from cache."):(C("parsed "+o.href+" successfully."),S(i.toCSS(r),o,u.lastModified)),C("css for "+o.href+" generated in "+(new Date-n)+"ms"),u.remaining===0&&C("css generated in "+(new Date-t)+"ms"),n=new Date},e),m()},r.refreshStyles=m,r.refresh(r.env==="development"),typeof define=="function"&&define.amd&&define("packages/core/src/lib/less",[],function(){return r})}(window),define("packages/core/src/packageCatalog",["underscore","jquery","require","logger","./errorHandler","./app","./strings","./resourceLoader","./lib/semver","./host","./lib/less"],function(e,t,n,r,i,s,o,u,a,f,l){function c(e){e=e||{},this.options=e,this.logger=e.logger||r,this.resourceLoader=e.resourceLoader||new u,this.consoleError=e.consoleError||function(){console.error.apply(console,arguments)},this.config=e.config||{}}return o=new o,c.sortByLeastDependent=function(t){function r(i){if(i.evaluated)return;i.evaluated=!0,e.each(i.dependencies,function(n,i){var s=e.findWhere(t,{name:i});s&&r(s)}),n.push(i)}var n=[];return e.each(t,function(e){r(e)}),n},c.prototype.getPackagePath=function(e){var t=this.config.packagePaths&&this.config.packagePaths[e];return t&&t.slice(-1)!=="/"&&(t+="/"),t||"packages/"+e+"/"},c.prototype.getPackages=function(){return this.packages},c.prototype.load=function(s){function b(t){if(!e.some(g,function(e){return t.filename.match(new RegExp(e.manifest.name+"\\.js$"))}))return;var n=o.format(v.packageLoadFail,{pkgName:t.filename});u.logger.log("Failed to load package "+t.filename+". Syntax error on line "+t.lineno+": "+t.message,u.logger.ERROR),p.isPresent()&&p.ThrowNativeException(n),m.renderErrorPage(n)}function E(t){function s(){i.loaded=!0;if(e.every(g,function(e){return e.loaded})){window.removeEventListener("error",b);var t=e.filter(g,function(e){return e.manifest.main}),n=c.sortByLeastDependent(e.pluck(t,"manifest"));e.each(g,function(e){e.manifest.evaluated=!1});var s=function(){var t=e.find(n,function(e){return!e.entryLoaded});t?y([t.main],function(e){e&&Object.freeze(e),define(t.name,e),t.entryLoaded=!0,s()}):y(e.pluck(n,"name"),function(){h.resolve()},function(e){u.logger.log(e,r.CRITICAL),u.consoleError(e),e.stack&&(u.logger.log(e.stack,r.CRITICAL),u.consoleError(e.stack))})};s()}}var n=typeof t=="string"?t:t.target.getAttribute("data-package-name"),i=g[n];!i.loaded&&i.manifest.resources?y(["json!"+i.path+i.manifest.resources],function(e){function t(){var e=o.format(v.packageResourceLoadFail,{pkgName:n});u.logger.log(n+" package resources could not be found or timed out while loading",u.logger.ERROR),p.isPresent()&&p.ThrowNativeException(e),m.renderErrorPage(e)}u.resourceLoader.loadResources(i.path,e).then(s,t)}):s()}function S(e){var t=o.format(v.packageLoadFail,{pkgName:e.target.src});u.logger.log("Package file "+e.target.src+" could not be found or timed out while loading",u.logger.ERROR),p.isPresent()&&p.ThrowNativeException(t),m.renderErrorPage(t)}if(!s||!s.packages)throw"No packages selected for loading";var u=this,h=new t.Deferred,p=u.options.host||f,d=u.options.appendChild||function(e){document.head.appendChild(e)},v=o.translate("core.startup"),m=u.options.errorHandler||new i,g=this.packages=this.packages||{};e.defaults(g,s.packages);var y=u.options.resolver||n;window.addEventListener("error",b);var w=function(r){var i=u.options.less||l,s=e.find(g,function(e){return!e.manifest});s?y(["json!"+s.path+"package"],function(o){s.manifest=o,s.manifest.main&&!s.manifest.mainAdjusted&&(s.manifest.main=s.path+o.main,s.manifest.mainAdjusted=!0);if(s.manifest.config&&s.manifest.config.stylesheet){var a=n.toUrl(s.path+s.manifest.config.stylesheet);if(a.substr(-5)===".less"){if(!i.sheets.some(function(e){return e.originalHref===a})){var f=t('<link rel="stylesheet/less" type="text/css" href="'+a+'" />');f[0].originalHref=a,i.sheets.push(f[0])}}else d(t('<link rel="stylesheet" type="text/css" href="'+a+'" />')[0])}e.each(o.dependencies,function(e,t){g[t]=g[t]||{path:u.getPackagePath(t)}}),w(r)},function(e){var t=e.type==="badVersion"&&v.packageVersionFail||v.manifestLoadFail;t=o.format(t,{fileName:s.path+"package.json",pkg:e.pkg,dep:e.dep}),u.logger.log(o.format("Failed to load manifest. {0}, {1}",[s.path+"package.json",t]),u.logger.ERROR),e.message&&u.logger.log(e.message),p.isPresent()&&p.ThrowNativeException(t),m.renderErrorPage(t)}):(i.sheets.some(function(e){return!e.processed})&&(i.refresh(),i.sheets.forEach(function(e){e.processed=!0})),r())};return w(function(){e.each(e.pluck(g,"manifest"),function(t,n,r){e.each(t.dependencies,function(n,i){if(!e.any(r,function(e){return e.name===i&&a.satisfies(e.version,n)}))throw{type:"badVersion",dep:i,pkg:t.name}})}),e.size(g)===0&&h.resolve(),e.each(g,function(e,t){if(!e.loaded&&e.manifest.build&&t!=="core"){var r=document.createElement("script");r.onload=E,r.onerror=S,r.syntaxError=b,r.async=!0,r.setAttribute("data-requiremodule",e.path+t),r.setAttribute("data-package-name",t),r.src=n.toUrl(e.path+t+".js"),d(r)}else E(t)})}),h},c}),define("packages/core/src/platformDetector",[],function(){function e(t){t=t||{},this.platforms=t.platforms||e.platformConfig;if(!this.platforms)throw"Platforms not provided to PlatformDetector"}return e.prototype.detect=function(e){e||(e=navigator.userAgent.toLowerCase()),Object.keys(this.platforms).some(function(t){var n=this.platforms[t];for(var r=0;r<n.length;r++){var i=new RegExp(n[r].regex,"i");i.test(e)&&(this._type=t,this._device=n[r].name)}},this),this._type||(this._type=this._device="desktop")},e.prototype.type=function(){return this._type},e.prototype.device=function(){return this._device},e}),function(e,t){typeof define=="function"&&define.amd?define("packages/core/src/lib/globalize/plural",["../cldr","../globalize","../cldr/event"],t):typeof exports=="object"?module.exports=t(require("cldrjs"),require("globalize")):t(e.Cldr,e.Globalize)}(this,function(e,t){var n=t._formatMessage,r=t._validate,i=t._validateCldr,s=t._validateDefaultLocale,o=t._validateParameterPresence,u=t._validateParameterType,a=t._validateParameterTypePlainObject,f=function(e,t,n){r("E_PAR_MISSING_KEY","Parameter `{name}` misses key `{key}`",e===undefined||n in e,{key:n,name:"messageData"})},l=function(e,t){u(e,t,e===undefined||typeof e=="number","Number")},c=function(){function e(e,t){function L(){}function A(e){return function(){var t,n;for(t=0;t<e.length;t++){n=e[t]();if(n!==null)return n}return null}}function O(e){var t,r,i=n,s=[];for(t=0;t<e.length;t++){r=e[t]();if(r===null)return n=i,null;s.push(r)}return s}function M(e,t){return function(){var r=n,i=[],s=t();while(s!==null)i.push(s),s=t();return i.length<e?(n=r,null):i}}function _(t){var r=t.length;return function(){var i=null;return e.substr(n,r)===t&&(i=t,n+=r),i}}function D(t){return function(){var r=e.substr(n).match(t);return r===null?null:(n+=r[0].length,r[0])}}function P(){var e=l();return e===null?(L(" -- failed i",parseInt(t,10)),e):(e=parseInt(t,10),L(" -- passed i ",e),e)}function H(){var e=f();return e===null?(L(" -- failed n ",t),e):(e=parseFloat(t,10),L(" -- passed n ",e),e)}function B(){var e=c();return e===null?(L(" -- failed f ",t),e):(e=(t+".").split(".")[1]||0,L(" -- passed f ",e),e)}function j(){var e=h();return e===null?(L(" -- failed t ",t),e):(e=(t+".").split(".")[1].replace(/0$/,"")||0,L(" -- passed t ",e),e)}function F(){var e=p();return e===null?(L(" -- failed v ",t),e):(e=(t+".").split(".")[1].length||0,L(" -- passed v ",e),e)}function I(){var e=d();return e===null?(L(" -- failed w ",t),e):(e=(t+".").split(".")[1].replace(/0$/,"").length||0,L(" -- passed w ",e),e)}function q(){var e=O([r,u,A([b,w]),u,a]);return e===null?(L(" -- failed mod"),null):(L(" -- passed "+parseInt(e[0],10)+" "+e[2]+" "+parseInt(e[4],10)),parseFloat(e[0])%parseInt(e[4],10))}function R(){var e=O([u,E]);return e===null?(L(" -- failed not"),null):e[1]}function U(){var e=O([i,u,A([v]),u,a]);return e!==null?(L(" -- passed is : "+e[0]+" == "+parseInt(e[4],10)),e[0]===parseInt(e[4],10)):(L(" -- failed is"),null)}function z(){var e=O([i,u,A([m,g]),u,a]);return e!==null?(L(" -- passed isnot: "+e[0]+" != "+parseInt(e[4],10)),e[0]!==parseInt(e[4],10)):(L(" -- failed isnot"),null)}function W(){var e,t,n=O([i,u,g,u,X]);if(n!==null){L(" -- passed not_in: "+n[0]+" != "+n[4]),t=n[4];for(e=0;e<t.length;e++)if(parseInt(t[e],10)===parseInt(n[0],10))return!1;return!0}return L(" -- failed not_in"),null}function X(){var e=O([A([$,a]),M(0,V)]),t=[];return e!==null?(t=t.concat(e[0]),e[1][0]&&(t=t.concat(e[1][0])),t):(L(" -- failed rangeList"),null)}function V(){var e=O([N,X]);return e!==null?e[1]:(L(" -- failed rangeTail"),null)}function $(){var e,t,n,r,i=O([a,T,a]);if(i!==null){L(" -- passed range"),t=[],n=parseInt(i[0],10),r=parseInt(i[2],10);for(e=n;e<=r;e++)t.push(e);return t}return L(" -- failed range"),null}function J(){var e,t,n;e=O([i,M(0,R),u,A([S,y]),u,X]);if(e!==null){L(" -- passed _in:"+e),t=e[5];for(n=0;n<t.length;n++)if(parseInt(t[n],10)===parseFloat(e[0]))return e[1][0]!=="not";return e[1][0]==="not"}return L(" -- failed _in "),null}function K(){var e,t;return t=O([i,M(0,R),u,x,u,X]),t!==null?(L(" -- passed within"),e=t[5],t[0]>=parseInt(e[0],10)&&t[0]<parseInt(e[e.length-1],10)?t[1][0]!=="not":t[1][0]==="not"):(L(" -- failed within "),null)}function Q(){var e,t=O([s,M(0,G)]);if(t){if(!t[0])return!1;for(e=0;e<t[1].length;e++)if(!t[1][e])return!1;return!0}return L(" -- failed and"),null}function G(){var e=O([u,k,u,s]);return e!==null?(L(" -- passed andTail"+e),e[3]):(L(" -- failed andTail"),null)}function Y(){var e=O([u,C,u,Q]);return e!==null?(L(" -- passed orTail: "+e[3]),e[3]):(L(" -- failed orTail"),null)}function Z(){var e,t=O([Q,M(0,Y)]);if(t){for(e=0;e<t[1].length;e++)if(t[1][e])return!0;return t[0]}return!1}e=e.split("@")[0].replace(/^\s*/,"").replace(/\s*$/,"");if(!e.length)return!0;var n=0,r,i,s,o,u=D(/^\s+/),a=D(/^\d+/),f=_("n"),l=_("i"),c=_("f"),h=_("t"),p=_("v"),d=_("w"),v=_("is"),m=_("is not"),g=_("!="),y=_("="),b=_("mod"),w=_("%"),E=_("not"),S=_("in"),x=_("within"),T=_(".."),N=_(","),C=_("or"),k=_("and");L("pluralRuleParser",e,t),r=A([H,P,B,j,F,I]),i=A([q,r]),s=A([U,W,z,J,K]),o=Z();if(o===null)throw new Error("Parse error at position "+n.toString()+" for rule: "+e);return n!==e.length&&L("Warning: Rule not parsed completely. Parser stopped at "+e.substr(0,n)+" for rule: "+e),o}return e}(),h=function(e,t){var n,r=t.supplemental("plurals-type-cardinal/{language}");for(n in r)if(c(r[n],e))return n.replace(/pluralRule-count-/,"");return null};return t.formatPlural=t.prototype.formatPlural=function(e,t,r){var i;return o(e,"value"),o(t,"messageData"),a(t,"messageData"),u(r,"formatValue",r===undefined||typeof r=="string"||typeof r=="number","String or Number"),i=this.plural(e),r=r===undefined?e:r,f(t,"messageData",i),n(t[i],[r])},t.plural=t.prototype.plural=function(e){var t,n;return o(e,"value"),l(e,"value"),t=this.cldr,s(t),t.on("get",i),n=h(e,t),t.off("get",i),r("E_INVALID_CLDR","{description}",typeof n=="string",{description:"Missing rules to deduce plural form of `"+e+"`"}),n},t})