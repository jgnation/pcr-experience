define("platform",[],function(){function e(){}return e.prototype.setPlatformDetector=function(e){this.detector=e},e.prototype.load=function(e,t,n,r){if(r.isBuild){var i=e.match(/\{(.*)\}/);if(i&&i.length>1){i=i[1].split(/\W/),i.push("");for(var s=0;s<i.length;s++)i[s]=e.replace(/\{.*\}/,i[s]).replace(/([^:])\/\//,"$1/"),t([i[s]],n)}}else{var o=this.detector.type(),u=this.detector.device(),a="";e.match("\\{.*?\\b"+u+"\\b.*?\\}")!=null?a=u:e.match("\\{.*?\\b"+o+"\\b.*?\\}")!=null&&(a=o),e=e.replace(/\{.*?\}/g,a).replace(/([^:])\/\//,"$1/"),t([e],function(e){n(e)})}},e.prototype.normalize=function(e,t){var n="",r=e.lastIndexOf("!");return r>0&&(n=e.substring(0,r+1),e=e.substring(r+1)),n+t(e)},new e})